var or=Object.defineProperty;var rr=(i,e,t)=>e in i?or(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ae=(i,e,t)=>rr(i,typeof e!="symbol"?e+"":e,t);import{r as N,R as fe,a as sr,L as ar,C as lr,X as ur,Y as cr,T as dr,b as fr}from"./ui-charts-BdO63Kyp.js";import{g as fn}from"./react-vendor-_uqhELNW.js";import{l as pr,a as mr,r as hr,b as gr,v as yr,c as vr}from"./auth-D1kCPNwJ.js";var It={exports:{}},He={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sn;function xr(){if(Sn)return He;Sn=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,o,s){var l=null;if(s!==void 0&&(l=""+s),o.key!==void 0&&(l=""+o.key),"key"in o){s={};for(var u in o)u!=="key"&&(s[u]=o[u])}else s=o;return o=s.ref,{$$typeof:i,type:n,key:l,ref:o!==void 0?o:null,props:s}}return He.Fragment=e,He.jsx=t,He.jsxs=t,He}var En;function Cr(){return En||(En=1,It.exports=xr()),It.exports}var p=Cr();const po=N.createContext(void 0),Mh=({children:i})=>{const[e,t]=N.useTransition(),[n,o]=N.useState("home"),[s,l]=N.useState({}),[u,d]=N.useState("ar"),[c,f]=N.useState("light"),[m,h]=N.useState([]),[g,y]=N.useState(()=>{const E=localStorage.getItem("abkhas_user_prefs");return E?JSON.parse(E):{preferred_categories:["phones"],budget_range:{min:2e3,max:5500},preferred_brands:["Apple","Samsung"],priority:"balanced",use_case:"camera",language:"ar",theme:"light",calendar:"gregorian",subscription:"free",interactions:[],loyalty:{points:1250,rank:"Shopper",next_rank_points:5e3,daily_streak:4,missions:[{id:"1",title:"قارن بين 3 أجهزة اليوم",points:100,completed:!1,icon:"Scale"},{id:"2",title:"ابحث عن منتج بالصورة",points:150,completed:!0,icon:"Camera"},{id:"3",title:"شارك ترشيح أبخص مع صديق",points:500,completed:!1,icon:"Share"}]}}});N.useEffect(()=>{const E=setTimeout(()=>{localStorage.setItem("abkhas_user_prefs",JSON.stringify(g))},500);return()=>clearTimeout(E)},[g]),N.useEffect(()=>{document.documentElement.dir=u==="ar"?"rtl":"ltr",document.documentElement.lang=u,document.body.dir=u==="ar"?"rtl":"ltr"},[u]),N.useEffect(()=>{c==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[c]);const v=(E,R={})=>{t(()=>{o(E),l(R),window.scrollTo({top:0,behavior:"smooth"})})},T=()=>d(E=>E==="ar"?"en":"ar"),C=()=>f(E=>E==="light"?"dark":"light"),k=E=>y(R=>({...R,...E})),w=E=>{h(R=>R.includes(E)?R.filter(q=>q!==E):R.length<3?[...R,E]:R)},A=(E,R)=>{y(q=>{const I=[...q.interactions,{productId:E.product_id,brand:E.brand,category:E.category,type:R,timestamp:Date.now()}].slice(-100);return{...q,interactions:I}})},P=E=>{y(R=>{if(!R.loyalty)return R;const q=R.loyalty.points+E;let I=R.loyalty.rank,F=R.loyalty.next_rank_points;return q>=15e3?(I="Abkhas",F=5e4):q>=5e3&&(I="Expert",F=15e3),{...R,loyalty:{...R.loyalty,points:q,rank:I,next_rank_points:F}}})};return p.jsx(po.Provider,{value:{currentPage:n,pageParams:s,lang:u,theme:c,userPrefs:g,compareList:m,isPending:e,navigate:v,toggleLang:T,toggleTheme:C,updatePrefs:k,toggleCompare:w,addCoins:P,trackInteraction:A},children:i})},je=()=>{const i=N.useContext(po);if(!i)throw new Error("useAppContext must be used within AppProvider");return i};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mo=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=N.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:o="",children:s,iconNode:l,...u},d)=>N.createElement("svg",{ref:d,..._r,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:mo("lucide",o),...u},[...l.map(([c,f])=>N.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=(i,e)=>{const t=N.forwardRef(({className:n,...o},s)=>N.createElement(kr,{ref:s,iconNode:e,className:mo(`lucide-${Tr(i)}`,n),...o}));return t.displayName=`${i}`,t};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=_("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=_("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=_("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=_("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=_("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=_("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=_("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=_("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=_("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=_("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=_("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=_("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=_("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=_("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=_("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=_("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=_("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=_("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=_("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=_("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=_("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=_("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=_("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=_("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=_("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=_("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=_("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=_("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=_("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=_("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=_("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=_("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=_("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=_("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=_("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=_("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=_("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=_("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=_("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=_("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=_("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=_("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=_("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=_("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=_("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=_("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=_("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=_("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=_("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=_("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=_("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=_("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=_("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=_("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=_("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=_("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=_("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=_("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=_("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=_("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=_("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=_("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=_("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=_("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=_("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=_("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=_("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=_("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=_("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=_("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=_("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=_("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=_("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=_("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=_("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=_("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=_("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),St={ar:{appName:"أبخص",home:"الرئيسية",search:"البحث",wishlist:"المفضلة",rewards:"المكافآت",roadmap:"خارطة الطريق",loyaltyHeader:"مكافآت أبخص",loyaltyTitle:"نادي مكافآت أبخص",abkhasCoins:"أبخص كوينز",currentRank:"رتبتك الحالية",shopper:"متسوق",expert:"خبير",abkhas:"الأبخص",shopperDesc:"بداية رحلة التوفير الذكي. ميزات مقارنة أساسية.",expertDesc:"أصبحت تعرف السوق جيداً. بحث بصري وتاريخ أسعار كامل.",abkhasDesc:"أنت المرجع الأول! وصول حصري للعروض ومساعد شخصي AI.",rankPerks:"مميزات الرتبة",recBonusTitle:"نقاط ذهبية!",recBonusDesc:"لأنك شاركت ترشيح أبخص مع صديق، حصلت على 500 نقطة!",nextRank:"الرتبة القادمة",dailyStreak:"تتابع يومي",missionsTitle:"مهامك اليومية لزيادة الرصيد",redeemTitle:"استبدل نقاطك",giftCardJarir:"بطاقة جرير 50 ريال",giftCardAmazon:"بطاقة أمازون 100 ريال",pointsNeeded:"نقطة مطلوبة",heroTitle:"أبخص .. يعطيك العلم من الآخر",heroSub:"مساعدك الذكي الذي يحلل آلاف المتاجر لضمان أفضل صفقة في السوق السعودي.",searchPlaceholder:"ابحث عن آيفون، سامسونج، لابتوب...",searchBtn:"بحث",categoriesTitle:"الفئات المختارة",phones:"جوالات",laptops:"لابتوبات",tvs:"شاشات",appliances:"أجهزة منزلية",aiRecTitle:"ترشيحات أبخص الشخصية",whyRec:"لماذا يرشحه أبخص؟",matchScore:"نسبة التوافق",price:"السعر",sar:"ريال",freeShipping:"شحن مجاني",filterTitle:"تصفية ذكية",brand:"الماركة",budget:"الميزانية",sortBy:"ترتيب حسب",compatibility:"الأكثر ملاءمة",cheapest:"الأرخص",topRated:"الأفضل تقييماً",back:"رجوع",priceAlert:"تنبيه السعر",bestOffers:"أقوى العروض الحالية",buy:"تسوق الآن",specs:"المواصفات",aiExpertSummary:"رأي أبخص التقني",installments:"قسطها بـ {price} ريال",bnplHint:"تابي وتمارا متوفرة",proBadge:"عضوية برو ✨",upgradePro:"ترقية لـ أبخص Pro",proFeature1:"رادار الأسعار اللحظي",proFeature2:"تنبيهات الخصم قبل الجميع",proPrice:"19 ريال / شهر",buyNow:"فرصة! اشترِ الآن",waitAbit:"تريّث.. السعر بينزل",forecastStable:"سعر مستقر",sizeCompare:"قياس الحجم",visualSearch:"البحث بالصورة",identifying:"أبخص يحلل الصورة...",noResult:"لم نجد نتائج، جرب كلمات أخرى.",chatWelcome:"يا هلا بك! أنا أبخص، وش تبي نقارن لك اليوم؟",footerDesc:"أبخص: خبيرك الرقمي للتوفير الذكي في المملكة.",findNearby:"استلام من الفرع",comparisonMatrix:"مقارنة المواصفات",winner:"الأفضل قيمة",groundingSources:"مصادر موثوقة",nearbyStoresTitle:"متوفر حولك",thinkingProcess:"تحليل ذكاء أبخص",priceHistory:"تاريخ السعر (آخر 6 أشهر)",verifiedStore:"متجر موثوق",safetyNote:"الأسعار تقريبية، تأكد من المتجر النهائي.",quickPrefs:"عدل تفضيلاتك بسرعة",gaming:"ألعاب",camera:"تصوير",everyday:"استخدام يومي",priority:"الأولوية",quality:"الجودة",balanced:"متوازن",challengeAbkhas:"تحدّى ذكاء أبخص!",trainBrain:"رأيك يبني عقل أبخص ليكون الخبير رقم 1 بالسعودية",abkhasGotIt:"أبخص جابها صح!",needsTraining:"يحتاج تدريب أكثر",trainingComplete:"تم استيعاب الملاحظة! عقل أبخص يتطور الآن..",brainPower:"قوة التحليل الحالية",aboutUs:"من نحن",contactUs:"اتصل بنا",privacyPolicy:"سياسة الخصوصية",termsOfService:"الشروط والأحكام",company:"الشركة",support:"الدعم التقني",social:"التواصل الاجتماعي",emailUs:"راسلنا بريدياً",callUs:"راسلنا على الواتساب",location:"المقر الرئيسي",messageSubject:"الموضوع",messageText:"رسالتك",sendMessage:"إرسال الرسالة",footerInquiry:"لديك استفسار؟ فريق أبخص هنا لمساعدتك على مدار الساعة.",compare:"مقارنة",compareNow:"قارن الآن",performance:"الأداء",battery:"البطارية",calendar:"نوع التقويم",gregorian:"ميلادي",hijri:"هجري",roadmapTitle:"خارطة طريق أبخص",roadmapSub:"صوت للميزات اللي ودك نشوفها بالتطبيق، صوتك يبني مستقبل أبخص.",planned:"مخطط له",inProgress:"قيد التطوير",launched:"تم إطلاقه",voteBtn:"تصويت",votedBtn:"تم التصويت",suggestFeature:"اقترح ميزة جديدة",perksShopper:["مقارنة الأسعار بين 5 متاجر كبرى","تنبيهات انخفاض السعر الأساسية","عرض تقييمات المتاجر الموثوقة"],perksExpert:["الوصول لتاريخ الأسعار (6 أشهر)","ميزة البحث بالصورة (Visual Search)","مقارنة المواصفات المتقدمة (Matrix)"],perksAbkhas:["نقاط مضاعفة (2x) على كل مهمة","تنبيهات العروض قبل الجميع بـ 15 دقيقة","مساعد ذكاء اصطناعي VIP مخصص"],verifiedBadge:"متجر موثوق",totalValue:"القيمة الكلية",bestValueBadge:"الأفضل قيمة",confidenceHigh:"موثوقية عالية"},en:{appName:"Abkhas",home:"Home",search:"Search",wishlist:"Wishlist",rewards:"Rewards",roadmap:"Roadmap",loyaltyHeader:"Abkhas Rewards",loyaltyTitle:"Abkhas Rewards Club",abkhasCoins:"Abkhas Coins",currentRank:"Current Rank",shopper:"Shopper",expert:"Expert",abkhas:"The Abkhas",shopperDesc:"Start of smart saving. Basic comparison features.",expertDesc:"You know the market now. Advanced search & history.",abkhasDesc:"The ultimate reference! Early access & AI concierge.",rankPerks:"Rank Perks",recBonusTitle:"Golden Points!",recBonusDesc:"You shared an Abkhas Pick! 500 bonus points awarded.",nextRank:"Next Rank",dailyStreak:"Daily Streak",missionsTitle:"Daily Missions",redeemTitle:"Redeem Your Points",giftCardJarir:"Jarir 50 SAR Gift Card",giftCardAmazon:"Amazon 100 SAR Gift Card",pointsNeeded:"points needed",heroTitle:"Abkhas .. Your Market Expert",heroSub:"Smart assistant analyzing thousands of stores to secure the best deals in KSA.",searchPlaceholder:"Search iPhone, Samsung, Laptop...",searchBtn:"Search",categoriesTitle:"Top Categories",phones:"Phones",laptops:"Laptops",tvs:"TVs",appliances:"Appliances",aiRecTitle:"Abkhas Personal Picks",whyRec:"Why Abkhas Picks This?",matchScore:"Match Rate",price:"Price",sar:"SAR",freeShipping:"Free Shipping",filterTitle:"Smart Filters",brand:"Brand",budget:"Budget",sortBy:"Sort By",compatibility:"Best Match",cheapest:"Cheapest",topRated:"Top Rated",back:"Back",priceAlert:"Price Alert",bestOffers:"Best Current Offers",buy:"Shop Now",specs:"Specs",aiExpertSummary:"Abkhas Tech Opinion",installments:"Install for {price} SAR",bnplHint:"Tabby/Tamara available",proBadge:"Pro Member ✨",upgradePro:"Upgrade to Abkhas Pro",proFeature1:"Real-time price radar",proFeature2:"Early discount alerts",proPrice:"19 SAR / Month",buyNow:"Deal! Buy Now",waitAbit:"Wait.. Price dropping",forecastStable:"Stable Price",sizeCompare:"Visualizer",visualSearch:"Visual Search",identifying:"Abkhas analyzing...",noResult:"No results found.",chatWelcome:"Welcome! I'm Abkhas, what shall we compare today?",footerDesc:"Abkhas: Your digital expert for smart savings in KSA.",findNearby:"Store Pickup",comparisonMatrix:"Specs Matrix",winner:"Best Value",groundingSources:"Verified Sources",nearbyStoresTitle:"Available Nearby",thinkingProcess:"Abkhas Logic",priceHistory:"Price History (Last 6 Months)",verifiedStore:"Verified Store",safetyNote:"Prices are approximate, verify at store.",quickPrefs:"Quick Preferences",gaming:"Gaming",camera:"Camera",everyday:"Everyday",priority:"Priority",quality:"Quality",balanced:"Balanced",challengeAbkhas:"Challenge Abkhas AI!",trainBrain:"Help build Abkhas's brain to be the #1 expert in KSA",abkhasGotIt:"Spot on, Abkhas!",needsTraining:"Needs more training",trainingComplete:"Input received! Abkhas is getting smarter...",brainPower:"Current Brain Power",aboutUs:"About Us",contactUs:"Contact Us",privacyPolicy:"Privacy Policy",termsOfService:"Terms & Conditions",company:"Company",support:"Support",social:"Social Media",emailUs:"Email Us",callUs:"Message us on WhatsApp",location:"Headquarters",messageSubject:"Subject",messageText:"Your Message",sendMessage:"Send Message",footerInquiry:"Have a question? Abkhas team is here to help you 24/7.",compare:"Compare",compareNow:"Compare Now",performance:"Performance",battery:"Battery",calendar:"Calendar System",gregorian:"Gregorian",hijri:"Hijri",roadmapTitle:"Abkhas Roadmap",roadmapSub:"Vote for the features you want to see. Your input shapes the future of Abkhas.",planned:"Planned",inProgress:"In Progress",launched:"Launched",voteBtn:"Vote",votedBtn:"Voted",suggestFeature:"Suggest a Feature",perksShopper:["Compare prices across 5 major stores","Basic price drop alerts","View trusted store ratings"],perksExpert:["Access to 6-month price history","Visual Search via photos","Advanced Specs Matrix"],perksAbkhas:["Double Coins (2x) on all missions","Sale alerts 15 minutes before others","Dedicated VIP AI Concierge"],verifiedBadge:"Verified Store",totalValue:"Total Value",bestValueBadge:"Best Value",confidenceHigh:"High Confidence"}},sg=`data:image/svg+xml;utf8,<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="512" height="512" rx="120" fill="url(%23grad1)"/>
<defs>
<linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
<stop offset="0%" style="stop-color:%23002D9C;stop-opacity:1" />
<stop offset="100%" style="stop-color:%231E90FF;stop-opacity:1" />
</linearGradient>
</defs>
<rect x="116" y="116" width="280" height="280" rx="60" fill="white"/>
<path d="M166 260C166 237.909 183.909 220 206 220C228.091 220 246 237.909 246 260" stroke="%23002D9C" stroke-width="24" stroke-linecap="round"/>
<path d="M266 260C266 237.909 283.909 220 306 220C328.091 220 346 237.909 346 260" stroke="%23002D9C" stroke-width="24" stroke-linecap="round"/>
<path d="M80 80C80 80 120 100 130 140M80 80C80 80 100 120 140 130" stroke="%2300BFFF" stroke-width="12" stroke-linecap="round"/>
<circle cx="80" cy="80" r="10" fill="%2300BFFF"/>
<path d="M432 432C432 432 392 412 382 372M432 432C432 432 412 392 372 382" stroke="%2300BFFF" stroke-width="12" stroke-linecap="round"/>
<circle cx="432" cy="432" r="10" fill="%2300BFFF"/>
</svg>`,gn=[{product_id:"iphone-15-pro-max",category:"phones",name:"Apple iPhone 15 Pro Max 256GB",brand:"Apple",thumbnail_url:"https://picsum.photos/seed/iphone15/400/400",images:["https://picsum.photos/seed/iphone15/600/600"],description:"أحدث هاتف من آبل مع معالج A17 Pro وكاميرا احترافية وتصميم تيتانيوم.",tags:["camera","battery","flagship","ios"],key_specs:{storage_gb:256,ram_gb:8,camera_mp:48,battery_mah:4441,screen_size_inch:6.7,refresh_rate_hz:120},offers:[{offer_id:"off-1",store_id:"jarir",store_name:"جرير",price:5299,currency:"SAR",shipping_cost:0,estimated_delivery_days:1,return_policy:"15 يوم استرجاع",rating_average:4.8,rating_count:1200,affiliate_url:"#",is_verified:!0,coupons:[{code:"JRR10",discount_text:"10% خصم إضافي",estimated_value:100}]},{offer_id:"off-2",store_id:"amazon",store_name:"أمازون السعودية",price:4999,currency:"SAR",shipping_cost:12,estimated_delivery_days:2,return_policy:"30 يوم استرجاع",rating_average:4.7,rating_count:3500,affiliate_url:"#",is_verified:!0}]},{product_id:"samsung-s24-ultra",category:"phones",name:"Samsung Galaxy S24 Ultra 512GB",brand:"Samsung",thumbnail_url:"https://picsum.photos/seed/s24ultra/400/400",tags:["gaming","camera","flagship","android"],key_specs:{storage_gb:512,ram_gb:12,camera_mp:200,battery_mah:5e3,screen_size_inch:6.8,refresh_rate_hz:120},offers:[{offer_id:"off-4",store_id:"amazon",store_name:"أمازون السعودية",price:4500,currency:"SAR",shipping_cost:0,estimated_delivery_days:2,return_policy:"30 يوم",rating_average:4.9,rating_count:2100,affiliate_url:"#",is_verified:!0}]}],xo=({src:i,alt:e,className:t="",lazy:n=!0})=>{const[o,s]=N.useState("loading"),[l,u]=N.useState(i);N.useEffect(()=>{i?(s("loading"),u(i)):s("error")},[i]);const d=()=>s("loaded"),c=()=>s("error");return p.jsxs("div",{className:`relative overflow-hidden bg-gray-50 dark:bg-slate-900/40 flex items-center justify-center ${t}`,children:[o==="loading"&&p.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center animate-shimmer",children:[p.jsx(An,{size:48,className:"text-gray-200 dark:text-slate-700 opacity-50"}),p.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[p.jsx(Gr,{size:14,className:"text-indigo-500 animate-spin"}),p.jsx("span",{className:"text-[10px] font-black text-gray-400 dark:text-slate-500 uppercase tracking-widest",children:"جاري التحميل..."})]})]}),o==="error"&&p.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-gray-100 dark:bg-slate-800",children:[p.jsx(pn,{size:32,className:"text-red-400/50 mb-2"}),p.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:"فشل تحميل الصورة"})]}),l?p.jsx("img",{src:l,alt:e,onLoad:d,onError:c,loading:n?"lazy":"eager",className:`w-full h-full object-contain transition-all duration-700 ${o==="loaded"?"opacity-100 scale-100":"opacity-0 scale-95"}`}):p.jsx("div",{className:"p-8 text-gray-200 dark:text-slate-700",children:p.jsx(An,{size:64})})]})},Nt=({icon:i,value:e})=>p.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-slate-900/40 p-2.5 rounded-2xl border border-gray-100 dark:border-slate-700/50 transition-colors group-hover:bg-white dark:group-hover:bg-slate-800",children:[i,p.jsx("span",{className:"text-[10px] font-black text-gray-700 dark:text-slate-300",children:e})]}),Mn=({children:i,className:e=""})=>p.jsx("div",{className:`text-white font-black px-3 py-1.5 rounded-xl shadow-lg flex items-center gap-1.5 border border-white/10 ${e}`,children:i}),Co=({product:i,onClick:e,lang:t,aiReasons:n,isExplaining:o})=>{const{trackInteraction:s}=je(),l=i.offers?.[0],u=St[t],d=()=>{s(i,"click"),e(i.product_id)},c=(i.score||0)>=.85,f=n&&n.length>0;return p.jsxs("div",{onClick:d,className:"group bg-white dark:bg-slate-800 rounded-[2.5rem] shadow-sm hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 cursor-pointer overflow-hidden border border-gray-100 dark:border-slate-700/50 flex flex-col h-full relative",children:[p.jsxs("div",{className:"absolute top-5 start-5 z-30 flex flex-col gap-2",children:[i.score&&p.jsxs("div",{className:"bg-indigo-600/90 backdrop-blur-md text-white text-[10px] px-4 py-2 rounded-2xl shadow-xl shadow-indigo-200/20 flex items-center gap-2 border border-white/20 animate-in fade-in zoom-in duration-700 font-black",children:[p.jsx(pt,{size:14,className:"fill-current text-yellow-300"}),p.jsxs("span",{children:[Math.round(i.score*100),"% ",u.matchScore]})]}),c&&p.jsxs(Mn,{className:"bg-amber-500/90 backdrop-blur-md text-[9px]",children:[p.jsx(vo,{size:12}),p.jsx("span",{children:u.bestValueBadge})]})]}),l?.is_verified&&p.jsx("div",{className:"absolute top-5 end-5 z-30",children:p.jsxs(Mn,{className:"bg-green-500/90 backdrop-blur-md text-[9px]",children:[p.jsx(zr,{size:14}),p.jsx("span",{children:u.verifiedBadge})]})}),p.jsxs("div",{className:"relative pt-[90%] bg-gray-50/50 dark:bg-slate-900/20 overflow-hidden",children:[p.jsx(xo,{src:i.thumbnail_url,alt:i.name,className:"absolute inset-0 w-full h-full p-8 group-hover:scale-110 transition-transform duration-700 ease-out"}),f&&p.jsx("div",{className:"absolute bottom-4 inset-x-4 z-20 transition-all duration-500 transform translate-y-2 group-hover:translate-y-0",children:p.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl border border-white/40 dark:border-slate-700/40 p-4 rounded-[1.8rem] shadow-2xl shadow-black/5 ring-1 ring-black/5",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"bg-indigo-600 p-1.5 rounded-xl shrink-0 shadow-lg shadow-indigo-200",children:p.jsx(pt,{size:12,className:"text-white fill-white"})}),p.jsx("span",{className:"text-[10px] font-black text-indigo-900 dark:text-indigo-200 uppercase tracking-widest",children:t==="ar"?"تحليل أبخص الذكي":"Abkhas Smart Logic"})]}),p.jsx("div",{className:"text-[8px] font-black text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded-lg",children:u.confidenceHigh})]}),p.jsx("ul",{className:"space-y-1.5",children:n.slice(0,2).map((m,h)=>p.jsxs("li",{className:`flex items-start gap-2 ${o&&m.includes("...")?"animate-pulse":""}`,children:[p.jsx(mn,{size:12,className:"text-green-500 mt-0.5 shrink-0",strokeWidth:3}),p.jsx("span",{className:"text-[10px] font-bold text-slate-700 dark:text-slate-300 line-clamp-1 leading-snug",children:m})]},h))})]})})]}),p.jsxs("div",{className:"p-6 flex flex-col flex-grow text-start",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("span",{className:"text-[10px] text-indigo-500 dark:text-indigo-400 uppercase font-black tracking-[0.2em]",children:i.brand}),p.jsxs("div",{className:"flex items-center gap-1 bg-amber-400/10 px-2 py-1 rounded-lg",children:[p.jsx(Zr,{size:10,className:"text-amber-500 fill-amber-500"}),p.jsx("span",{className:"text-[10px] font-black text-amber-700 dark:text-amber-400",children:l?.rating_average})]})]}),p.jsx("h3",{className:"font-black text-gray-800 dark:text-white text-base mb-5 h-12 line-clamp-2 leading-tight group-hover:text-indigo-600 transition-colors",children:i.name}),p.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[p.jsx(Nt,{icon:p.jsx(Pr,{size:16,className:"text-indigo-500 mb-1"}),value:`${i.key_specs.ram_gb}GB`}),p.jsx(Nt,{icon:p.jsx(ho,{size:16,className:"text-indigo-500 mb-1"}),value:`${i.key_specs.camera_mp}MP`}),p.jsx(Nt,{icon:p.jsx(wr,{size:16,className:"text-indigo-500 mb-1"}),value:i.key_specs.battery_mah})]}),p.jsxs("div",{className:"mt-auto pt-5 border-t border-gray-50 dark:border-slate-700/50 flex items-center justify-between",children:[p.jsxs("div",{className:"flex flex-col flex-1",children:[p.jsx("span",{className:"text-[9px] font-black text-gray-400 dark:text-slate-500 uppercase tracking-widest",children:u.totalValue}),p.jsxs("div",{className:"flex items-baseline gap-1 mt-1",children:[p.jsx("span",{className:"text-2xl font-black text-indigo-700 dark:text-indigo-400",children:(l?.price||0).toLocaleString()}),p.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-slate-400",children:u.sar})]}),l?.shipping_cost===0&&p.jsxs("span",{className:"text-[8px] font-black text-green-600 dark:text-green-400 uppercase mt-1",children:["+ ",u.freeShipping]})]}),p.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 rounded-2xl group-hover:bg-indigo-600 group-hover:text-white dark:group-hover:bg-indigo-500 transition-all duration-300 shadow-sm active:scale-90",children:t==="ar"?p.jsx(go,{size:20}):p.jsx(kt,{size:20})})]})]})]})},es={purchase:1,wishlist:.7,click:.3,view:.1};function Rt(i){const e=i.coupons?.[0]?.estimated_value||0;return i.price+i.shipping_cost-e}function ts(i,e){if(i<=e.min)return 1;if(i>e.max*1.2)return 0;const t=e.max-e.min;return Math.max(.1,1-(i-e.min)/(t||1)*.7)}function ns(i,e){switch(e){case"gaming":const t=i.ram_gb>=12?1:i.ram_gb>=8?.6:.3,n=i.refresh_rate_hz&&i.refresh_rate_hz>=120?1:.4;return t*.7+n*.3;case"camera":return i.camera_mp>=100?1:i.camera_mp>=48?.8:.4;default:return i.battery_mah>=5e3?1:i.battery_mah>=4e3?.7:.4}}function is(i){const e=i.rating_average/5,t=Math.min(i.rating_count/500,1),n=i.is_verified?.2:0;return Math.min(1,e*.6+t*.2+n)}function os(i,e){if(!i||i.length===0)return .5;const t=Date.now();let n=0,o=0;return i.forEach(s=>{const l=(t-s.timestamp)/864e5,u=Math.exp(-.1*l),d=(es[s.type]||.1)*u;s.brand===e.brand&&(n+=d),s.category===e.category&&(n+=d*.5),o+=d}),o>0?Math.min(1,.5+n/o):.5}function To(i,e){if(!i.offers||i.offers.length===0)return 0;const t=i.offers.reduce((h,g)=>{const y=Rt(h);return Rt(g)<y?g:h},i.offers[0]);let n=.35,o=.25,s=.2,l=.2;e.priority==="price"?(n=.6,s=.1,o=.1,l=.2):e.priority==="quality"&&(n=.1,o=.5,s=.25,l=.15);const u=ts(Rt(t),e.budget_range),d=ns(i.key_specs,e.use_case),c=is(t),f=os(e.interactions,i),m=n*u+o*d+s*c+l*f;return Math.round(m*100)/100}var B;(function(i){i.assertEqual=o=>{};function e(o){}i.assertIs=e;function t(o){throw new Error}i.assertNever=t,i.arrayToEnum=o=>{const s={};for(const l of o)s[l]=l;return s},i.getValidEnumValues=o=>{const s=i.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),l={};for(const u of s)l[u]=o[u];return i.objectValues(l)},i.objectValues=o=>i.objectKeys(o).map(function(s){return o[s]}),i.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const s=[];for(const l in o)Object.prototype.hasOwnProperty.call(o,l)&&s.push(l);return s},i.find=(o,s)=>{for(const l of o)if(s(l))return l},i.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,s=" | "){return o.map(l=>typeof l=="string"?`'${l}'`:l).join(s)}i.joinValues=n,i.jsonStringifyReplacer=(o,s)=>typeof s=="bigint"?s.toString():s})(B||(B={}));var bn;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(bn||(bn={}));const M=B.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),de=i=>{switch(typeof i){case"undefined":return M.undefined;case"string":return M.string;case"number":return Number.isNaN(i)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":return Array.isArray(i)?M.array:i===null?M.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?M.promise:typeof Map<"u"&&i instanceof Map?M.map:typeof Set<"u"&&i instanceof Set?M.set:typeof Date<"u"&&i instanceof Date?M.date:M.object;default:return M.unknown}},x=B.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class le extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},n={_errors:[]},o=s=>{for(const l of s.issues)if(l.code==="invalid_union")l.unionErrors.map(o);else if(l.code==="invalid_return_type")o(l.returnTypeError);else if(l.code==="invalid_arguments")o(l.argumentsError);else if(l.path.length===0)n._errors.push(t(l));else{let u=n,d=0;for(;d<l.path.length;){const c=l.path[d];d===l.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(t(l))):u[c]=u[c]||{_errors:[]},u=u[c],d++}}};return o(this),n}static assert(e){if(!(e instanceof le))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,B.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const o of this.issues)if(o.path.length>0){const s=o.path[0];t[s]=t[s]||[],t[s].push(e(o))}else n.push(e(o));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}le.create=i=>new le(i);const Ot=(i,e)=>{let t;switch(i.code){case x.invalid_type:i.received===M.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case x.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,B.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:t=`Unrecognized key(s) in object: ${B.joinValues(i.keys,", ")}`;break;case x.invalid_union:t="Invalid input";break;case x.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${B.joinValues(i.options)}`;break;case x.invalid_enum_value:t=`Invalid enum value. Expected ${B.joinValues(i.options)}, received '${i.received}'`;break;case x.invalid_arguments:t="Invalid function arguments";break;case x.invalid_return_type:t="Invalid function return type";break;case x.invalid_date:t="Invalid date";break;case x.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:B.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case x.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="bigint"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case x.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case x.custom:t="Invalid input";break;case x.invalid_intersection_types:t="Intersection results could not be merged";break;case x.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case x.not_finite:t="Number must be finite";break;default:t=e.defaultError,B.assertNever(i)}return{message:t}};let rs=Ot;function ss(){return rs}const as=i=>{const{data:e,path:t,errorMaps:n,issueData:o}=i,s=[...t,...o.path||[]],l={...o,path:s};if(o.message!==void 0)return{...o,path:s,message:o.message};let u="";const d=n.filter(c=>!!c).slice().reverse();for(const c of d)u=c(l,{data:e,defaultError:u}).message;return{...o,path:s,message:u}};function S(i,e){const t=ss(),n=as({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===Ot?void 0:Ot].filter(o=>!!o)});i.common.issues.push(n)}class Y{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const o of t){if(o.status==="aborted")return V;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const o of t){const s=await o.key,l=await o.value;n.push({key:s,value:l})}return Y.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const o of t){const{key:s,value:l}=o;if(s.status==="aborted"||l.status==="aborted")return V;s.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof l.value<"u"||o.alwaysSet)&&(n[s.value]=l.value)}return{status:e.value,value:n}}}const V=Object.freeze({status:"aborted"}),Ye=i=>({status:"dirty",value:i}),ee=i=>({status:"valid",value:i}),In=i=>i.status==="aborted",Nn=i=>i.status==="dirty",De=i=>i.status==="valid",mt=i=>typeof Promise<"u"&&i instanceof Promise;var b;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e?.message})(b||(b={}));class re{constructor(e,t,n,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Rn=(i,e)=>{if(De(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new le(i.common.issues);return this._error=t,this._error}}};function U(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:o}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(l,u)=>{const{message:d}=i;return l.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??n??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:d??t??u.defaultError}},description:o}}class ${get description(){return this._def.description}_getType(e){return de(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:de(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Y,ctx:{common:e.parent.common,data:e.data,parsedType:de(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(mt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:de(e)},o=this._parseSync({data:e,path:n.path,parent:n});return Rn(n,o)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:de(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return De(n)?{value:n.value}:{issues:t.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(n=>De(n)?{value:n.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:de(e)},o=this._parse({data:e,path:n.path,parent:n}),s=await(mt(o)?o:Promise.resolve(o));return Rn(n,s)}refine(e,t){const n=o=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(o):t;return this._refinement((o,s)=>{const l=e(o),u=()=>s.addIssue({code:x.custom,...n(o)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,t){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof t=="function"?t(n,o):t),!1))}_refinement(e){return new Fe({schema:this,typeName:L.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return pe.create(this,this._def)}nullable(){return Ue.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oe.create(this)}promise(){return xt.create(this,this._def)}or(e){return gt.create([this,e],this._def)}and(e){return yt.create(this,e,this._def)}transform(e){return new Fe({...U(this._def),schema:this,typeName:L.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Yt({...U(this._def),innerType:this,defaultValue:t,typeName:L.ZodDefault})}brand(){return new Is({typeName:L.ZodBranded,type:this,...U(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Zt({...U(this._def),innerType:this,catchValue:t,typeName:L.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return yn.create(this,e)}readonly(){return Kt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ls=/^c[^\s-]{8,}$/i,us=/^[0-9a-z]+$/,cs=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ds=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fs=/^[a-z0-9_-]{21}$/i,ps=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ms=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hs=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,gs="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Pt;const ys=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,vs=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,xs=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Cs=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ts=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,_s=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_o="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ks=new RegExp(`^${_o}$`);function ko(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Ss(i){return new RegExp(`^${ko(i)}$`)}function Es(i){let e=`${_o}T${ko(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ws(i,e){return!!((e==="v4"||!e)&&ys.test(i)||(e==="v6"||!e)&&xs.test(i))}function As(i,e){if(!ps.test(i))return!1;try{const[t]=i.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&o?.typ!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function Ms(i,e){return!!((e==="v4"||!e)&&vs.test(i)||(e==="v6"||!e)&&Cs.test(i))}class ie extends ${_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==M.string){const s=this._getOrReturnCtx(e);return S(s,{code:x.invalid_type,expected:M.string,received:s.parsedType}),V}const n=new Y;let o;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(o=this._getOrReturnCtx(e,o),S(o,{code:x.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(o=this._getOrReturnCtx(e,o),S(o,{code:x.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const l=e.data.length>s.value,u=e.data.length<s.value;(l||u)&&(o=this._getOrReturnCtx(e,o),l?S(o,{code:x.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):u&&S(o,{code:x.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")hs.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"email",code:x.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")Pt||(Pt=new RegExp(gs,"u")),Pt.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"emoji",code:x.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")ds.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"uuid",code:x.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")fs.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"nanoid",code:x.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")ls.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"cuid",code:x.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")us.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"cuid2",code:x.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")cs.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"ulid",code:x.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),S(o,{validation:"url",code:x.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"regex",code:x.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(o=this._getOrReturnCtx(e,o),S(o,{code:x.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(o=this._getOrReturnCtx(e,o),S(o,{code:x.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(o=this._getOrReturnCtx(e,o),S(o,{code:x.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?Es(s).test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{code:x.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?ks.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{code:x.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?Ss(s).test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{code:x.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?ms.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"duration",code:x.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?ws(e.data,s.version)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"ip",code:x.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?As(e.data,s.alg)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"jwt",code:x.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?Ms(e.data,s.version)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"cidr",code:x.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?Ts.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"base64",code:x.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?_s.test(e.data)||(o=this._getOrReturnCtx(e,o),S(o,{validation:"base64url",code:x.invalid_string,message:s.message}),n.dirty()):B.assertNever(s);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(o=>e.test(o),{validation:t,code:x.invalid_string,...b.errToObj(n)})}_addCheck(e){return new ie({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...b.errToObj(e)})}url(e){return this._addCheck({kind:"url",...b.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...b.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...b.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...b.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...b.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...b.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...b.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...b.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...b.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...b.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...b.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...b.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...b.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...b.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...b.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...b.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...b.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...b.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...b.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...b.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...b.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...b.errToObj(t)})}nonempty(e){return this.min(1,b.errToObj(e))}trim(){return new ie({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ie({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ie({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ie.create=i=>new ie({checks:[],typeName:L.ZodString,coerce:i?.coerce??!1,...U(i)});function bs(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=t>n?t:n,s=Number.parseInt(i.toFixed(o).replace(".","")),l=Number.parseInt(e.toFixed(o).replace(".",""));return s%l/10**o}class Ce extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==M.number){const s=this._getOrReturnCtx(e);return S(s,{code:x.invalid_type,expected:M.number,received:s.parsedType}),V}let n;const o=new Y;for(const s of this._def.checks)s.kind==="int"?B.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),S(n,{code:x.invalid_type,expected:"integer",received:"float",message:s.message}),o.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),S(n,{code:x.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),S(n,{code:x.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="multipleOf"?bs(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),S(n,{code:x.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),S(n,{code:x.not_finite,message:s.message}),o.dirty()):B.assertNever(s);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,b.toString(t))}gt(e,t){return this.setLimit("min",e,!1,b.toString(t))}lte(e,t){return this.setLimit("max",e,!0,b.toString(t))}lt(e,t){return this.setLimit("max",e,!1,b.toString(t))}setLimit(e,t,n,o){return new Ce({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:b.toString(o)}]})}_addCheck(e){return new Ce({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:b.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:b.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:b.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:b.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:b.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:b.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:b.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:b.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:b.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&B.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ce.create=i=>new Ce({checks:[],typeName:L.ZodNumber,coerce:i?.coerce||!1,...U(i)});class Te extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==M.bigint)return this._getInvalidInput(e);let n;const o=new Y;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),S(n,{code:x.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),S(n,{code:x.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),S(n,{code:x.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):B.assertNever(s);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return S(t,{code:x.invalid_type,expected:M.bigint,received:t.parsedType}),V}gte(e,t){return this.setLimit("min",e,!0,b.toString(t))}gt(e,t){return this.setLimit("min",e,!1,b.toString(t))}lte(e,t){return this.setLimit("max",e,!0,b.toString(t))}lt(e,t){return this.setLimit("max",e,!1,b.toString(t))}setLimit(e,t,n,o){return new Te({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:b.toString(o)}]})}_addCheck(e){return new Te({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:b.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:b.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:b.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:b.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:b.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Te.create=i=>new Te({checks:[],typeName:L.ZodBigInt,coerce:i?.coerce??!1,...U(i)});class ht extends ${_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==M.boolean){const n=this._getOrReturnCtx(e);return S(n,{code:x.invalid_type,expected:M.boolean,received:n.parsedType}),V}return ee(e.data)}}ht.create=i=>new ht({typeName:L.ZodBoolean,coerce:i?.coerce||!1,...U(i)});class Le extends ${_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==M.date){const s=this._getOrReturnCtx(e);return S(s,{code:x.invalid_type,expected:M.date,received:s.parsedType}),V}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return S(s,{code:x.invalid_date}),V}const n=new Y;let o;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(o=this._getOrReturnCtx(e,o),S(o,{code:x.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(o=this._getOrReturnCtx(e,o),S(o,{code:x.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):B.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Le({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:b.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:b.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Le.create=i=>new Le({checks:[],coerce:i?.coerce||!1,typeName:L.ZodDate,...U(i)});class Pn extends ${_parse(e){if(this._getType(e)!==M.symbol){const n=this._getOrReturnCtx(e);return S(n,{code:x.invalid_type,expected:M.symbol,received:n.parsedType}),V}return ee(e.data)}}Pn.create=i=>new Pn({typeName:L.ZodSymbol,...U(i)});class Dn extends ${_parse(e){if(this._getType(e)!==M.undefined){const n=this._getOrReturnCtx(e);return S(n,{code:x.invalid_type,expected:M.undefined,received:n.parsedType}),V}return ee(e.data)}}Dn.create=i=>new Dn({typeName:L.ZodUndefined,...U(i)});class Ln extends ${_parse(e){if(this._getType(e)!==M.null){const n=this._getOrReturnCtx(e);return S(n,{code:x.invalid_type,expected:M.null,received:n.parsedType}),V}return ee(e.data)}}Ln.create=i=>new Ln({typeName:L.ZodNull,...U(i)});class Vn extends ${constructor(){super(...arguments),this._any=!0}_parse(e){return ee(e.data)}}Vn.create=i=>new Vn({typeName:L.ZodAny,...U(i)});class zt extends ${constructor(){super(...arguments),this._unknown=!0}_parse(e){return ee(e.data)}}zt.create=i=>new zt({typeName:L.ZodUnknown,...U(i)});class me extends ${_parse(e){const t=this._getOrReturnCtx(e);return S(t,{code:x.invalid_type,expected:M.never,received:t.parsedType}),V}}me.create=i=>new me({typeName:L.ZodNever,...U(i)});class Fn extends ${_parse(e){if(this._getType(e)!==M.undefined){const n=this._getOrReturnCtx(e);return S(n,{code:x.invalid_type,expected:M.void,received:n.parsedType}),V}return ee(e.data)}}Fn.create=i=>new Fn({typeName:L.ZodVoid,...U(i)});class oe extends ${_parse(e){const{ctx:t,status:n}=this._processInputParams(e),o=this._def;if(t.parsedType!==M.array)return S(t,{code:x.invalid_type,expected:M.array,received:t.parsedType}),V;if(o.exactLength!==null){const l=t.data.length>o.exactLength.value,u=t.data.length<o.exactLength.value;(l||u)&&(S(t,{code:l?x.too_big:x.too_small,minimum:u?o.exactLength.value:void 0,maximum:l?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&t.data.length<o.minLength.value&&(S(t,{code:x.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&t.data.length>o.maxLength.value&&(S(t,{code:x.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((l,u)=>o.type._parseAsync(new re(t,l,t.path,u)))).then(l=>Y.mergeArray(n,l));const s=[...t.data].map((l,u)=>o.type._parseSync(new re(t,l,t.path,u)));return Y.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new oe({...this._def,minLength:{value:e,message:b.toString(t)}})}max(e,t){return new oe({...this._def,maxLength:{value:e,message:b.toString(t)}})}length(e,t){return new oe({...this._def,exactLength:{value:e,message:b.toString(t)}})}nonempty(e){return this.min(1,e)}}oe.create=(i,e)=>new oe({type:i,minLength:null,maxLength:null,exactLength:null,typeName:L.ZodArray,...U(e)});function Me(i){if(i instanceof z){const e={};for(const t in i.shape){const n=i.shape[t];e[t]=pe.create(Me(n))}return new z({...i._def,shape:()=>e})}else return i instanceof oe?new oe({...i._def,type:Me(i.element)}):i instanceof pe?pe.create(Me(i.unwrap())):i instanceof Ue?Ue.create(Me(i.unwrap())):i instanceof _e?_e.create(i.items.map(e=>Me(e))):i}class z extends ${constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=B.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==M.object){const c=this._getOrReturnCtx(e);return S(c,{code:x.invalid_type,expected:M.object,received:c.parsedType}),V}const{status:n,ctx:o}=this._processInputParams(e),{shape:s,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof me&&this._def.unknownKeys==="strip"))for(const c in o.data)l.includes(c)||u.push(c);const d=[];for(const c of l){const f=s[c],m=o.data[c];d.push({key:{status:"valid",value:c},value:f._parse(new re(o,m,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof me){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of u)d.push({key:{status:"valid",value:f},value:{status:"valid",value:o.data[f]}});else if(c==="strict")u.length>0&&(S(o,{code:x.unrecognized_keys,keys:u}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of u){const m=o.data[f];d.push({key:{status:"valid",value:f},value:c._parse(new re(o,m,o.path,f)),alwaysSet:f in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of d){const m=await f.key,h=await f.value;c.push({key:m,value:h,alwaysSet:f.alwaysSet})}return c}).then(c=>Y.mergeObjectSync(n,c)):Y.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return b.errToObj,new z({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{const o=this._def.errorMap?.(t,n).message??n.defaultError;return t.code==="unrecognized_keys"?{message:b.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new z({...this._def,unknownKeys:"strip"})}passthrough(){return new z({...this._def,unknownKeys:"passthrough"})}extend(e){return new z({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new z({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:L.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new z({...this._def,catchall:e})}pick(e){const t={};for(const n of B.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new z({...this._def,shape:()=>t})}omit(e){const t={};for(const n of B.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new z({...this._def,shape:()=>t})}deepPartial(){return Me(this)}partial(e){const t={};for(const n of B.objectKeys(this.shape)){const o=this.shape[n];e&&!e[n]?t[n]=o:t[n]=o.optional()}return new z({...this._def,shape:()=>t})}required(e){const t={};for(const n of B.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof pe;)s=s._def.innerType;t[n]=s}return new z({...this._def,shape:()=>t})}keyof(){return So(B.objectKeys(this.shape))}}z.create=(i,e)=>new z({shape:()=>i,unknownKeys:"strip",catchall:me.create(),typeName:L.ZodObject,...U(e)});z.strictCreate=(i,e)=>new z({shape:()=>i,unknownKeys:"strict",catchall:me.create(),typeName:L.ZodObject,...U(e)});z.lazycreate=(i,e)=>new z({shape:i,unknownKeys:"strip",catchall:me.create(),typeName:L.ZodObject,...U(e)});class gt extends ${_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function o(s){for(const u of s)if(u.result.status==="valid")return u.result;for(const u of s)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const l=s.map(u=>new le(u.ctx.common.issues));return S(t,{code:x.invalid_union,unionErrors:l}),V}if(t.common.async)return Promise.all(n.map(async s=>{const l={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(o);{let s;const l=[];for(const d of n){const c={...t,common:{...t.common,issues:[]},parent:null},f=d._parseSync({data:t.data,path:t.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:c}),c.common.issues.length&&l.push(c.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const u=l.map(d=>new le(d));return S(t,{code:x.invalid_union,unionErrors:u}),V}}get options(){return this._def.options}}gt.create=(i,e)=>new gt({options:i,typeName:L.ZodUnion,...U(e)});function Jt(i,e){const t=de(i),n=de(e);if(i===e)return{valid:!0,data:i};if(t===M.object&&n===M.object){const o=B.objectKeys(e),s=B.objectKeys(i).filter(u=>o.indexOf(u)!==-1),l={...i,...e};for(const u of s){const d=Jt(i[u],e[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(t===M.array&&n===M.array){if(i.length!==e.length)return{valid:!1};const o=[];for(let s=0;s<i.length;s++){const l=i[s],u=e[s],d=Jt(l,u);if(!d.valid)return{valid:!1};o.push(d.data)}return{valid:!0,data:o}}else return t===M.date&&n===M.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class yt extends ${_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=(s,l)=>{if(In(s)||In(l))return V;const u=Jt(s.value,l.value);return u.valid?((Nn(s)||Nn(l))&&t.dirty(),{status:t.value,value:u.data}):(S(n,{code:x.invalid_intersection_types}),V)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,l])=>o(s,l)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}yt.create=(i,e,t)=>new yt({left:i,right:e,typeName:L.ZodIntersection,...U(t)});class _e extends ${_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.array)return S(n,{code:x.invalid_type,expected:M.array,received:n.parsedType}),V;if(n.data.length<this._def.items.length)return S(n,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),V;!this._def.rest&&n.data.length>this._def.items.length&&(S(n,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new re(n,l,n.path,u)):null}).filter(l=>!!l);return n.common.async?Promise.all(s).then(l=>Y.mergeArray(t,l)):Y.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new _e({...this._def,rest:e})}}_e.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _e({items:i,typeName:L.ZodTuple,rest:null,...U(e)})};class vt extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.object)return S(n,{code:x.invalid_type,expected:M.object,received:n.parsedType}),V;const o=[],s=this._def.keyType,l=this._def.valueType;for(const u in n.data)o.push({key:s._parse(new re(n,u,n.path,u)),value:l._parse(new re(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?Y.mergeObjectAsync(t,o):Y.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof $?new vt({keyType:e,valueType:t,typeName:L.ZodRecord,...U(n)}):new vt({keyType:ie.create(),valueType:e,typeName:L.ZodRecord,...U(t)})}}class Un extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.map)return S(n,{code:x.invalid_type,expected:M.map,received:n.parsedType}),V;const o=this._def.keyType,s=this._def.valueType,l=[...n.data.entries()].map(([u,d],c)=>({key:o._parse(new re(n,u,n.path,[c,"key"])),value:s._parse(new re(n,d,n.path,[c,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const c=await d.key,f=await d.value;if(c.status==="aborted"||f.status==="aborted")return V;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),u.set(c.value,f.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const d of l){const c=d.key,f=d.value;if(c.status==="aborted"||f.status==="aborted")return V;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),u.set(c.value,f.value)}return{status:t.value,value:u}}}}Un.create=(i,e,t)=>new Un({valueType:e,keyType:i,typeName:L.ZodMap,...U(t)});class Qe extends ${_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.set)return S(n,{code:x.invalid_type,expected:M.set,received:n.parsedType}),V;const o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(S(n,{code:x.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(S(n,{code:x.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const s=this._def.valueType;function l(d){const c=new Set;for(const f of d){if(f.status==="aborted")return V;f.status==="dirty"&&t.dirty(),c.add(f.value)}return{status:t.value,value:c}}const u=[...n.data.values()].map((d,c)=>s._parse(new re(n,d,n.path,c)));return n.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(e,t){return new Qe({...this._def,minSize:{value:e,message:b.toString(t)}})}max(e,t){return new Qe({...this._def,maxSize:{value:e,message:b.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Qe.create=(i,e)=>new Qe({valueType:i,minSize:null,maxSize:null,typeName:L.ZodSet,...U(e)});class Wt extends ${get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Wt.create=(i,e)=>new Wt({getter:i,typeName:L.ZodLazy,...U(e)});class qn extends ${_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return S(t,{received:t.data,code:x.invalid_literal,expected:this._def.value}),V}return{status:"valid",value:e.data}}get value(){return this._def.value}}qn.create=(i,e)=>new qn({value:i,typeName:L.ZodLiteral,...U(e)});function So(i,e){return new Ve({values:i,typeName:L.ZodEnum,...U(e)})}class Ve extends ${_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return S(t,{expected:B.joinValues(n),received:t.parsedType,code:x.invalid_type}),V}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return S(t,{received:t.data,code:x.invalid_enum_value,options:n}),V}return ee(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ve.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ve.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Ve.create=So;class $n extends ${_parse(e){const t=B.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==M.string&&n.parsedType!==M.number){const o=B.objectValues(t);return S(n,{expected:B.joinValues(o),received:n.parsedType,code:x.invalid_type}),V}if(this._cache||(this._cache=new Set(B.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const o=B.objectValues(t);return S(n,{received:n.data,code:x.invalid_enum_value,options:o}),V}return ee(e.data)}get enum(){return this._def.values}}$n.create=(i,e)=>new $n({values:i,typeName:L.ZodNativeEnum,...U(e)});class xt extends ${unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.promise&&t.common.async===!1)return S(t,{code:x.invalid_type,expected:M.promise,received:t.parsedType}),V;const n=t.parsedType===M.promise?t.data:Promise.resolve(t.data);return ee(n.then(o=>this._def.type.parseAsync(o,{path:t.path,errorMap:t.common.contextualErrorMap})))}}xt.create=(i,e)=>new xt({type:i,typeName:L.ZodPromise,...U(e)});class Fe extends ${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===L.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=this._def.effect||null,s={addIssue:l=>{S(n,l),l.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),o.type==="preprocess"){const l=o.transform(n.data,s);if(n.common.async)return Promise.resolve(l).then(async u=>{if(t.value==="aborted")return V;const d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?V:d.status==="dirty"||t.value==="dirty"?Ye(d.value):d});{if(t.value==="aborted")return V;const u=this._def.schema._parseSync({data:l,path:n.path,parent:n});return u.status==="aborted"?V:u.status==="dirty"||t.value==="dirty"?Ye(u.value):u}}if(o.type==="refinement"){const l=u=>{const d=o.refinement(u,s);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?V:(u.status==="dirty"&&t.dirty(),l(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?V:(u.status==="dirty"&&t.dirty(),l(u.value).then(()=>({status:t.value,value:u.value}))))}if(o.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!De(l))return V;const u=o.transform(l.value,s);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>De(l)?Promise.resolve(o.transform(l.value,s)).then(u=>({status:t.value,value:u})):V);B.assertNever(o)}}Fe.create=(i,e,t)=>new Fe({schema:i,typeName:L.ZodEffects,effect:e,...U(t)});Fe.createWithPreprocess=(i,e,t)=>new Fe({schema:e,effect:{type:"preprocess",transform:i},typeName:L.ZodEffects,...U(t)});class pe extends ${_parse(e){return this._getType(e)===M.undefined?ee(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pe.create=(i,e)=>new pe({innerType:i,typeName:L.ZodOptional,...U(e)});class Ue extends ${_parse(e){return this._getType(e)===M.null?ee(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ue.create=(i,e)=>new Ue({innerType:i,typeName:L.ZodNullable,...U(e)});class Yt extends ${_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===M.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Yt.create=(i,e)=>new Yt({innerType:i,typeName:L.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...U(e)});class Zt extends ${_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return mt(o)?o.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new le(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new le(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Zt.create=(i,e)=>new Zt({innerType:i,typeName:L.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...U(e)});class Bn extends ${_parse(e){if(this._getType(e)!==M.nan){const n=this._getOrReturnCtx(e);return S(n,{code:x.invalid_type,expected:M.nan,received:n.parsedType}),V}return{status:"valid",value:e.data}}}Bn.create=i=>new Bn({typeName:L.ZodNaN,...U(i)});class Is extends ${_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class yn extends ${_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?V:s.status==="dirty"?(t.dirty(),Ye(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?V:o.status==="dirty"?(t.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,t){return new yn({in:e,out:t,typeName:L.ZodPipeline})}}class Kt extends ${_parse(e){const t=this._def.innerType._parse(e),n=o=>(De(o)&&(o.value=Object.freeze(o.value)),o);return mt(t)?t.then(o=>n(o)):n(t)}unwrap(){return this._def.innerType}}Kt.create=(i,e)=>new Kt({innerType:i,typeName:L.ZodReadonly,...U(e)});var L;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(L||(L={}));const ve=ie.create,Gn=Ce.create;Te.create;const Ns=ht.create;Le.create;const Hn=zt.create;me.create;const Ze=oe.create,Rs=z.create,Ps=gt.create;yt.create;_e.create;const Ds=vt.create,Ls=Wt.create,Vs=Ve.create;xt.create;pe.create;Ue.create;const we={string:(i=>ie.create({...i,coerce:!0})),number:(i=>Ce.create({...i,coerce:!0})),boolean:(i=>ht.create({...i,coerce:!0})),bigint:(i=>Te.create({...i,coerce:!0})),date:(i=>Le.create({...i,coerce:!0}))};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Fs,Us;function qs(){return{geminiUrl:Fs,vertexUrl:Us}}function $s(i,e,t){var n,o,s;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const l=qs();return i.vertexai?(o=l.vertexUrl)!==null&&o!==void 0?o:e:(s=l.geminiUrl)!==null&&s!==void 0?s:t}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $e{}function D(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(i,e,t){for(let s=0;s<e.length-1;s++){const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in i))if(Array.isArray(t))i[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(i[u])){const d=i[u];if(Array.isArray(t))for(let c=0;c<d.length;c++){const f=d[c];a(f,e.slice(s+1),t[c])}else for(const c of d)a(c,e.slice(s+1),t)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in i||(i[u]=[{}]);const d=i[u];a(d[0],e.slice(s+1),t);return}(!i[l]||typeof i[l]!="object")&&(i[l]={}),i=i[l]}const n=e[e.length-1],o=i[n];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=t}function r(i,e){try{if(e.length===1&&e[0]==="_self")return i;for(let t=0;t<e.length;t++){if(typeof i!="object"||i===null)return;const n=e[t];if(n.endsWith("[]")){const o=n.slice(0,-2);if(o in i){const s=i[o];return Array.isArray(s)?s.map(l=>r(l,e.slice(t+1))):void 0}else return}else i=i[n]}return i}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var On;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(On||(On={}));var zn;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(zn||(zn={}));var j;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(j||(j={}));var Jn;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Jn||(Jn={}));var Wn;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Wn||(Wn={}));var Yn;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Yn||(Yn={}));var Zn;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Zn||(Zn={}));var Kn;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Kn||(Kn={}));var Xn;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Xn||(Xn={}));var Qn;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Qn||(Qn={}));var jn;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(jn||(jn={}));var ei;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(ei||(ei={}));var ti;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ti||(ti={}));var Ct;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Ct||(Ct={}));var ni;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ni||(ni={}));var Xt;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xt||(Xt={}));var ii;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ii||(ii={}));var oi;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(oi||(oi={}));var ri;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(ri||(ri={}));var si;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(si||(si={}));var ai;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(ai||(ai={}));var li;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(li||(li={}));var ui;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(ui||(ui={}));var ci;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(ci||(ci={}));var di;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(di||(di={}));var fi;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(fi||(fi={}));var pi;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(pi||(pi={}));var mi;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mi||(mi={}));var hi;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hi||(hi={}));var gi;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(gi||(gi={}));var yi;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(yi||(yi={}));var vi;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(vi||(vi={}));var xi;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xi||(xi={}));var Ci;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ci||(Ci={}));var Ti;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Ti||(Ti={}));var _i;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(_i||(_i={}));var ki;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(ki||(ki={}));var Si;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Si||(Si={}));var be;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(be||(be={}));class Oe{get text(){var e,t,n,o,s,l,u,d;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const m=[];for(const h of(d=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[g,y]of Object.entries(h))g!=="text"&&g!=="thought"&&(y!==null||y!==void 0)&&m.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,c+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,t,n,o,s,l,u,d;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const m of(d=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,g]of Object.entries(m))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,n,o,s,l,u,d;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(c?.length!==0)return c}get executableCode(){var e,t,n,o,s,l,u,d,c;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if(f?.length!==0)return(c=f?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,n,o,s,l,u,d,c;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if(f?.length!==0)return(c=f?.[0])===null||c===void 0?void 0:c.output}}class Ei{}class wi{}class Bs{}class Gs{}class Ai{}class Mi{}class bi{}class Hs{}class Ii{}class Ni{}class Ri{}class Os{}class Qt{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class zs{}class Js{}class Ws{get text(){var e,t,n;let o="",s=!1;const l=[];for(const u of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,o+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,t,n;let o="";const s=[];for(const l of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&s.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Ys{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Eo(i,e){const t=G(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function wo(i,e){return Array.isArray(e)?e.map(t=>Tt(i,t)):[Tt(i,e)]}function Tt(i,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Zs(i,e){const t=Tt(i,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Ks(i,e){const t=Tt(i,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Pi(i,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Ao(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Pi(i,t)):[Pi(i,e)]}function jt(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Di(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function Li(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function W(i,e){if(e==null)throw new Error("ContentUnion is required");return jt(e)?e:{role:"user",parts:Ao(i,e)}}function Mo(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=W(i,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=W(i,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>W(i,t)):[W(i,e)]}function ne(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Di(e)||Li(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[W(i,e)]}const t=[],n=[],o=jt(e[0]);for(const s of e){const l=jt(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(s);else{if(Di(s)||Li(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||t.push({role:"user",parts:Ao(i,n)}),t}const Xs=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Vi=Vs(["string","number","integer","object","array","boolean","null"]),Qs=Ps([Vi,Ze(Vi)]);function js(i=!0){const e=Ls(()=>{const t=Rs({type:Qs.optional(),format:ve().optional(),title:ve().optional(),description:ve().optional(),default:Hn().optional(),items:e.optional(),minItems:we.string().optional(),maxItems:we.string().optional(),enum:Ze(Hn()).optional(),properties:Ds(ve(),e).optional(),required:Ze(ve()).optional(),minProperties:we.string().optional(),maxProperties:we.string().optional(),propertyOrdering:Ze(ve()).optional(),minimum:Gn().optional(),maximum:Gn().optional(),minLength:we.string().optional(),maxLength:we.string().optional(),pattern:ve().optional(),anyOf:Ze(e).optional(),additionalProperties:Ns().optional()});return i?t.strict():t});return e}function ea(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.keys(j).includes(t[0].toUpperCase())?j[t[0].toUpperCase()]:j.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.keys(j).includes(n.toUpperCase())?j[n.toUpperCase()]:j.TYPE_UNSPECIFIED})}}function Ie(i){const e={},t=["items"],n=["anyOf"],o=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=i.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,i=s[1]):s[1].type==="null"&&(e.nullable=!0,i=s[0])),i.type instanceof Array&&ea(i.type,e);for(const[l,u]of Object.entries(i))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.keys(j).includes(u.toUpperCase())?u.toUpperCase():j.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=Ie(u);else if(n.includes(l)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Ie(c))}e[l]=d}else if(o.includes(l)){const d={};for(const[c,f]of Object.entries(u))d[c]=Ie(f);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=u}return e}function _t(i,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=js().parse(e);return Ie(t)}else return Ie(e)}function bo(i,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function vn(i,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function et(i,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=_t(i,t.parameters)),t.response&&(t.response=_t(i,t.response));return e}function tt(i,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function ta(i,e,t,n=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:o?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function he(i,e){if(typeof e!="string")throw new Error("name must be a string");return ta(i,e,"cachedContents")}function Io(i,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ge(i,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function na(i){return i!=null&&typeof i=="object"&&"name"in i}function ia(i){return i!=null&&typeof i=="object"&&"video"in i}function oa(i){return i!=null&&typeof i=="object"&&"uri"in i}function No(i,e){var t;let n;if(na(e)&&(n=e.name),!(oa(e)&&(n=e.uri,n===void 0))&&!(ia(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ro(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Po(i,e){for(const t of["models","tunedModels","publisherModels"])if(ra(e,t))return e[t];return[]}function ra(i,e){return i!==null&&typeof i=="object"&&e in i}function sa(i,e={}){const t=i,n={name:t.name,description:t.description,parameters:Ie(Et(t.inputSchema))};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function aa(i,e={}){const t=[],n=new Set;for(const o of i){const s=o.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);const l=sa(o,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function la(i){const e=[];for(const t of i)e.push(Et(t));return e}function ua(i){const e={};for(const[t,n]of Object.entries(i)){const o=n;e[t]=Et(o)}return e}function Et(i){const e=new Set(["items"]),t=new Set(["anyOf"]),n=new Set(["properties"]),o={};for(const[s,l]of Object.entries(i))if(e.has(s))o[s]=Et(l);else if(t.has(s))o[s]=la(l);else if(n.has(s))o[s]=ua(l);else if(s==="type"){const u=l.toUpperCase();o[s]=Object.keys(j).includes(u)?u:j.TYPE_UNSPECIFIED}else Xs.has(s)&&(o[s]=l);return o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ca(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function da(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&a(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function fa(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function pa(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],ca(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],da(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],fa(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Fi(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>pa(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function ma(i,e){const t={},n=r(e,["behavior"]);n!=null&&a(t,["behavior"],n);const o=r(e,["description"]);o!=null&&a(t,["description"],o);const s=r(e,["name"]);s!=null&&a(t,["name"],s);const l=r(e,["parameters"]);l!=null&&a(t,["parameters"],l);const u=r(e,["response"]);return u!=null&&a(t,["response"],u),t}function ha(i,e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function ga(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],ha(i,n)),t}function ya(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function va(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],ya(i,n)),t}function xa(){return{}}function Ca(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>ma(i,c))),a(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],ga(i,o));const s=r(e,["googleSearchRetrieval"]);if(s!=null&&a(t,["googleSearchRetrieval"],va(i,s)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&a(t,["urlContext"],xa());const u=r(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function Ta(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["allowedFunctionNames"]);return o!=null&&a(t,["allowedFunctionNames"],o),t}function _a(i,e){const t={},n=r(e,["latitude"]);n!=null&&a(t,["latitude"],n);const o=r(e,["longitude"]);return o!=null&&a(t,["longitude"],o),t}function ka(i,e){const t={},n=r(e,["latLng"]);n!=null&&a(t,["latLng"],_a(i,n));const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Sa(i,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],Ta(i,n));const o=r(e,["retrievalConfig"]);return o!=null&&a(t,["retrievalConfig"],ka(i,o)),t}function Ea(i,e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const s=r(e,["expireTime"]);t!==void 0&&s!=null&&a(t,["expireTime"],s);const l=r(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const u=r(e,["contents"]);if(t!==void 0&&u!=null){let m=ne(i,u);Array.isArray(m)&&(m=m.map(h=>Fi(i,h))),a(t,["contents"],m)}const d=r(e,["systemInstruction"]);t!==void 0&&d!=null&&a(t,["systemInstruction"],Fi(i,W(i,d)));const c=r(e,["tools"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>Ca(i,h))),a(t,["tools"],m)}const f=r(e,["toolConfig"]);if(t!==void 0&&f!=null&&a(t,["toolConfig"],Sa(i,f)),r(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function wa(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["model"],Eo(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],Ea(i,o,t)),t}function Aa(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],he(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function Ma(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],he(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function ba(i,e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const s=r(e,["expireTime"]);return t!==void 0&&s!=null&&a(t,["expireTime"],s),n}function Ia(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],he(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],ba(i,o,t)),t}function Na(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const s=r(e,["pageToken"]);return t!==void 0&&s!=null&&a(t,["_query","pageToken"],s),n}function Ra(i,e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],Na(i,n,t)),t}function Pa(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function Da(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["data"]);o!=null&&a(t,["data"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function La(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function Va(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Pa(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],Da(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],La(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Ui(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Va(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function Fa(i,e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&a(t,["description"],n);const o=r(e,["name"]);o!=null&&a(t,["name"],o);const s=r(e,["parameters"]);s!=null&&a(t,["parameters"],s);const l=r(e,["response"]);return l!=null&&a(t,["response"],l),t}function Ua(i,e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function qa(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],Ua(i,n)),t}function $a(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function Ba(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],$a(i,n)),t}function Ga(){return{}}function Ha(i,e){const t={},n=r(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function Oa(i,e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],Ha(i,n));const o=r(e,["authType"]);o!=null&&a(t,["authType"],o);const s=r(e,["googleServiceAccountConfig"]);s!=null&&a(t,["googleServiceAccountConfig"],s);const l=r(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const u=r(e,["oauthConfig"]);u!=null&&a(t,["oauthConfig"],u);const d=r(e,["oidcConfig"]);return d!=null&&a(t,["oidcConfig"],d),t}function za(i,e){const t={},n=r(e,["authConfig"]);return n!=null&&a(t,["authConfig"],Oa(i,n)),t}function Ja(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Fa(i,m))),a(t,["functionDeclarations"],f)}const o=r(e,["retrieval"]);o!=null&&a(t,["retrieval"],o);const s=r(e,["googleSearch"]);s!=null&&a(t,["googleSearch"],qa(i,s));const l=r(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],Ba(i,l)),r(e,["enterpriseWebSearch"])!=null&&a(t,["enterpriseWebSearch"],Ga());const d=r(e,["googleMaps"]);if(d!=null&&a(t,["googleMaps"],za(i,d)),r(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=r(e,["codeExecution"]);return c!=null&&a(t,["codeExecution"],c),t}function Wa(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["allowedFunctionNames"]);return o!=null&&a(t,["allowedFunctionNames"],o),t}function Ya(i,e){const t={},n=r(e,["latitude"]);n!=null&&a(t,["latitude"],n);const o=r(e,["longitude"]);return o!=null&&a(t,["longitude"],o),t}function Za(i,e){const t={},n=r(e,["latLng"]);n!=null&&a(t,["latLng"],Ya(i,n));const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Ka(i,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],Wa(i,n));const o=r(e,["retrievalConfig"]);return o!=null&&a(t,["retrievalConfig"],Za(i,o)),t}function Xa(i,e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const s=r(e,["expireTime"]);t!==void 0&&s!=null&&a(t,["expireTime"],s);const l=r(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const u=r(e,["contents"]);if(t!==void 0&&u!=null){let h=ne(i,u);Array.isArray(h)&&(h=h.map(g=>Ui(i,g))),a(t,["contents"],h)}const d=r(e,["systemInstruction"]);t!==void 0&&d!=null&&a(t,["systemInstruction"],Ui(i,W(i,d)));const c=r(e,["tools"]);if(t!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>Ja(i,g))),a(t,["tools"],h)}const f=r(e,["toolConfig"]);t!==void 0&&f!=null&&a(t,["toolConfig"],Ka(i,f));const m=r(e,["kmsKeyName"]);return t!==void 0&&m!=null&&a(t,["encryption_spec","kmsKeyName"],m),n}function Qa(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["model"],Eo(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],Xa(i,o,t)),t}function ja(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],he(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function el(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],he(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function tl(i,e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const s=r(e,["expireTime"]);return t!==void 0&&s!=null&&a(t,["expireTime"],s),n}function nl(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],he(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],tl(i,o,t)),t}function il(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const s=r(e,["pageToken"]);return t!==void 0&&s!=null&&a(t,["_query","pageToken"],s),n}function ol(i,e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],il(i,n,t)),t}function at(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["displayName"]);o!=null&&a(t,["displayName"],o);const s=r(e,["model"]);s!=null&&a(t,["model"],s);const l=r(e,["createTime"]);l!=null&&a(t,["createTime"],l);const u=r(e,["updateTime"]);u!=null&&a(t,["updateTime"],u);const d=r(e,["expireTime"]);d!=null&&a(t,["expireTime"],d);const c=r(e,["usageMetadata"]);return c!=null&&a(t,["usageMetadata"],c),t}function rl(){return{}}function sl(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=r(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>at(i,l))),a(t,["cachedContents"],s)}return t}function lt(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["displayName"]);o!=null&&a(t,["displayName"],o);const s=r(e,["model"]);s!=null&&a(t,["model"],s);const l=r(e,["createTime"]);l!=null&&a(t,["createTime"],l);const u=r(e,["updateTime"]);u!=null&&a(t,["updateTime"],u);const d=r(e,["expireTime"]);d!=null&&a(t,["expireTime"],d);const c=r(e,["usageMetadata"]);return c!=null&&a(t,["usageMetadata"],c),t}function al(){return{}}function ll(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=r(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>lt(i,l))),a(t,["cachedContents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qe;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(qe||(qe={}));class wt{constructor(e,t,n,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,o)}init(e,t,n){var o,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};n?typeof n=="object"?l=Object.assign({},n):l=n:l={config:{}},l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(s=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ul extends $e{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new wt(qe.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Qa(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>lt(this.apiClient,f))}else{const c=wa(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>at(this.apiClient,f))}}async get(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ja(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>lt(this.apiClient,f))}else{const c=Aa(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>at(this.apiClient,f))}}async delete(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=el(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(()=>{const f=al(),m=new Ni;return Object.assign(m,f),m})}else{const c=Ma(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(()=>{const f=rl(),m=new Ni;return Object.assign(m,f),m})}}async update(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=nl(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>lt(this.apiClient,f))}else{const c=Ia(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>at(this.apiClient,f))}}async listInternal(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ol(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const m=ll(this.apiClient,f),h=new Ri;return Object.assign(h,m),h})}else{const c=Ra(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>{const m=sl(this.apiClient,f),h=new Ri;return Object.assign(h,m),h})}}}function qi(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(i){return this instanceof H?(this.v=i,this):new H(i)}function Ne(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(g){return function(y){return Promise.resolve(y).then(g,m)}}function u(g,y){n[g]&&(o[g]=function(v){return new Promise(function(T,C){s.push([g,v,T,C])>1||d(g,v)})},y&&(o[g]=y(o[g])))}function d(g,y){try{c(n[g](y))}catch(v){h(s[0][3],v)}}function c(g){g.value instanceof H?Promise.resolve(g.value.v).then(f,m):h(s[0][2],g)}function f(g){d("next",g)}function m(g){d("throw",g)}function h(g,y){g(y),s.shift(),s.length&&d(s[0][0],s[0][1])}}function Ke(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof qi=="function"?qi(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(l){return new Promise(function(u,d){l=i[s](l),o(u,d,l.done,l.value)})}}function o(s,l,u,d){Promise.resolve(d).then(function(c){s({value:c,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cl(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Do(t)}function Do(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function dl(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function $i(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const o=[];let s=!0;for(;n<t&&i[n].role==="model";)o.push(i[n]),s&&!Do(i[n])&&(s=!1),n++;s?e.push(...o):e.pop()}return e}class fl{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new pl(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class pl{constructor(e,t,n,o={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),dl(s)}async sendMessage(e){var t;await this.sendPromise;const n=W(this.apiClient,e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var s,l,u;const d=await o,c=(l=(s=d.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content,f=d.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];f!=null&&(h=(u=f.slice(m))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(n,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const n=W(this.apiClient,e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,n)}getHistory(e=!1){const t=e?$i(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,o;return Ne(this,arguments,function*(){var l,u,d,c;const f=[];try{for(var m=!0,h=Ke(e),g;g=yield H(h.next()),l=g.done,!l;m=!0){c=g.value,m=!1;const y=c;if(cl(y)){const v=(o=(n=y.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content;v!==void 0&&f.push(v)}yield yield H(y)}}catch(y){u={error:y}}finally{try{!m&&!l&&(d=h.return)&&(yield H(d.call(h)))}finally{if(u)throw u.error}}this.recordHistory(t,f)})}recordHistory(e,t,n){let o=[];t.length>0&&t.every(s=>s.role!==void 0)?o=t:o.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...$i(n)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ml(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const s=r(e,["pageToken"]);return t!==void 0&&s!=null&&a(t,["_query","pageToken"],s),n}function hl(i,e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],ml(i,n,t)),t}function gl(i,e){const t={},n=r(e,["details"]);n!=null&&a(t,["details"],n);const o=r(e,["message"]);o!=null&&a(t,["message"],o);const s=r(e,["code"]);return s!=null&&a(t,["code"],s),t}function yl(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["displayName"]);o!=null&&a(t,["displayName"],o);const s=r(e,["mimeType"]);s!=null&&a(t,["mimeType"],s);const l=r(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const u=r(e,["createTime"]);u!=null&&a(t,["createTime"],u);const d=r(e,["expirationTime"]);d!=null&&a(t,["expirationTime"],d);const c=r(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const f=r(e,["sha256Hash"]);f!=null&&a(t,["sha256Hash"],f);const m=r(e,["uri"]);m!=null&&a(t,["uri"],m);const h=r(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const g=r(e,["state"]);g!=null&&a(t,["state"],g);const y=r(e,["source"]);y!=null&&a(t,["source"],y);const v=r(e,["videoMetadata"]);v!=null&&a(t,["videoMetadata"],v);const T=r(e,["error"]);return T!=null&&a(t,["error"],gl(i,T)),t}function vl(i,e){const t={},n=r(e,["file"]);n!=null&&a(t,["file"],yl(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function xl(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","file"],No(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function Cl(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","file"],No(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function Tl(i,e){const t={},n=r(e,["details"]);n!=null&&a(t,["details"],n);const o=r(e,["message"]);o!=null&&a(t,["message"],o);const s=r(e,["code"]);return s!=null&&a(t,["code"],s),t}function en(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["displayName"]);o!=null&&a(t,["displayName"],o);const s=r(e,["mimeType"]);s!=null&&a(t,["mimeType"],s);const l=r(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const u=r(e,["createTime"]);u!=null&&a(t,["createTime"],u);const d=r(e,["expirationTime"]);d!=null&&a(t,["expirationTime"],d);const c=r(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const f=r(e,["sha256Hash"]);f!=null&&a(t,["sha256Hash"],f);const m=r(e,["uri"]);m!=null&&a(t,["uri"],m);const h=r(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const g=r(e,["state"]);g!=null&&a(t,["state"],g);const y=r(e,["source"]);y!=null&&a(t,["source"],y);const v=r(e,["videoMetadata"]);v!=null&&a(t,["videoMetadata"],v);const T=r(e,["error"]);return T!=null&&a(t,["error"],Tl(i,T)),t}function _l(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=r(e,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>en(i,l))),a(t,["files"],s)}return t}function kl(){return{}}function Sl(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class El extends $e{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new wt(qe.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>en(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hl(this.apiClient,e);return s=D("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=_l(this.apiClient,d),f=new Os;return Object.assign(f,c),f})}}async createInternal(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vl(this.apiClient,e);return s=D("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(()=>{const d=kl(),c=new zs;return Object.assign(c,d),c})}}async get(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xl(this.apiClient,e);return s=D("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>en(this.apiClient,d))}}async delete(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Cl(this.apiClient,e);return s=D("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(()=>{const d=Sl(),c=new Js;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wl(i,e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Al(i,e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Lo(i,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],wl(i,n)),t}function Ml(i,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],Al(i,n)),t}function bl(i,e){const t={},n=r(e,["speaker"]);n!=null&&a(t,["speaker"],n);const o=r(e,["voiceConfig"]);return o!=null&&a(t,["voiceConfig"],Lo(i,o)),t}function Il(i,e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>bl(i,s))),a(t,["speakerVoiceConfigs"],o)}return t}function Nl(i,e){const t={},n=r(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],Lo(i,n));const o=r(e,["multiSpeakerVoiceConfig"]);o!=null&&a(t,["multiSpeakerVoiceConfig"],Il(i,o));const s=r(e,["languageCode"]);return s!=null&&a(t,["languageCode"],s),t}function Rl(i,e){const t={},n=r(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],Ml(i,n)),r(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Pl(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function Dl(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function Ll(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&a(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Vl(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["data"]);o!=null&&a(t,["data"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function Fl(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Ul(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function ql(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Pl(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],Ll(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Fl(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function $l(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Dl(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],Vl(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Ul(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Bl(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>ql(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function Gl(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>$l(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function Hl(i,e){const t={},n=r(e,["behavior"]);n!=null&&a(t,["behavior"],n);const o=r(e,["description"]);o!=null&&a(t,["description"],o);const s=r(e,["name"]);s!=null&&a(t,["name"],s);const l=r(e,["parameters"]);l!=null&&a(t,["parameters"],l);const u=r(e,["response"]);return u!=null&&a(t,["response"],u),t}function Ol(i,e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&a(t,["description"],n);const o=r(e,["name"]);o!=null&&a(t,["name"],o);const s=r(e,["parameters"]);s!=null&&a(t,["parameters"],s);const l=r(e,["response"]);return l!=null&&a(t,["response"],l),t}function zl(i,e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function Jl(i,e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function Wl(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],zl(i,n)),t}function Yl(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],Jl(i,n)),t}function Zl(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function Kl(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function Xl(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Zl(i,n)),t}function Ql(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Kl(i,n)),t}function jl(){return{}}function eu(i,e){const t={},n=r(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function tu(i,e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],eu(i,n));const o=r(e,["authType"]);o!=null&&a(t,["authType"],o);const s=r(e,["googleServiceAccountConfig"]);s!=null&&a(t,["googleServiceAccountConfig"],s);const l=r(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const u=r(e,["oauthConfig"]);u!=null&&a(t,["oauthConfig"],u);const d=r(e,["oidcConfig"]);return d!=null&&a(t,["oidcConfig"],d),t}function nu(i,e){const t={},n=r(e,["authConfig"]);return n!=null&&a(t,["authConfig"],tu(i,n)),t}function iu(){return{}}function ou(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Hl(i,c))),a(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],Wl(i,o));const s=r(e,["googleSearchRetrieval"]);if(s!=null&&a(t,["googleSearchRetrieval"],Xl(i,s)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&a(t,["urlContext"],iu());const u=r(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function ru(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Ol(i,m))),a(t,["functionDeclarations"],f)}const o=r(e,["retrieval"]);o!=null&&a(t,["retrieval"],o);const s=r(e,["googleSearch"]);s!=null&&a(t,["googleSearch"],Yl(i,s));const l=r(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],Ql(i,l)),r(e,["enterpriseWebSearch"])!=null&&a(t,["enterpriseWebSearch"],jl());const d=r(e,["googleMaps"]);if(d!=null&&a(t,["googleMaps"],nu(i,d)),r(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=r(e,["codeExecution"]);return c!=null&&a(t,["codeExecution"],c),t}function su(i,e){const t={},n=r(e,["handle"]);if(n!=null&&a(t,["handle"],n),r(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function au(i,e){const t={},n=r(e,["handle"]);n!=null&&a(t,["handle"],n);const o=r(e,["transparent"]);return o!=null&&a(t,["transparent"],o),t}function Bi(){return{}}function Gi(){return{}}function lu(i,e){const t={},n=r(e,["disabled"]);n!=null&&a(t,["disabled"],n);const o=r(e,["startOfSpeechSensitivity"]);o!=null&&a(t,["startOfSpeechSensitivity"],o);const s=r(e,["endOfSpeechSensitivity"]);s!=null&&a(t,["endOfSpeechSensitivity"],s);const l=r(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const u=r(e,["silenceDurationMs"]);return u!=null&&a(t,["silenceDurationMs"],u),t}function uu(i,e){const t={},n=r(e,["disabled"]);n!=null&&a(t,["disabled"],n);const o=r(e,["startOfSpeechSensitivity"]);o!=null&&a(t,["startOfSpeechSensitivity"],o);const s=r(e,["endOfSpeechSensitivity"]);s!=null&&a(t,["endOfSpeechSensitivity"],s);const l=r(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const u=r(e,["silenceDurationMs"]);return u!=null&&a(t,["silenceDurationMs"],u),t}function cu(i,e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],lu(i,n));const o=r(e,["activityHandling"]);o!=null&&a(t,["activityHandling"],o);const s=r(e,["turnCoverage"]);return s!=null&&a(t,["turnCoverage"],s),t}function du(i,e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],uu(i,n));const o=r(e,["activityHandling"]);o!=null&&a(t,["activityHandling"],o);const s=r(e,["turnCoverage"]);return s!=null&&a(t,["turnCoverage"],s),t}function fu(i,e){const t={},n=r(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function pu(i,e){const t={},n=r(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function mu(i,e){const t={},n=r(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const o=r(e,["slidingWindow"]);return o!=null&&a(t,["slidingWindow"],fu(i,o)),t}function hu(i,e){const t={},n=r(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const o=r(e,["slidingWindow"]);return o!=null&&a(t,["slidingWindow"],pu(i,o)),t}function gu(i,e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function yu(i,e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function vu(i,e,t){const n={},o=r(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const s=r(e,["responseModalities"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","responseModalities"],s);const l=r(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const u=r(e,["topP"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topP"],u);const d=r(e,["topK"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","topK"],d);const c=r(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const f=r(e,["mediaResolution"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","mediaResolution"],f);const m=r(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=r(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],Nl(i,vn(i,h)));const g=r(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=r(e,["systemInstruction"]);t!==void 0&&y!=null&&a(t,["setup","systemInstruction"],Bl(i,W(i,y)));const v=r(e,["tools"]);if(t!==void 0&&v!=null){let E=tt(i,v);Array.isArray(E)&&(E=E.map(R=>ou(i,et(i,R)))),a(t,["setup","tools"],E)}const T=r(e,["sessionResumption"]);t!==void 0&&T!=null&&a(t,["setup","sessionResumption"],su(i,T));const C=r(e,["inputAudioTranscription"]);t!==void 0&&C!=null&&a(t,["setup","inputAudioTranscription"],Bi());const k=r(e,["outputAudioTranscription"]);t!==void 0&&k!=null&&a(t,["setup","outputAudioTranscription"],Bi());const w=r(e,["realtimeInputConfig"]);t!==void 0&&w!=null&&a(t,["setup","realtimeInputConfig"],cu(i,w));const A=r(e,["contextWindowCompression"]);t!==void 0&&A!=null&&a(t,["setup","contextWindowCompression"],mu(i,A));const P=r(e,["proactivity"]);return t!==void 0&&P!=null&&a(t,["setup","proactivity"],gu(i,P)),n}function xu(i,e,t){const n={},o=r(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const s=r(e,["responseModalities"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","responseModalities"],s);const l=r(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const u=r(e,["topP"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topP"],u);const d=r(e,["topK"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","topK"],d);const c=r(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const f=r(e,["mediaResolution"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","mediaResolution"],f);const m=r(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=r(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],Rl(i,vn(i,h)));const g=r(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=r(e,["systemInstruction"]);t!==void 0&&y!=null&&a(t,["setup","systemInstruction"],Gl(i,W(i,y)));const v=r(e,["tools"]);if(t!==void 0&&v!=null){let E=tt(i,v);Array.isArray(E)&&(E=E.map(R=>ru(i,et(i,R)))),a(t,["setup","tools"],E)}const T=r(e,["sessionResumption"]);t!==void 0&&T!=null&&a(t,["setup","sessionResumption"],au(i,T));const C=r(e,["inputAudioTranscription"]);t!==void 0&&C!=null&&a(t,["setup","inputAudioTranscription"],Gi());const k=r(e,["outputAudioTranscription"]);t!==void 0&&k!=null&&a(t,["setup","outputAudioTranscription"],Gi());const w=r(e,["realtimeInputConfig"]);t!==void 0&&w!=null&&a(t,["setup","realtimeInputConfig"],du(i,w));const A=r(e,["contextWindowCompression"]);t!==void 0&&A!=null&&a(t,["setup","contextWindowCompression"],hu(i,A));const P=r(e,["proactivity"]);return t!==void 0&&P!=null&&a(t,["setup","proactivity"],yu(i,P)),n}function Cu(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["setup","model"],G(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],vu(i,o,t)),t}function Tu(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["setup","model"],G(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],xu(i,o,t)),t}function _u(){return{}}function ku(){return{}}function Su(){return{}}function Eu(){return{}}function wu(i,e){const t={},n=r(e,["media"]);n!=null&&a(t,["mediaChunks"],wo(i,n));const o=r(e,["audio"]);o!=null&&a(t,["audio"],Ks(i,o));const s=r(e,["audioStreamEnd"]);s!=null&&a(t,["audioStreamEnd"],s);const l=r(e,["video"]);l!=null&&a(t,["video"],Zs(i,l));const u=r(e,["text"]);return u!=null&&a(t,["text"],u),r(e,["activityStart"])!=null&&a(t,["activityStart"],_u()),r(e,["activityEnd"])!=null&&a(t,["activityEnd"],Su()),t}function Au(i,e){const t={},n=r(e,["media"]);if(n!=null&&a(t,["mediaChunks"],wo(i,n)),r(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=r(e,["audioStreamEnd"]);if(o!=null&&a(t,["audioStreamEnd"],o),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(r(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return r(e,["activityStart"])!=null&&a(t,["activityStart"],ku()),r(e,["activityEnd"])!=null&&a(t,["activityEnd"],Eu()),t}function Vo(i,e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const o=r(e,["weight"]);return o!=null&&a(t,["weight"],o),t}function Mu(i,e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Vo(i,s))),a(t,["weightedPrompts"],o)}return t}function Fo(i,e){const t={},n=r(e,["temperature"]);n!=null&&a(t,["temperature"],n);const o=r(e,["topK"]);o!=null&&a(t,["topK"],o);const s=r(e,["seed"]);s!=null&&a(t,["seed"],s);const l=r(e,["guidance"]);l!=null&&a(t,["guidance"],l);const u=r(e,["bpm"]);u!=null&&a(t,["bpm"],u);const d=r(e,["density"]);d!=null&&a(t,["density"],d);const c=r(e,["brightness"]);c!=null&&a(t,["brightness"],c);const f=r(e,["scale"]);f!=null&&a(t,["scale"],f);const m=r(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const h=r(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const g=r(e,["onlyBassAndDrums"]);return g!=null&&a(t,["onlyBassAndDrums"],g),t}function bu(i,e){const t={},n=r(e,["musicGenerationConfig"]);return n!=null&&a(t,["musicGenerationConfig"],Fo(i,n)),t}function Uo(i,e){const t={},n=r(e,["model"]);return n!=null&&a(t,["model"],n),t}function qo(i,e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Vo(i,s))),a(t,["weightedPrompts"],o)}return t}function tn(i,e){const t={},n=r(e,["setup"]);n!=null&&a(t,["setup"],Uo(i,n));const o=r(e,["clientContent"]);o!=null&&a(t,["clientContent"],qo(i,o));const s=r(e,["musicGenerationConfig"]);s!=null&&a(t,["musicGenerationConfig"],Fo(i,s));const l=r(e,["playbackControl"]);return l!=null&&a(t,["playbackControl"],l),t}function Iu(){return{}}function Nu(){return{}}function Ru(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function Pu(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function Du(i,e){const t={},n=r(e,["data"]);n!=null&&a(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Lu(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["data"]);o!=null&&a(t,["data"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function Vu(i,e){const t={},n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Fu(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function Uu(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Ru(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],Du(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Vu(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function qu(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Pu(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],Lu(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Fu(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function $u(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Uu(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function Bu(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>qu(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function Hi(i,e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const o=r(e,["finished"]);return o!=null&&a(t,["finished"],o),t}function Oi(i,e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const o=r(e,["finished"]);return o!=null&&a(t,["finished"],o),t}function Gu(i,e){const t={},n=r(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const o=r(e,["urlRetrievalStatus"]);return o!=null&&a(t,["urlRetrievalStatus"],o),t}function Hu(i,e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Gu(i,s))),a(t,["urlMetadata"],o)}return t}function Ou(i,e){const t={},n=r(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],$u(i,n));const o=r(e,["turnComplete"]);o!=null&&a(t,["turnComplete"],o);const s=r(e,["interrupted"]);s!=null&&a(t,["interrupted"],s);const l=r(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const u=r(e,["generationComplete"]);u!=null&&a(t,["generationComplete"],u);const d=r(e,["inputTranscription"]);d!=null&&a(t,["inputTranscription"],Hi(i,d));const c=r(e,["outputTranscription"]);c!=null&&a(t,["outputTranscription"],Hi(i,c));const f=r(e,["urlContextMetadata"]);return f!=null&&a(t,["urlContextMetadata"],Hu(i,f)),t}function zu(i,e){const t={},n=r(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],Bu(i,n));const o=r(e,["turnComplete"]);o!=null&&a(t,["turnComplete"],o);const s=r(e,["interrupted"]);s!=null&&a(t,["interrupted"],s);const l=r(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const u=r(e,["generationComplete"]);u!=null&&a(t,["generationComplete"],u);const d=r(e,["inputTranscription"]);d!=null&&a(t,["inputTranscription"],Oi(i,d));const c=r(e,["outputTranscription"]);return c!=null&&a(t,["outputTranscription"],Oi(i,c)),t}function Ju(i,e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const o=r(e,["args"]);o!=null&&a(t,["args"],o);const s=r(e,["name"]);return s!=null&&a(t,["name"],s),t}function Wu(i,e){const t={},n=r(e,["args"]);n!=null&&a(t,["args"],n);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function Yu(i,e){const t={},n=r(e,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ju(i,s))),a(t,["functionCalls"],o)}return t}function Zu(i,e){const t={},n=r(e,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Wu(i,s))),a(t,["functionCalls"],o)}return t}function Ku(i,e){const t={},n=r(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function Xu(i,e){const t={},n=r(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function it(i,e){const t={},n=r(e,["modality"]);n!=null&&a(t,["modality"],n);const o=r(e,["tokenCount"]);return o!=null&&a(t,["tokenCount"],o),t}function ot(i,e){const t={},n=r(e,["modality"]);n!=null&&a(t,["modality"],n);const o=r(e,["tokenCount"]);return o!=null&&a(t,["tokenCount"],o),t}function Qu(i,e){const t={},n=r(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const o=r(e,["cachedContentTokenCount"]);o!=null&&a(t,["cachedContentTokenCount"],o);const s=r(e,["responseTokenCount"]);s!=null&&a(t,["responseTokenCount"],s);const l=r(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const u=r(e,["thoughtsTokenCount"]);u!=null&&a(t,["thoughtsTokenCount"],u);const d=r(e,["totalTokenCount"]);d!=null&&a(t,["totalTokenCount"],d);const c=r(e,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>it(i,y))),a(t,["promptTokensDetails"],g)}const f=r(e,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>it(i,y))),a(t,["cacheTokensDetails"],g)}const m=r(e,["responseTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>it(i,y))),a(t,["responseTokensDetails"],g)}const h=r(e,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>it(i,y))),a(t,["toolUsePromptTokensDetails"],g)}return t}function ju(i,e){const t={},n=r(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const o=r(e,["cachedContentTokenCount"]);o!=null&&a(t,["cachedContentTokenCount"],o);const s=r(e,["candidatesTokenCount"]);s!=null&&a(t,["responseTokenCount"],s);const l=r(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const u=r(e,["thoughtsTokenCount"]);u!=null&&a(t,["thoughtsTokenCount"],u);const d=r(e,["totalTokenCount"]);d!=null&&a(t,["totalTokenCount"],d);const c=r(e,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(v=>ot(i,v))),a(t,["promptTokensDetails"],y)}const f=r(e,["cacheTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(v=>ot(i,v))),a(t,["cacheTokensDetails"],y)}const m=r(e,["candidatesTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>ot(i,v))),a(t,["responseTokensDetails"],y)}const h=r(e,["toolUsePromptTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(v=>ot(i,v))),a(t,["toolUsePromptTokensDetails"],y)}const g=r(e,["trafficType"]);return g!=null&&a(t,["trafficType"],g),t}function ec(i,e){const t={},n=r(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function tc(i,e){const t={},n=r(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function nc(i,e){const t={},n=r(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const o=r(e,["resumable"]);o!=null&&a(t,["resumable"],o);const s=r(e,["lastConsumedClientMessageIndex"]);return s!=null&&a(t,["lastConsumedClientMessageIndex"],s),t}function ic(i,e){const t={},n=r(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const o=r(e,["resumable"]);o!=null&&a(t,["resumable"],o);const s=r(e,["lastConsumedClientMessageIndex"]);return s!=null&&a(t,["lastConsumedClientMessageIndex"],s),t}function oc(i,e){const t={};r(e,["setupComplete"])!=null&&a(t,["setupComplete"],Iu());const o=r(e,["serverContent"]);o!=null&&a(t,["serverContent"],Ou(i,o));const s=r(e,["toolCall"]);s!=null&&a(t,["toolCall"],Yu(i,s));const l=r(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],Ku(i,l));const u=r(e,["usageMetadata"]);u!=null&&a(t,["usageMetadata"],Qu(i,u));const d=r(e,["goAway"]);d!=null&&a(t,["goAway"],ec(i,d));const c=r(e,["sessionResumptionUpdate"]);return c!=null&&a(t,["sessionResumptionUpdate"],nc(i,c)),t}function rc(i,e){const t={};r(e,["setupComplete"])!=null&&a(t,["setupComplete"],Nu());const o=r(e,["serverContent"]);o!=null&&a(t,["serverContent"],zu(i,o));const s=r(e,["toolCall"]);s!=null&&a(t,["toolCall"],Zu(i,s));const l=r(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],Xu(i,l));const u=r(e,["usageMetadata"]);u!=null&&a(t,["usageMetadata"],ju(i,u));const d=r(e,["goAway"]);d!=null&&a(t,["goAway"],tc(i,d));const c=r(e,["sessionResumptionUpdate"]);return c!=null&&a(t,["sessionResumptionUpdate"],ic(i,c)),t}function sc(){return{}}function ac(i,e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const o=r(e,["weight"]);return o!=null&&a(t,["weight"],o),t}function lc(i,e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ac(i,s))),a(t,["weightedPrompts"],o)}return t}function uc(i,e){const t={},n=r(e,["temperature"]);n!=null&&a(t,["temperature"],n);const o=r(e,["topK"]);o!=null&&a(t,["topK"],o);const s=r(e,["seed"]);s!=null&&a(t,["seed"],s);const l=r(e,["guidance"]);l!=null&&a(t,["guidance"],l);const u=r(e,["bpm"]);u!=null&&a(t,["bpm"],u);const d=r(e,["density"]);d!=null&&a(t,["density"],d);const c=r(e,["brightness"]);c!=null&&a(t,["brightness"],c);const f=r(e,["scale"]);f!=null&&a(t,["scale"],f);const m=r(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const h=r(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const g=r(e,["onlyBassAndDrums"]);return g!=null&&a(t,["onlyBassAndDrums"],g),t}function cc(i,e){const t={},n=r(e,["clientContent"]);n!=null&&a(t,["clientContent"],lc(i,n));const o=r(e,["musicGenerationConfig"]);return o!=null&&a(t,["musicGenerationConfig"],uc(i,o)),t}function dc(i,e){const t={},n=r(e,["data"]);n!=null&&a(t,["data"],n);const o=r(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const s=r(e,["sourceMetadata"]);return s!=null&&a(t,["sourceMetadata"],cc(i,s)),t}function fc(i,e){const t={},n=r(e,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>dc(i,s))),a(t,["audioChunks"],o)}return t}function pc(i,e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const o=r(e,["filteredReason"]);return o!=null&&a(t,["filteredReason"],o),t}function mc(i,e){const t={};r(e,["setupComplete"])!=null&&a(t,["setupComplete"],sc());const o=r(e,["serverContent"]);o!=null&&a(t,["serverContent"],fc(i,o));const s=r(e,["filteredPrompt"]);return s!=null&&a(t,["filteredPrompt"],pc(i,s)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hc(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function gc(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&a(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function yc(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function vc(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],hc(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],gc(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],yc(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function At(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>vc(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function xc(i,e){const t={},n=r(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const o=r(e,["default"]);o!=null&&a(t,["default"],o);const s=r(e,["description"]);s!=null&&a(t,["description"],s);const l=r(e,["enum"]);l!=null&&a(t,["enum"],l);const u=r(e,["example"]);u!=null&&a(t,["example"],u);const d=r(e,["format"]);d!=null&&a(t,["format"],d);const c=r(e,["items"]);c!=null&&a(t,["items"],c);const f=r(e,["maxItems"]);f!=null&&a(t,["maxItems"],f);const m=r(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=r(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const g=r(e,["maximum"]);g!=null&&a(t,["maximum"],g);const y=r(e,["minItems"]);y!=null&&a(t,["minItems"],y);const v=r(e,["minLength"]);v!=null&&a(t,["minLength"],v);const T=r(e,["minProperties"]);T!=null&&a(t,["minProperties"],T);const C=r(e,["minimum"]);C!=null&&a(t,["minimum"],C);const k=r(e,["nullable"]);k!=null&&a(t,["nullable"],k);const w=r(e,["pattern"]);w!=null&&a(t,["pattern"],w);const A=r(e,["properties"]);A!=null&&a(t,["properties"],A);const P=r(e,["propertyOrdering"]);P!=null&&a(t,["propertyOrdering"],P);const E=r(e,["required"]);E!=null&&a(t,["required"],E);const R=r(e,["title"]);R!=null&&a(t,["title"],R);const q=r(e,["type"]);return q!=null&&a(t,["type"],q),t}function Cc(i,e){const t={};if(r(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(e,["category"]);n!=null&&a(t,["category"],n);const o=r(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function Tc(i,e){const t={},n=r(e,["behavior"]);n!=null&&a(t,["behavior"],n);const o=r(e,["description"]);o!=null&&a(t,["description"],o);const s=r(e,["name"]);s!=null&&a(t,["name"],s);const l=r(e,["parameters"]);l!=null&&a(t,["parameters"],l);const u=r(e,["response"]);return u!=null&&a(t,["response"],u),t}function _c(i,e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function kc(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],_c(i,n)),t}function Sc(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function Ec(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Sc(i,n)),t}function wc(){return{}}function Ac(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Tc(i,c))),a(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],kc(i,o));const s=r(e,["googleSearchRetrieval"]);if(s!=null&&a(t,["googleSearchRetrieval"],Ec(i,s)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&a(t,["urlContext"],wc());const u=r(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function Mc(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["allowedFunctionNames"]);return o!=null&&a(t,["allowedFunctionNames"],o),t}function bc(i,e){const t={},n=r(e,["latitude"]);n!=null&&a(t,["latitude"],n);const o=r(e,["longitude"]);return o!=null&&a(t,["longitude"],o),t}function Ic(i,e){const t={},n=r(e,["latLng"]);n!=null&&a(t,["latLng"],bc(i,n));const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Nc(i,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],Mc(i,n));const o=r(e,["retrievalConfig"]);return o!=null&&a(t,["retrievalConfig"],Ic(i,o)),t}function Rc(i,e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function $o(i,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],Rc(i,n)),t}function Pc(i,e){const t={},n=r(e,["speaker"]);n!=null&&a(t,["speaker"],n);const o=r(e,["voiceConfig"]);return o!=null&&a(t,["voiceConfig"],$o(i,o)),t}function Dc(i,e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Pc(i,s))),a(t,["speakerVoiceConfigs"],o)}return t}function Lc(i,e){const t={},n=r(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],$o(i,n));const o=r(e,["multiSpeakerVoiceConfig"]);o!=null&&a(t,["multiSpeakerVoiceConfig"],Dc(i,o));const s=r(e,["languageCode"]);return s!=null&&a(t,["languageCode"],s),t}function Vc(i,e){const t={},n=r(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const o=r(e,["thinkingBudget"]);return o!=null&&a(t,["thinkingBudget"],o),t}function Fc(i,e,t){const n={},o=r(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],At(i,W(i,o)));const s=r(e,["temperature"]);s!=null&&a(n,["temperature"],s);const l=r(e,["topP"]);l!=null&&a(n,["topP"],l);const u=r(e,["topK"]);u!=null&&a(n,["topK"],u);const d=r(e,["candidateCount"]);d!=null&&a(n,["candidateCount"],d);const c=r(e,["maxOutputTokens"]);c!=null&&a(n,["maxOutputTokens"],c);const f=r(e,["stopSequences"]);f!=null&&a(n,["stopSequences"],f);const m=r(e,["responseLogprobs"]);m!=null&&a(n,["responseLogprobs"],m);const h=r(e,["logprobs"]);h!=null&&a(n,["logprobs"],h);const g=r(e,["presencePenalty"]);g!=null&&a(n,["presencePenalty"],g);const y=r(e,["frequencyPenalty"]);y!=null&&a(n,["frequencyPenalty"],y);const v=r(e,["seed"]);v!=null&&a(n,["seed"],v);const T=r(e,["responseMimeType"]);T!=null&&a(n,["responseMimeType"],T);const C=r(e,["responseSchema"]);if(C!=null&&a(n,["responseSchema"],xc(i,_t(i,C))),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=r(e,["safetySettings"]);if(t!==void 0&&k!=null){let F=k;Array.isArray(F)&&(F=F.map(J=>Cc(i,J))),a(t,["safetySettings"],F)}const w=r(e,["tools"]);if(t!==void 0&&w!=null){let F=tt(i,w);Array.isArray(F)&&(F=F.map(J=>Ac(i,et(i,J)))),a(t,["tools"],F)}const A=r(e,["toolConfig"]);if(t!==void 0&&A!=null&&a(t,["toolConfig"],Nc(i,A)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=r(e,["cachedContent"]);t!==void 0&&P!=null&&a(t,["cachedContent"],he(i,P));const E=r(e,["responseModalities"]);E!=null&&a(n,["responseModalities"],E);const R=r(e,["mediaResolution"]);R!=null&&a(n,["mediaResolution"],R);const q=r(e,["speechConfig"]);if(q!=null&&a(n,["speechConfig"],Lc(i,bo(i,q))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=r(e,["thinkingConfig"]);return I!=null&&a(n,["thinkingConfig"],Vc(i,I)),n}function zi(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let l=ne(i,o);Array.isArray(l)&&(l=l.map(u=>At(i,u))),a(t,["contents"],l)}const s=r(e,["config"]);return s!=null&&a(t,["generationConfig"],Fc(i,s,t)),t}function Uc(i,e,t){const n={},o=r(e,["taskType"]);t!==void 0&&o!=null&&a(t,["requests[]","taskType"],o);const s=r(e,["title"]);t!==void 0&&s!=null&&a(t,["requests[]","title"],s);const l=r(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&a(t,["requests[]","outputDimensionality"],l),r(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function qc(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["contents"]);o!=null&&a(t,["requests[]","content"],Mo(i,o));const s=r(e,["config"]);s!=null&&a(t,["config"],Uc(i,s,t));const l=r(e,["model"]);return l!==void 0&&a(t,["requests[]","model"],G(i,l)),t}function $c(i,e,t){const n={};if(r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=r(e,["numberOfImages"]);t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o);const s=r(e,["aspectRatio"]);t!==void 0&&s!=null&&a(t,["parameters","aspectRatio"],s);const l=r(e,["guidanceScale"]);if(t!==void 0&&l!=null&&a(t,["parameters","guidanceScale"],l),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=r(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);const d=r(e,["personGeneration"]);t!==void 0&&d!=null&&a(t,["parameters","personGeneration"],d);const c=r(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&a(t,["parameters","includeSafetyAttributes"],c);const f=r(e,["includeRaiReason"]);t!==void 0&&f!=null&&a(t,["parameters","includeRaiReason"],f);const m=r(e,["language"]);t!==void 0&&m!=null&&a(t,["parameters","language"],m);const h=r(e,["outputMimeType"]);t!==void 0&&h!=null&&a(t,["parameters","outputOptions","mimeType"],h);const g=r(e,["outputCompressionQuality"]);if(t!==void 0&&g!=null&&a(t,["parameters","outputOptions","compressionQuality"],g),r(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Bc(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const s=r(e,["config"]);return s!=null&&a(t,["config"],$c(i,s,t)),t}function Gc(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function Hc(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const s=r(e,["pageToken"]);t!==void 0&&s!=null&&a(t,["_query","pageToken"],s);const l=r(e,["filter"]);t!==void 0&&l!=null&&a(t,["_query","filter"],l);const u=r(e,["queryBase"]);return t!==void 0&&u!=null&&a(t,["_url","models_url"],Ro(i,u)),n}function Oc(i,e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],Hc(i,n,t)),t}function zc(i,e,t){const n={},o=r(e,["displayName"]);t!==void 0&&o!=null&&a(t,["displayName"],o);const s=r(e,["description"]);t!==void 0&&s!=null&&a(t,["description"],s);const l=r(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function Jc(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],zc(i,o,t)),t}function Wc(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function Yc(i,e){const t={};if(r(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Zc(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let l=ne(i,o);Array.isArray(l)&&(l=l.map(u=>At(i,u))),a(t,["contents"],l)}const s=r(e,["config"]);return s!=null&&a(t,["config"],Yc(i,s)),t}function Kc(i,e){const t={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(e,["imageBytes"]);n!=null&&a(t,["bytesBase64Encoded"],ge(i,n));const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Xc(i,e,t){const n={},o=r(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o),r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=r(e,["durationSeconds"]);if(t!==void 0&&s!=null&&a(t,["parameters","durationSeconds"],s),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=r(e,["aspectRatio"]);if(t!==void 0&&l!=null&&a(t,["parameters","aspectRatio"],l),r(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=r(e,["personGeneration"]);if(t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u),r(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=r(e,["negativePrompt"]);if(t!==void 0&&d!=null&&a(t,["parameters","negativePrompt"],d),r(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(r(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return n}function Qc(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const s=r(e,["image"]);s!=null&&a(t,["instances[0]","image"],Kc(i,s));const l=r(e,["config"]);return l!=null&&a(t,["config"],Xc(i,l,t)),t}function jc(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function ed(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["data"]);o!=null&&a(t,["data"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function td(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function nd(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],jc(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],ed(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],td(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Be(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>nd(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function id(i,e){const t={},n=r(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const o=r(e,["default"]);o!=null&&a(t,["default"],o);const s=r(e,["description"]);s!=null&&a(t,["description"],s);const l=r(e,["enum"]);l!=null&&a(t,["enum"],l);const u=r(e,["example"]);u!=null&&a(t,["example"],u);const d=r(e,["format"]);d!=null&&a(t,["format"],d);const c=r(e,["items"]);c!=null&&a(t,["items"],c);const f=r(e,["maxItems"]);f!=null&&a(t,["maxItems"],f);const m=r(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=r(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const g=r(e,["maximum"]);g!=null&&a(t,["maximum"],g);const y=r(e,["minItems"]);y!=null&&a(t,["minItems"],y);const v=r(e,["minLength"]);v!=null&&a(t,["minLength"],v);const T=r(e,["minProperties"]);T!=null&&a(t,["minProperties"],T);const C=r(e,["minimum"]);C!=null&&a(t,["minimum"],C);const k=r(e,["nullable"]);k!=null&&a(t,["nullable"],k);const w=r(e,["pattern"]);w!=null&&a(t,["pattern"],w);const A=r(e,["properties"]);A!=null&&a(t,["properties"],A);const P=r(e,["propertyOrdering"]);P!=null&&a(t,["propertyOrdering"],P);const E=r(e,["required"]);E!=null&&a(t,["required"],E);const R=r(e,["title"]);R!=null&&a(t,["title"],R);const q=r(e,["type"]);return q!=null&&a(t,["type"],q),t}function od(i,e){const t={},n=r(e,["featureSelectionPreference"]);return n!=null&&a(t,["featureSelectionPreference"],n),t}function rd(i,e){const t={},n=r(e,["method"]);n!=null&&a(t,["method"],n);const o=r(e,["category"]);o!=null&&a(t,["category"],o);const s=r(e,["threshold"]);return s!=null&&a(t,["threshold"],s),t}function sd(i,e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&a(t,["description"],n);const o=r(e,["name"]);o!=null&&a(t,["name"],o);const s=r(e,["parameters"]);s!=null&&a(t,["parameters"],s);const l=r(e,["response"]);return l!=null&&a(t,["response"],l),t}function ad(i,e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function ld(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],ad(i,n)),t}function ud(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function cd(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],ud(i,n)),t}function dd(){return{}}function fd(i,e){const t={},n=r(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function pd(i,e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],fd(i,n));const o=r(e,["authType"]);o!=null&&a(t,["authType"],o);const s=r(e,["googleServiceAccountConfig"]);s!=null&&a(t,["googleServiceAccountConfig"],s);const l=r(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const u=r(e,["oauthConfig"]);u!=null&&a(t,["oauthConfig"],u);const d=r(e,["oidcConfig"]);return d!=null&&a(t,["oidcConfig"],d),t}function md(i,e){const t={},n=r(e,["authConfig"]);return n!=null&&a(t,["authConfig"],pd(i,n)),t}function Bo(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>sd(i,m))),a(t,["functionDeclarations"],f)}const o=r(e,["retrieval"]);o!=null&&a(t,["retrieval"],o);const s=r(e,["googleSearch"]);s!=null&&a(t,["googleSearch"],ld(i,s));const l=r(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],cd(i,l)),r(e,["enterpriseWebSearch"])!=null&&a(t,["enterpriseWebSearch"],dd());const d=r(e,["googleMaps"]);if(d!=null&&a(t,["googleMaps"],md(i,d)),r(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=r(e,["codeExecution"]);return c!=null&&a(t,["codeExecution"],c),t}function hd(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["allowedFunctionNames"]);return o!=null&&a(t,["allowedFunctionNames"],o),t}function gd(i,e){const t={},n=r(e,["latitude"]);n!=null&&a(t,["latitude"],n);const o=r(e,["longitude"]);return o!=null&&a(t,["longitude"],o),t}function yd(i,e){const t={},n=r(e,["latLng"]);n!=null&&a(t,["latLng"],gd(i,n));const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function vd(i,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],hd(i,n));const o=r(e,["retrievalConfig"]);return o!=null&&a(t,["retrievalConfig"],yd(i,o)),t}function xd(i,e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Cd(i,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],xd(i,n)),t}function Td(i,e){const t={},n=r(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],Cd(i,n)),r(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function _d(i,e){const t={},n=r(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const o=r(e,["thinkingBudget"]);return o!=null&&a(t,["thinkingBudget"],o),t}function kd(i,e,t){const n={},o=r(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],Be(i,W(i,o)));const s=r(e,["temperature"]);s!=null&&a(n,["temperature"],s);const l=r(e,["topP"]);l!=null&&a(n,["topP"],l);const u=r(e,["topK"]);u!=null&&a(n,["topK"],u);const d=r(e,["candidateCount"]);d!=null&&a(n,["candidateCount"],d);const c=r(e,["maxOutputTokens"]);c!=null&&a(n,["maxOutputTokens"],c);const f=r(e,["stopSequences"]);f!=null&&a(n,["stopSequences"],f);const m=r(e,["responseLogprobs"]);m!=null&&a(n,["responseLogprobs"],m);const h=r(e,["logprobs"]);h!=null&&a(n,["logprobs"],h);const g=r(e,["presencePenalty"]);g!=null&&a(n,["presencePenalty"],g);const y=r(e,["frequencyPenalty"]);y!=null&&a(n,["frequencyPenalty"],y);const v=r(e,["seed"]);v!=null&&a(n,["seed"],v);const T=r(e,["responseMimeType"]);T!=null&&a(n,["responseMimeType"],T);const C=r(e,["responseSchema"]);C!=null&&a(n,["responseSchema"],id(i,_t(i,C)));const k=r(e,["routingConfig"]);k!=null&&a(n,["routingConfig"],k);const w=r(e,["modelSelectionConfig"]);w!=null&&a(n,["modelConfig"],od(i,w));const A=r(e,["safetySettings"]);if(t!==void 0&&A!=null){let K=A;Array.isArray(K)&&(K=K.map(O=>rd(i,O))),a(t,["safetySettings"],K)}const P=r(e,["tools"]);if(t!==void 0&&P!=null){let K=tt(i,P);Array.isArray(K)&&(K=K.map(O=>Bo(i,et(i,O)))),a(t,["tools"],K)}const E=r(e,["toolConfig"]);t!==void 0&&E!=null&&a(t,["toolConfig"],vd(i,E));const R=r(e,["labels"]);t!==void 0&&R!=null&&a(t,["labels"],R);const q=r(e,["cachedContent"]);t!==void 0&&q!=null&&a(t,["cachedContent"],he(i,q));const I=r(e,["responseModalities"]);I!=null&&a(n,["responseModalities"],I);const F=r(e,["mediaResolution"]);F!=null&&a(n,["mediaResolution"],F);const J=r(e,["speechConfig"]);J!=null&&a(n,["speechConfig"],Td(i,bo(i,J)));const Se=r(e,["audioTimestamp"]);Se!=null&&a(n,["audioTimestamp"],Se);const Ee=r(e,["thinkingConfig"]);return Ee!=null&&a(n,["thinkingConfig"],_d(i,Ee)),n}function Ji(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let l=ne(i,o);Array.isArray(l)&&(l=l.map(u=>Be(i,u))),a(t,["contents"],l)}const s=r(e,["config"]);return s!=null&&a(t,["generationConfig"],kd(i,s,t)),t}function Sd(i,e,t){const n={},o=r(e,["taskType"]);t!==void 0&&o!=null&&a(t,["instances[]","task_type"],o);const s=r(e,["title"]);t!==void 0&&s!=null&&a(t,["instances[]","title"],s);const l=r(e,["outputDimensionality"]);t!==void 0&&l!=null&&a(t,["parameters","outputDimensionality"],l);const u=r(e,["mimeType"]);t!==void 0&&u!=null&&a(t,["instances[]","mimeType"],u);const d=r(e,["autoTruncate"]);return t!==void 0&&d!=null&&a(t,["parameters","autoTruncate"],d),n}function Ed(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["contents"]);o!=null&&a(t,["instances[]","content"],Mo(i,o));const s=r(e,["config"]);return s!=null&&a(t,["config"],Sd(i,s,t)),t}function wd(i,e,t){const n={},o=r(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const s=r(e,["negativePrompt"]);t!==void 0&&s!=null&&a(t,["parameters","negativePrompt"],s);const l=r(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const u=r(e,["aspectRatio"]);t!==void 0&&u!=null&&a(t,["parameters","aspectRatio"],u);const d=r(e,["guidanceScale"]);t!==void 0&&d!=null&&a(t,["parameters","guidanceScale"],d);const c=r(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const f=r(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&a(t,["parameters","safetySetting"],f);const m=r(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=r(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const g=r(e,["includeRaiReason"]);t!==void 0&&g!=null&&a(t,["parameters","includeRaiReason"],g);const y=r(e,["language"]);t!==void 0&&y!=null&&a(t,["parameters","language"],y);const v=r(e,["outputMimeType"]);t!==void 0&&v!=null&&a(t,["parameters","outputOptions","mimeType"],v);const T=r(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&a(t,["parameters","outputOptions","compressionQuality"],T);const C=r(e,["addWatermark"]);t!==void 0&&C!=null&&a(t,["parameters","addWatermark"],C);const k=r(e,["enhancePrompt"]);return t!==void 0&&k!=null&&a(t,["parameters","enhancePrompt"],k),n}function Ad(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const s=r(e,["config"]);return s!=null&&a(t,["config"],wd(i,s,t)),t}function xn(i,e){const t={},n=r(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const o=r(e,["imageBytes"]);o!=null&&a(t,["bytesBase64Encoded"],ge(i,o));const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function Md(i,e){const t={},n=r(e,["maskMode"]);n!=null&&a(t,["maskMode"],n);const o=r(e,["segmentationClasses"]);o!=null&&a(t,["maskClasses"],o);const s=r(e,["maskDilation"]);return s!=null&&a(t,["dilation"],s),t}function bd(i,e){const t={},n=r(e,["controlType"]);n!=null&&a(t,["controlType"],n);const o=r(e,["enableControlImageComputation"]);return o!=null&&a(t,["computeControl"],o),t}function Id(i,e){const t={},n=r(e,["styleDescription"]);return n!=null&&a(t,["styleDescription"],n),t}function Nd(i,e){const t={},n=r(e,["subjectType"]);n!=null&&a(t,["subjectType"],n);const o=r(e,["subjectDescription"]);return o!=null&&a(t,["subjectDescription"],o),t}function Rd(i,e){const t={},n=r(e,["referenceImage"]);n!=null&&a(t,["referenceImage"],xn(i,n));const o=r(e,["referenceId"]);o!=null&&a(t,["referenceId"],o);const s=r(e,["referenceType"]);s!=null&&a(t,["referenceType"],s);const l=r(e,["maskImageConfig"]);l!=null&&a(t,["maskImageConfig"],Md(i,l));const u=r(e,["controlImageConfig"]);u!=null&&a(t,["controlImageConfig"],bd(i,u));const d=r(e,["styleImageConfig"]);d!=null&&a(t,["styleImageConfig"],Id(i,d));const c=r(e,["subjectImageConfig"]);return c!=null&&a(t,["subjectImageConfig"],Nd(i,c)),t}function Pd(i,e,t){const n={},o=r(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const s=r(e,["negativePrompt"]);t!==void 0&&s!=null&&a(t,["parameters","negativePrompt"],s);const l=r(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const u=r(e,["aspectRatio"]);t!==void 0&&u!=null&&a(t,["parameters","aspectRatio"],u);const d=r(e,["guidanceScale"]);t!==void 0&&d!=null&&a(t,["parameters","guidanceScale"],d);const c=r(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const f=r(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&a(t,["parameters","safetySetting"],f);const m=r(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=r(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const g=r(e,["includeRaiReason"]);t!==void 0&&g!=null&&a(t,["parameters","includeRaiReason"],g);const y=r(e,["language"]);t!==void 0&&y!=null&&a(t,["parameters","language"],y);const v=r(e,["outputMimeType"]);t!==void 0&&v!=null&&a(t,["parameters","outputOptions","mimeType"],v);const T=r(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&a(t,["parameters","outputOptions","compressionQuality"],T);const C=r(e,["editMode"]);t!==void 0&&C!=null&&a(t,["parameters","editMode"],C);const k=r(e,["baseSteps"]);return t!==void 0&&k!=null&&a(t,["parameters","editConfig","baseSteps"],k),n}function Dd(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const s=r(e,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Rd(i,d))),a(t,["instances[0]","referenceImages"],u)}const l=r(e,["config"]);return l!=null&&a(t,["config"],Pd(i,l,t)),t}function Ld(i,e,t){const n={},o=r(e,["includeRaiReason"]);t!==void 0&&o!=null&&a(t,["parameters","includeRaiReason"],o);const s=r(e,["outputMimeType"]);t!==void 0&&s!=null&&a(t,["parameters","outputOptions","mimeType"],s);const l=r(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&a(t,["parameters","outputOptions","compressionQuality"],l);const u=r(e,["numberOfImages"]);t!==void 0&&u!=null&&a(t,["parameters","sampleCount"],u);const d=r(e,["mode"]);return t!==void 0&&d!=null&&a(t,["parameters","mode"],d),n}function Vd(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["image"]);o!=null&&a(t,["instances[0]","image"],xn(i,o));const s=r(e,["upscaleFactor"]);s!=null&&a(t,["parameters","upscaleConfig","upscaleFactor"],s);const l=r(e,["config"]);return l!=null&&a(t,["config"],Ld(i,l,t)),t}function Fd(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function Ud(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const s=r(e,["pageToken"]);t!==void 0&&s!=null&&a(t,["_query","pageToken"],s);const l=r(e,["filter"]);t!==void 0&&l!=null&&a(t,["_query","filter"],l);const u=r(e,["queryBase"]);return t!==void 0&&u!=null&&a(t,["_url","models_url"],Ro(i,u)),n}function qd(i,e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],Ud(i,n,t)),t}function $d(i,e,t){const n={},o=r(e,["displayName"]);t!==void 0&&o!=null&&a(t,["displayName"],o);const s=r(e,["description"]);t!==void 0&&s!=null&&a(t,["description"],s);const l=r(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function Bd(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],$d(i,o,t)),t}function Gd(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function Hd(i,e,t){const n={},o=r(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],Be(i,W(i,o)));const s=r(e,["tools"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Bo(i,d))),a(t,["tools"],u)}const l=r(e,["generationConfig"]);return t!==void 0&&l!=null&&a(t,["generationConfig"],l),n}function Od(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let l=ne(i,o);Array.isArray(l)&&(l=l.map(u=>Be(i,u))),a(t,["contents"],l)}const s=r(e,["config"]);return s!=null&&a(t,["config"],Hd(i,s,t)),t}function zd(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let l=ne(i,o);Array.isArray(l)&&(l=l.map(u=>Be(i,u))),a(t,["contents"],l)}const s=r(e,["config"]);return s!=null&&a(t,["config"],s),t}function Jd(i,e,t){const n={},o=r(e,["numberOfVideos"]);t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o);const s=r(e,["outputGcsUri"]);t!==void 0&&s!=null&&a(t,["parameters","storageUri"],s);const l=r(e,["fps"]);t!==void 0&&l!=null&&a(t,["parameters","fps"],l);const u=r(e,["durationSeconds"]);t!==void 0&&u!=null&&a(t,["parameters","durationSeconds"],u);const d=r(e,["seed"]);t!==void 0&&d!=null&&a(t,["parameters","seed"],d);const c=r(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const f=r(e,["resolution"]);t!==void 0&&f!=null&&a(t,["parameters","resolution"],f);const m=r(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=r(e,["pubsubTopic"]);t!==void 0&&h!=null&&a(t,["parameters","pubsubTopic"],h);const g=r(e,["negativePrompt"]);t!==void 0&&g!=null&&a(t,["parameters","negativePrompt"],g);const y=r(e,["enhancePrompt"]);t!==void 0&&y!=null&&a(t,["parameters","enhancePrompt"],y);const v=r(e,["generateAudio"]);return t!==void 0&&v!=null&&a(t,["parameters","generateAudio"],v),n}function Wd(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const s=r(e,["image"]);s!=null&&a(t,["instances[0]","image"],xn(i,s));const l=r(e,["config"]);return l!=null&&a(t,["config"],Jd(i,l,t)),t}function Yd(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function Zd(i,e){const t={},n=r(e,["data"]);n!=null&&a(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Kd(i,e){const t={},n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Xd(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Yd(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],Zd(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Kd(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Qd(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Xd(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function jd(i,e){const t={},n=r(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function ef(i,e){const t={},n=r(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const o=r(e,["urlRetrievalStatus"]);return o!=null&&a(t,["urlRetrievalStatus"],o),t}function tf(i,e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ef(i,s))),a(t,["urlMetadata"],o)}return t}function nf(i,e){const t={},n=r(e,["content"]);n!=null&&a(t,["content"],Qd(i,n));const o=r(e,["citationMetadata"]);o!=null&&a(t,["citationMetadata"],jd(i,o));const s=r(e,["tokenCount"]);s!=null&&a(t,["tokenCount"],s);const l=r(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const u=r(e,["urlContextMetadata"]);u!=null&&a(t,["urlContextMetadata"],tf(i,u));const d=r(e,["avgLogprobs"]);d!=null&&a(t,["avgLogprobs"],d);const c=r(e,["groundingMetadata"]);c!=null&&a(t,["groundingMetadata"],c);const f=r(e,["index"]);f!=null&&a(t,["index"],f);const m=r(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=r(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function Wi(i,e){const t={},n=r(e,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>nf(i,d))),a(t,["candidates"],u)}const o=r(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const s=r(e,["promptFeedback"]);s!=null&&a(t,["promptFeedback"],s);const l=r(e,["usageMetadata"]);return l!=null&&a(t,["usageMetadata"],l),t}function of(i,e){const t={},n=r(e,["values"]);return n!=null&&a(t,["values"],n),t}function rf(){return{}}function sf(i,e){const t={},n=r(e,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>of(i,l))),a(t,["embeddings"],s)}return r(e,["metadata"])!=null&&a(t,["metadata"],rf()),t}function af(i,e){const t={},n=r(e,["bytesBase64Encoded"]);n!=null&&a(t,["imageBytes"],ge(i,n));const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Go(i,e){const t={},n=r(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const o=r(e,["safetyAttributes","scores"]);o!=null&&a(t,["scores"],o);const s=r(e,["contentType"]);return s!=null&&a(t,["contentType"],s),t}function lf(i,e){const t={},n=r(e,["_self"]);n!=null&&a(t,["image"],af(i,n));const o=r(e,["raiFilteredReason"]);o!=null&&a(t,["raiFilteredReason"],o);const s=r(e,["_self"]);return s!=null&&a(t,["safetyAttributes"],Go(i,s)),t}function uf(i,e){const t={},n=r(e,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>lf(i,l))),a(t,["generatedImages"],s)}const o=r(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],Go(i,o)),t}function cf(i,e){const t={},n=r(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const o=r(e,["createTime"]);o!=null&&a(t,["createTime"],o);const s=r(e,["updateTime"]);return s!=null&&a(t,["updateTime"],s),t}function nn(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["displayName"]);o!=null&&a(t,["displayName"],o);const s=r(e,["description"]);s!=null&&a(t,["description"],s);const l=r(e,["version"]);l!=null&&a(t,["version"],l);const u=r(e,["_self"]);u!=null&&a(t,["tunedModelInfo"],cf(i,u));const d=r(e,["inputTokenLimit"]);d!=null&&a(t,["inputTokenLimit"],d);const c=r(e,["outputTokenLimit"]);c!=null&&a(t,["outputTokenLimit"],c);const f=r(e,["supportedGenerationMethods"]);return f!=null&&a(t,["supportedActions"],f),t}function df(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=r(e,["_self"]);if(o!=null){let s=Po(i,o);Array.isArray(s)&&(s=s.map(l=>nn(i,l))),a(t,["models"],s)}return t}function ff(){return{}}function pf(i,e){const t={},n=r(e,["totalTokens"]);n!=null&&a(t,["totalTokens"],n);const o=r(e,["cachedContentTokenCount"]);return o!=null&&a(t,["cachedContentTokenCount"],o),t}function mf(i,e){const t={},n=r(e,["video","uri"]);n!=null&&a(t,["uri"],n);const o=r(e,["video","encodedVideo"]);o!=null&&a(t,["videoBytes"],ge(i,o));const s=r(e,["encoding"]);return s!=null&&a(t,["mimeType"],s),t}function hf(i,e){const t={},n=r(e,["_self"]);return n!=null&&a(t,["video"],mf(i,n)),t}function gf(i,e){const t={},n=r(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>hf(i,u))),a(t,["generatedVideos"],l)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const s=r(e,["raiMediaFilteredReasons"]);return s!=null&&a(t,["raiMediaFilteredReasons"],s),t}function yf(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["metadata"]);o!=null&&a(t,["metadata"],o);const s=r(e,["done"]);s!=null&&a(t,["done"],s);const l=r(e,["error"]);l!=null&&a(t,["error"],l);const u=r(e,["response","generateVideoResponse"]);return u!=null&&a(t,["response"],gf(i,u)),t}function vf(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function xf(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["data"]);o!=null&&a(t,["data"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function Cf(i,e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function Tf(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],vf(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],xf(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Cf(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function _f(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Tf(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function kf(i,e){const t={},n=r(e,["citations"]);return n!=null&&a(t,["citations"],n),t}function Sf(i,e){const t={},n=r(e,["content"]);n!=null&&a(t,["content"],_f(i,n));const o=r(e,["citationMetadata"]);o!=null&&a(t,["citationMetadata"],kf(i,o));const s=r(e,["finishMessage"]);s!=null&&a(t,["finishMessage"],s);const l=r(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const u=r(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const d=r(e,["groundingMetadata"]);d!=null&&a(t,["groundingMetadata"],d);const c=r(e,["index"]);c!=null&&a(t,["index"],c);const f=r(e,["logprobsResult"]);f!=null&&a(t,["logprobsResult"],f);const m=r(e,["safetyRatings"]);return m!=null&&a(t,["safetyRatings"],m),t}function Yi(i,e){const t={},n=r(e,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Sf(i,f))),a(t,["candidates"],c)}const o=r(e,["createTime"]);o!=null&&a(t,["createTime"],o);const s=r(e,["responseId"]);s!=null&&a(t,["responseId"],s);const l=r(e,["modelVersion"]);l!=null&&a(t,["modelVersion"],l);const u=r(e,["promptFeedback"]);u!=null&&a(t,["promptFeedback"],u);const d=r(e,["usageMetadata"]);return d!=null&&a(t,["usageMetadata"],d),t}function Ef(i,e){const t={},n=r(e,["truncated"]);n!=null&&a(t,["truncated"],n);const o=r(e,["token_count"]);return o!=null&&a(t,["tokenCount"],o),t}function wf(i,e){const t={},n=r(e,["values"]);n!=null&&a(t,["values"],n);const o=r(e,["statistics"]);return o!=null&&a(t,["statistics"],Ef(i,o)),t}function Af(i,e){const t={},n=r(e,["billableCharacterCount"]);return n!=null&&a(t,["billableCharacterCount"],n),t}function Mf(i,e){const t={},n=r(e,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>wf(i,l))),a(t,["embeddings"],s)}const o=r(e,["metadata"]);return o!=null&&a(t,["metadata"],Af(i,o)),t}function bf(i,e){const t={},n=r(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const o=r(e,["bytesBase64Encoded"]);o!=null&&a(t,["imageBytes"],ge(i,o));const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function Ho(i,e){const t={},n=r(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const o=r(e,["safetyAttributes","scores"]);o!=null&&a(t,["scores"],o);const s=r(e,["contentType"]);return s!=null&&a(t,["contentType"],s),t}function Cn(i,e){const t={},n=r(e,["_self"]);n!=null&&a(t,["image"],bf(i,n));const o=r(e,["raiFilteredReason"]);o!=null&&a(t,["raiFilteredReason"],o);const s=r(e,["_self"]);s!=null&&a(t,["safetyAttributes"],Ho(i,s));const l=r(e,["prompt"]);return l!=null&&a(t,["enhancedPrompt"],l),t}function If(i,e){const t={},n=r(e,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Cn(i,l))),a(t,["generatedImages"],s)}const o=r(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],Ho(i,o)),t}function Nf(i,e){const t={},n=r(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Cn(i,s))),a(t,["generatedImages"],o)}return t}function Rf(i,e){const t={},n=r(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Cn(i,s))),a(t,["generatedImages"],o)}return t}function Pf(i,e){const t={},n=r(e,["endpoint"]);n!=null&&a(t,["name"],n);const o=r(e,["deployedModelId"]);return o!=null&&a(t,["deployedModelId"],o),t}function Df(i,e){const t={},n=r(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(t,["baseModel"],n);const o=r(e,["createTime"]);o!=null&&a(t,["createTime"],o);const s=r(e,["updateTime"]);return s!=null&&a(t,["updateTime"],s),t}function Lf(i,e){const t={},n=r(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const o=r(e,["epoch"]);o!=null&&a(t,["epoch"],o);const s=r(e,["step"]);return s!=null&&a(t,["step"],s),t}function on(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["displayName"]);o!=null&&a(t,["displayName"],o);const s=r(e,["description"]);s!=null&&a(t,["description"],s);const l=r(e,["versionId"]);l!=null&&a(t,["version"],l);const u=r(e,["deployedModels"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(g=>Pf(i,g))),a(t,["endpoints"],h)}const d=r(e,["labels"]);d!=null&&a(t,["labels"],d);const c=r(e,["_self"]);c!=null&&a(t,["tunedModelInfo"],Df(i,c));const f=r(e,["defaultCheckpointId"]);f!=null&&a(t,["defaultCheckpointId"],f);const m=r(e,["checkpoints"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>Lf(i,g))),a(t,["checkpoints"],h)}return t}function Vf(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=r(e,["_self"]);if(o!=null){let s=Po(i,o);Array.isArray(s)&&(s=s.map(l=>on(i,l))),a(t,["models"],s)}return t}function Ff(){return{}}function Uf(i,e){const t={},n=r(e,["totalTokens"]);return n!=null&&a(t,["totalTokens"],n),t}function qf(i,e){const t={},n=r(e,["tokensInfo"]);return n!=null&&a(t,["tokensInfo"],n),t}function $f(i,e){const t={},n=r(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const o=r(e,["bytesBase64Encoded"]);o!=null&&a(t,["videoBytes"],ge(i,o));const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function Bf(i,e){const t={},n=r(e,["_self"]);return n!=null&&a(t,["video"],$f(i,n)),t}function Gf(i,e){const t={},n=r(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Bf(i,u))),a(t,["generatedVideos"],l)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const s=r(e,["raiMediaFilteredReasons"]);return s!=null&&a(t,["raiMediaFilteredReasons"],s),t}function Hf(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["metadata"]);o!=null&&a(t,["metadata"],o);const s=r(e,["done"]);s!=null&&a(t,["done"],s);const l=r(e,["error"]);l!=null&&a(t,["error"],l);const u=r(e,["response"]);return u!=null&&a(t,["response"],Gf(i,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Of="Content-Type",zf="X-Server-Timeout",Jf="User-Agent",rn="x-goog-api-client",Wf="1.3.0",Yf=`google-genai-sdk/${Wf}`,Zf="v1beta1",Kf="v1beta",Zi=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Oo extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class sn extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class Xf{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Zf,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Kf,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const o=[this.getRequestUrlInternal(t)];return n&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))o.searchParams.append(l,String(u));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,t,e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[o,s]of Object.entries(t))typeof s=="object"?n[o]=Object.assign(Object.assign({},n[o]),s):s!==void 0&&(n[o]=s);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,t,e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const o=new AbortController,s=o.signal;t.timeout&&t?.timeout>0&&setTimeout(()=>o.abort(),t.timeout),n&&n.addEventListener("abort",()=>{o.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async o=>(await Ki(o),new Qt(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async o=>(await Ki(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Ne(this,arguments,function*(){const o=(t=e?.body)===null||t===void 0?void 0:t.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:d}=yield H(o.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=s.decode(d);try{const m=JSON.parse(c);if("error"in m){const h=JSON.parse(JSON.stringify(m.error)),g=h.status,y=h.code,v=`got status: ${g}. ${JSON.stringify(m)}`;if(y>=400&&y<500)throw new Oo(v);if(y>=500&&y<600)throw new sn(v)}}catch(m){const h=m;if(h.name==="ClientError"||h.name==="ServerError")throw m}l+=c;let f=l.match(Zi);for(;f;){const m=f[1];try{const h=new Response(m,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield H(new Qt(h)),l=l.slice(f[0].length),f=l.match(Zi)}catch(h){throw new Error(`exception parsing stream chunk ${m}. ${h}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=Yf+" "+this.clientOptions.userAgentExtra;return e[Jf]=t,e[rn]=t,e[Of]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,o]of Object.entries(e.headers))t.append(n,o);e.timeout&&e.timeout>0&&t.append(zf,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,l=await s.stat(e);o.sizeBytes=String(l.size);const u=(n=t?.mimeType)!==null&&n!==void 0?n:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const d=await this.fetchUploadUrl(o,t);return s.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let o={};t?.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},l=await this.request({path:D("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:o});if(!l||!l?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(n=l?.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Ki(i){var e;if(i===void 0)throw new sn("response is undefined");if(!i.ok){const t=i.status,n=i.statusText;let o;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const s=`got status: ${t} ${n}. ${JSON.stringify(o)}`;throw t>=400&&t<500?new Oo(s):t>=500&&t<600?new sn(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qf="mcp_used/unknown";function zo(i){for(const e of i)if(Tn(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Jo(i){var e;const t=(e=i[rn])!==null&&e!==void 0?e:"";i[rn]=(t+` ${Qf}`).trimStart()}function jf(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Tn(o)))!==null&&n!==void 0?n:!1}function ep(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Tn(o)))!==null&&n!==void 0?n:!1}function Tn(i){return i!==null&&typeof i=="object"&&i instanceof _n}function tp(i,e=100){return Ne(this,arguments,function*(){let n,o=0;for(;o<e;){const s=yield H(i.listTools({cursor:n}));for(const l of s.tools)yield yield H(l),o++;if(!s.nextCursor)break;n=s.nextCursor}})}class _n{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new _n(e,t)}async initialize(){var e,t,n,o;if(this.mcpTools.length>0)return;const s={},l=[];for(const f of this.mcpClients)try{for(var u=!0,d=(t=void 0,Ke(tp(f))),c;c=await d.next(),e=c.done,!e;u=!0){o=c.value,u=!1;const m=o;l.push(m);const h=m.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=f}}catch(m){t={error:m}}finally{try{!u&&!e&&(n=d.return)&&await n.call(d)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),aa(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const s=await this.functionNameToMcpClient[n.name].callTool({name:n.name,arguments:n.args});t.push({functionResponse:{name:n.name,response:s.isError?{error:s}:s}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function np(i,e,t){const n=new Ys;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data);const s=mc(i,o);Object.assign(n,s),e(n)}class ip{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),l=sp(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(w=>{c=w}),m=e.callbacks,h=function(){c({})},g=this.apiClient,y={onopen:h,onmessage:w=>{np(g,m.onmessage,w)},onerror:(t=m?.onerror)!==null&&t!==void 0?t:function(w){},onclose:(n=m?.onclose)!==null&&n!==void 0?n:function(w){}},v=this.webSocketFactory.create(d,rp(l),y);v.connect(),await f;const T=G(this.apiClient,e.model),C=Uo(this.apiClient,{model:T}),k=tn(this.apiClient,{setup:C});return v.send(JSON.stringify(k)),new op(v,this.apiClient)}}class op{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Mu(this.apiClient,e),n=qo(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=bu(this.apiClient,e),n=tn(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=tn(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(be.PLAY)}pause(){this.sendPlaybackControl(be.PAUSE)}stop(){this.sendPlaybackControl(be.STOP)}resetContext(){this.sendPlaybackControl(be.RESET_CONTEXT)}close(){this.conn.close()}}function rp(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function sp(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ap="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function lp(i,e,t){const n=new Ws;let o;if(t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),i.isVertexAI()){const s=rc(i,o);Object.assign(n,s)}else{const s=oc(i,o);Object.assign(n,s)}e(n)}class up{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new ip(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,o,s,l,u;const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const m=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&zo(e.config.tools)&&Jo(m);const h=pp(m);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const I=this.apiClient.getApiKey();let F="BidiGenerateContent",J="key";I?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),F="BidiGenerateContentConstrained",J="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${J}=${I}`}let g=()=>{};const y=new Promise(I=>{g=I}),v=e.callbacks,T=function(){var I;(I=v?.onopen)===null||I===void 0||I.call(v),g({})},C=this.apiClient,k={onopen:T,onmessage:I=>{lp(C,v.onmessage,I)},onerror:(t=v?.onerror)!==null&&t!==void 0?t:function(I){},onclose:(n=v?.onclose)!==null&&n!==void 0?n:function(I){}},w=this.webSocketFactory.create(f,fp(h),k);w.connect(),await y;let A=G(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const I=this.apiClient.getProject(),F=this.apiClient.getLocation();A=`projects/${I}/locations/${F}/`+A}let P={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ct.AUDIO]}:e.config.responseModalities=[Ct.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const E=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],R=[];for(const I of E)if(this.isCallableTool(I)){const F=I;R.push(await F.tool())}else R.push(I);R.length>0&&(e.config.tools=R);const q={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=Tu(this.apiClient,q):P=Cu(this.apiClient,q),delete P.config,w.send(JSON.stringify(P)),new dp(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const cp={turnComplete:!0};class dp{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=ne(e,t.turns),e.isVertexAI()?n=n.map(o=>Be(e,o)):n=n.map(o=>At(e,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(ap)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},cp),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Au(this.apiClient,e)}:t={realtimeInput:wu(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function fp(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function pp(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xi=10;function Qi(i){var e,t,n;if(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const l of(t=i?.tools)!==null&&t!==void 0?t:[])if(ut(l)){o=!0;break}if(!o)return!0;const s=(n=i?.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function ut(i){return"callTool"in i&&typeof i.callTool=="function"}function ji(i){var e;return!(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mp extends $e{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,o,s,l,u;const d=await this.processParamsForMcpUsage(t);if(!jf(t)||Qi(t.config))return await this.generateContentInternal(d);if(ep(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const m=ne(this.apiClient,d.contents),h=(s=(o=(n=d.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Xi;let g=0;for(;g<h&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const y=c.candidates[0].content,v=[];for(const T of(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(ut(T)){const k=await T.callTool(c.functionCalls);v.push(...k)}g++,f={role:"user",parts:v},d.contents=ne(this.apiClient,d.contents),d.contents.push(y),d.contents.push(f),ji(d.config)&&(m.push(y),m.push(f))}return ji(d.config)&&(c.automaticFunctionCallingHistory=m),c},this.generateContentStream=async t=>{if(Qi(t.config)){const n=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var o;let s;const l=[];if(n?.generatedImages)for(const d of n.generatedImages)d&&d?.safetyAttributes&&((o=d?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=d?.safetyAttributes:l.push(d);let u;return s?u={generatedImages:l,positivePromptSafetyAttributes:s}:u={generatedImages:l},u}),this.list=async t=>{var n;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((n=l.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new wt(qe.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(o)}}async processParamsForMcpUsage(e){var t,n,o;const s=(t=e.config)===null||t===void 0?void 0:t.tools;if(!s)return e;const l=await Promise.all(s.map(async d=>ut(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&zo(e.config.tools)){const d=(o=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Jo(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var t,n,o;const s=new Map;for(const l of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(ut(l)){const u=l,d=await u.tool();for(const c of(o=d.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,u)}}return s}async processAfcStream(e){var t,n,o;const s=(o=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&o!==void 0?o:Xi;let l=!1,u=0;const d=await this.initAfcToolsMap(e);return(function(c,f,m){var h,g;return Ne(this,arguments,function*(){for(var y,v,T,C;u<s;){l&&(u++,l=!1);const P=yield H(c.processParamsForMcpUsage(m)),E=yield H(c.generateContentStreamInternal(P)),R=[],q=[];try{for(var k=!0,w=(v=void 0,Ke(E)),A;A=yield H(w.next()),y=A.done,!y;k=!0){C=A.value,k=!1;const I=C;if(yield yield H(I),I.candidates&&(!((h=I.candidates[0])===null||h===void 0)&&h.content)){q.push(I.candidates[0].content);for(const F of(g=I.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<s&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const J=yield H(f.get(F.functionCall.name).callTool([F.functionCall]));R.push(...J)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(I){v={error:I}}finally{try{!k&&!y&&(T=w.return)&&(yield H(T.call(w)))}finally{if(v)throw v.error}}if(R.length>0){l=!0;const I=new Oe;I.candidates=[{content:{role:"user",parts:R}}],yield yield H(I);const F=[];F.push(...q),F.push({role:"user",parts:R});const J=ne(c.apiClient,m.contents).concat(F);m.contents=J}else break}})})(this,d,e)}async generateContentInternal(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ji(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const m=Yi(this.apiClient,f),h=new Oe;return Object.assign(h,m),h})}else{const c=zi(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>{const m=Wi(this.apiClient,f),h=new Oe;return Object.assign(h,m),h})}}async generateContentStreamInternal(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ji(this.apiClient,e);u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return l=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),l.then(function(m){return Ne(this,arguments,function*(){var h,g,y,v;try{for(var T=!0,C=Ke(m),k;k=yield H(C.next()),h=k.done,!h;T=!0){v=k.value,T=!1;const A=Yi(f,yield H(v.json())),P=new Oe;Object.assign(P,A),yield yield H(P)}}catch(w){g={error:w}}finally{try{!T&&!h&&(y=C.return)&&(yield H(y.call(C)))}finally{if(g)throw g.error}}})})}else{const c=zi(this.apiClient,e);u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return l=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),l.then(function(m){return Ne(this,arguments,function*(){var h,g,y,v;try{for(var T=!0,C=Ke(m),k;k=yield H(C.next()),h=k.done,!h;T=!0){v=k.value,T=!1;const A=Wi(f,yield H(v.json())),P=new Oe;Object.assign(P,A),yield yield H(P)}}catch(w){g={error:w}}finally{try{!T&&!h&&(y=C.return)&&(yield H(y.call(C)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ed(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const m=Mf(this.apiClient,f),h=new Ei;return Object.assign(h,m),h})}else{const c=qc(this.apiClient,e);return u=D("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>{const m=sf(this.apiClient,f),h=new Ei;return Object.assign(h,m),h})}}async generateImagesInternal(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ad(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const m=If(this.apiClient,f),h=new wi;return Object.assign(h,m),h})}else{const c=Bc(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>{const m=uf(this.apiClient,f),h=new wi;return Object.assign(h,m),h})}}async editImageInternal(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Dd(this.apiClient,e);return s=D("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=Nf(this.apiClient,d),f=new Bs;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Vd(this.apiClient,e);return s=D("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=Rf(this.apiClient,d),f=new Gs;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Fd(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>on(this.apiClient,f))}else{const c=Gc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>nn(this.apiClient,f))}}async listInternal(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=qd(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const m=Vf(this.apiClient,f),h=new Ai;return Object.assign(h,m),h})}else{const c=Oc(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>{const m=df(this.apiClient,f),h=new Ai;return Object.assign(h,m),h})}}async update(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Bd(this.apiClient,e);return u=D("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>on(this.apiClient,f))}else{const c=Jc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>nn(this.apiClient,f))}}async delete(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Gd(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Ff(),m=new Mi;return Object.assign(m,f),m})}else{const c=Wc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(()=>{const f=ff(),m=new Mi;return Object.assign(m,f),m})}}async countTokens(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Od(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const m=Uf(this.apiClient,f),h=new bi;return Object.assign(h,m),h})}else{const c=Zc(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>{const m=pf(this.apiClient,f),h=new bi;return Object.assign(h,m),h})}}async computeTokens(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=zd(this.apiClient,e);return s=D("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=qf(this.apiClient,d),f=new Hs;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Wd(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>Hf(this.apiClient,f))}else{const c=Qc(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>yf(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hp(i,e){const t={},n=r(e,["operationName"]);n!=null&&a(t,["_url","operationName"],n);const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function gp(i,e){const t={},n=r(e,["operationName"]);n!=null&&a(t,["_url","operationName"],n);const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function yp(i,e){const t={},n=r(e,["operationName"]);n!=null&&a(t,["operationName"],n);const o=r(e,["resourceName"]);o!=null&&a(t,["_url","resourceName"],o);const s=r(e,["config"]);return s!=null&&a(t,["config"],s),t}function vp(i,e){const t={},n=r(e,["video","uri"]);n!=null&&a(t,["uri"],n);const o=r(e,["video","encodedVideo"]);o!=null&&a(t,["videoBytes"],ge(i,o));const s=r(e,["encoding"]);return s!=null&&a(t,["mimeType"],s),t}function xp(i,e){const t={},n=r(e,["_self"]);return n!=null&&a(t,["video"],vp(i,n)),t}function Cp(i,e){const t={},n=r(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>xp(i,u))),a(t,["generatedVideos"],l)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const s=r(e,["raiMediaFilteredReasons"]);return s!=null&&a(t,["raiMediaFilteredReasons"],s),t}function Tp(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["metadata"]);o!=null&&a(t,["metadata"],o);const s=r(e,["done"]);s!=null&&a(t,["done"],s);const l=r(e,["error"]);l!=null&&a(t,["error"],l);const u=r(e,["response","generateVideoResponse"]);return u!=null&&a(t,["response"],Cp(i,u)),t}function _p(i,e){const t={},n=r(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const o=r(e,["bytesBase64Encoded"]);o!=null&&a(t,["videoBytes"],ge(i,o));const s=r(e,["mimeType"]);return s!=null&&a(t,["mimeType"],s),t}function kp(i,e){const t={},n=r(e,["_self"]);return n!=null&&a(t,["video"],_p(i,n)),t}function Sp(i,e){const t={},n=r(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>kp(i,u))),a(t,["generatedVideos"],l)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const s=r(e,["raiMediaFilteredReasons"]);return s!=null&&a(t,["raiMediaFilteredReasons"],s),t}function eo(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["metadata"]);o!=null&&a(t,["metadata"],o);const s=r(e,["done"]);s!=null&&a(t,["done"],s);const l=r(e,["error"]);l!=null&&a(t,["error"],l);const u=r(e,["response"]);return u!=null&&a(t,["response"],Sp(i,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ep extends $e{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let s;return n&&"httpOptions"in n&&(s=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=gp(this.apiClient,e);return u=D("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>eo(this.apiClient,f))}else{const c=hp(this.apiClient,e);return u=D("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>Tp(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=yp(this.apiClient,e);return s=D("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>eo(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wp(i,e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Wo(i,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],wp(i,n)),t}function Ap(i,e){const t={},n=r(e,["speaker"]);n!=null&&a(t,["speaker"],n);const o=r(e,["voiceConfig"]);return o!=null&&a(t,["voiceConfig"],Wo(i,o)),t}function Mp(i,e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ap(i,s))),a(t,["speakerVoiceConfigs"],o)}return t}function bp(i,e){const t={},n=r(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],Wo(i,n));const o=r(e,["multiSpeakerVoiceConfig"]);o!=null&&a(t,["multiSpeakerVoiceConfig"],Mp(i,o));const s=r(e,["languageCode"]);return s!=null&&a(t,["languageCode"],s),t}function Ip(i,e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const s=r(e,["startOffset"]);return s!=null&&a(t,["startOffset"],s),t}function Np(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&a(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Rp(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Pp(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Ip(i,n));const o=r(e,["thought"]);o!=null&&a(t,["thought"],o);const s=r(e,["inlineData"]);s!=null&&a(t,["inlineData"],Np(i,s));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Rp(i,l));const u=r(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Dp(i,e){const t={},n=r(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Pp(i,l))),a(t,["parts"],s)}const o=r(e,["role"]);return o!=null&&a(t,["role"],o),t}function Lp(i,e){const t={},n=r(e,["behavior"]);n!=null&&a(t,["behavior"],n);const o=r(e,["description"]);o!=null&&a(t,["description"],o);const s=r(e,["name"]);s!=null&&a(t,["name"],s);const l=r(e,["parameters"]);l!=null&&a(t,["parameters"],l);const u=r(e,["response"]);return u!=null&&a(t,["response"],u),t}function Vp(i,e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function Fp(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],Vp(i,n)),t}function Up(i,e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function qp(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Up(i,n)),t}function $p(){return{}}function Bp(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Lp(i,c))),a(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],Fp(i,o));const s=r(e,["googleSearchRetrieval"]);if(s!=null&&a(t,["googleSearchRetrieval"],qp(i,s)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&a(t,["urlContext"],$p());const u=r(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function Gp(i,e){const t={},n=r(e,["handle"]);if(n!=null&&a(t,["handle"],n),r(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function to(){return{}}function Hp(i,e){const t={},n=r(e,["disabled"]);n!=null&&a(t,["disabled"],n);const o=r(e,["startOfSpeechSensitivity"]);o!=null&&a(t,["startOfSpeechSensitivity"],o);const s=r(e,["endOfSpeechSensitivity"]);s!=null&&a(t,["endOfSpeechSensitivity"],s);const l=r(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const u=r(e,["silenceDurationMs"]);return u!=null&&a(t,["silenceDurationMs"],u),t}function Op(i,e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],Hp(i,n));const o=r(e,["activityHandling"]);o!=null&&a(t,["activityHandling"],o);const s=r(e,["turnCoverage"]);return s!=null&&a(t,["turnCoverage"],s),t}function zp(i,e){const t={},n=r(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function Jp(i,e){const t={},n=r(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const o=r(e,["slidingWindow"]);return o!=null&&a(t,["slidingWindow"],zp(i,o)),t}function Wp(i,e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function Yp(i,e,t){const n={},o=r(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const s=r(e,["responseModalities"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","responseModalities"],s);const l=r(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const u=r(e,["topP"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topP"],u);const d=r(e,["topK"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","topK"],d);const c=r(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const f=r(e,["mediaResolution"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","mediaResolution"],f);const m=r(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=r(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],bp(i,vn(i,h)));const g=r(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=r(e,["systemInstruction"]);t!==void 0&&y!=null&&a(t,["setup","systemInstruction"],Dp(i,W(i,y)));const v=r(e,["tools"]);if(t!==void 0&&v!=null){let E=tt(i,v);Array.isArray(E)&&(E=E.map(R=>Bp(i,et(i,R)))),a(t,["setup","tools"],E)}const T=r(e,["sessionResumption"]);t!==void 0&&T!=null&&a(t,["setup","sessionResumption"],Gp(i,T));const C=r(e,["inputAudioTranscription"]);t!==void 0&&C!=null&&a(t,["setup","inputAudioTranscription"],to());const k=r(e,["outputAudioTranscription"]);t!==void 0&&k!=null&&a(t,["setup","outputAudioTranscription"],to());const w=r(e,["realtimeInputConfig"]);t!==void 0&&w!=null&&a(t,["setup","realtimeInputConfig"],Op(i,w));const A=r(e,["contextWindowCompression"]);t!==void 0&&A!=null&&a(t,["setup","contextWindowCompression"],Jp(i,A));const P=r(e,["proactivity"]);return t!==void 0&&P!=null&&a(t,["setup","proactivity"],Wp(i,P)),n}function Zp(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["setup","model"],G(i,n));const o=r(e,["config"]);return o!=null&&a(t,["config"],Yp(i,o,t)),t}function Kp(i,e,t){const n={},o=r(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const s=r(e,["newSessionExpireTime"]);t!==void 0&&s!=null&&a(t,["newSessionExpireTime"],s);const l=r(e,["uses"]);t!==void 0&&l!=null&&a(t,["uses"],l);const u=r(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&a(t,["bidiGenerateContentSetup"],Zp(i,u));const d=r(e,["lockAdditionalFields"]);return t!==void 0&&d!=null&&a(t,["fieldMask"],d),n}function Xp(i,e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],Kp(i,n,t)),t}function Qp(i,e){const t={},n=r(e,["name"]);return n!=null&&a(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jp(i){const e=[];for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const o=Object.keys(n).map(s=>`${t}.${s}`);e.push(...o)}else e.push(t)}return e.join(",")}function em(i,e){let t=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const s=n.setup;typeof s=="object"&&s!==null?(i.bidiGenerateContentSetup=s,t=s):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const o=i.fieldMask;if(t){const s=jp(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?i.fieldMask=s:delete i.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>l.includes(c)?`generationConfig.${c}`:c));const d=[];s&&d.push(s),u.length>0&&d.push(...u),d.length>0?i.fieldMask=d.join(","):delete i.fieldMask}else delete i.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?i.fieldMask=o.join(","):delete i.fieldMask;return i}class tm extends $e{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Xp(this.apiClient,e);s=D("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const d=em(u,e.config);return o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),o.then(c=>Qp(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nm(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],n);const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function im(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const s=r(e,["pageToken"]);t!==void 0&&s!=null&&a(t,["_query","pageToken"],s);const l=r(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function om(i,e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],im(i,n,t)),t}function rm(i,e){const t={},n=r(e,["textInput"]);n!=null&&a(t,["textInput"],n);const o=r(e,["output"]);return o!=null&&a(t,["output"],o),t}function sm(i,e){const t={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(e,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>rm(i,s))),a(t,["examples","examples"],o)}return t}function am(i,e,t){const n={};if(r(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=r(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&a(t,["displayName"],o),r(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=r(e,["epochCount"]);t!==void 0&&s!=null&&a(t,["tuningTask","hyperparameters","epochCount"],s);const l=r(e,["learningRateMultiplier"]);if(l!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),r(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=r(e,["batchSize"]);t!==void 0&&u!=null&&a(t,["tuningTask","hyperparameters","batchSize"],u);const d=r(e,["learningRate"]);return t!==void 0&&d!=null&&a(t,["tuningTask","hyperparameters","learningRate"],d),n}function lm(i,e){const t={},n=r(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const o=r(e,["trainingDataset"]);o!=null&&a(t,["tuningTask","trainingData"],sm(i,o));const s=r(e,["config"]);return s!=null&&a(t,["config"],am(i,s,t)),t}function um(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],n);const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function cm(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const s=r(e,["pageToken"]);t!==void 0&&s!=null&&a(t,["_query","pageToken"],s);const l=r(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function dm(i,e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],cm(i,n,t)),t}function fm(i,e,t){const n={},o=r(e,["gcsUri"]);if(t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),r(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function pm(i,e){const t={},n=r(e,["gcsUri"]);return n!=null&&a(t,["validationDatasetUri"],n),t}function mm(i,e,t){const n={},o=r(e,["validationDataset"]);t!==void 0&&o!=null&&a(t,["supervisedTuningSpec"],pm(i,o));const s=r(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&a(t,["tunedModelDisplayName"],s);const l=r(e,["description"]);t!==void 0&&l!=null&&a(t,["description"],l);const u=r(e,["epochCount"]);t!==void 0&&u!=null&&a(t,["supervisedTuningSpec","hyperParameters","epochCount"],u);const d=r(e,["learningRateMultiplier"]);t!==void 0&&d!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const c=r(e,["exportLastCheckpointOnly"]);t!==void 0&&c!=null&&a(t,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=r(e,["adapterSize"]);if(t!==void 0&&f!=null&&a(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),r(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function hm(i,e){const t={},n=r(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const o=r(e,["trainingDataset"]);o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],fm(i,o,t));const s=r(e,["config"]);return s!=null&&a(t,["config"],mm(i,s,t)),t}function gm(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["model"],n);const o=r(e,["name"]);return o!=null&&a(t,["endpoint"],o),t}function Yo(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["state"]);o!=null&&a(t,["state"],Io(i,o));const s=r(e,["createTime"]);s!=null&&a(t,["createTime"],s);const l=r(e,["tuningTask","startTime"]);l!=null&&a(t,["startTime"],l);const u=r(e,["tuningTask","completeTime"]);u!=null&&a(t,["endTime"],u);const d=r(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const c=r(e,["description"]);c!=null&&a(t,["description"],c);const f=r(e,["baseModel"]);f!=null&&a(t,["baseModel"],f);const m=r(e,["_self"]);m!=null&&a(t,["tunedModel"],gm(i,m));const h=r(e,["distillationSpec"]);h!=null&&a(t,["distillationSpec"],h);const g=r(e,["experiment"]);g!=null&&a(t,["experiment"],g);const y=r(e,["labels"]);y!=null&&a(t,["labels"],y);const v=r(e,["pipelineJob"]);v!=null&&a(t,["pipelineJob"],v);const T=r(e,["serviceAccount"]);T!=null&&a(t,["serviceAccount"],T);const C=r(e,["tunedModelDisplayName"]);return C!=null&&a(t,["tunedModelDisplayName"],C),t}function ym(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=r(e,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Yo(i,l))),a(t,["tuningJobs"],s)}return t}function vm(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["metadata"]);o!=null&&a(t,["metadata"],o);const s=r(e,["done"]);s!=null&&a(t,["done"],s);const l=r(e,["error"]);return l!=null&&a(t,["error"],l),t}function xm(i,e){const t={},n=r(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const o=r(e,["epoch"]);o!=null&&a(t,["epoch"],o);const s=r(e,["step"]);s!=null&&a(t,["step"],s);const l=r(e,["endpoint"]);return l!=null&&a(t,["endpoint"],l),t}function Cm(i,e){const t={},n=r(e,["model"]);n!=null&&a(t,["model"],n);const o=r(e,["endpoint"]);o!=null&&a(t,["endpoint"],o);const s=r(e,["checkpoints"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>xm(i,u))),a(t,["checkpoints"],l)}return t}function an(i,e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const o=r(e,["state"]);o!=null&&a(t,["state"],Io(i,o));const s=r(e,["createTime"]);s!=null&&a(t,["createTime"],s);const l=r(e,["startTime"]);l!=null&&a(t,["startTime"],l);const u=r(e,["endTime"]);u!=null&&a(t,["endTime"],u);const d=r(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const c=r(e,["error"]);c!=null&&a(t,["error"],c);const f=r(e,["description"]);f!=null&&a(t,["description"],f);const m=r(e,["baseModel"]);m!=null&&a(t,["baseModel"],m);const h=r(e,["tunedModel"]);h!=null&&a(t,["tunedModel"],Cm(i,h));const g=r(e,["supervisedTuningSpec"]);g!=null&&a(t,["supervisedTuningSpec"],g);const y=r(e,["tuningDataStats"]);y!=null&&a(t,["tuningDataStats"],y);const v=r(e,["encryptionSpec"]);v!=null&&a(t,["encryptionSpec"],v);const T=r(e,["partnerModelTuningSpec"]);T!=null&&a(t,["partnerModelTuningSpec"],T);const C=r(e,["distillationSpec"]);C!=null&&a(t,["distillationSpec"],C);const k=r(e,["experiment"]);k!=null&&a(t,["experiment"],k);const w=r(e,["labels"]);w!=null&&a(t,["labels"],w);const A=r(e,["pipelineJob"]);A!=null&&a(t,["pipelineJob"],A);const P=r(e,["serviceAccount"]);P!=null&&a(t,["serviceAccount"],P);const E=r(e,["tunedModelDisplayName"]);return E!=null&&a(t,["tunedModelDisplayName"],E),t}function Tm(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=r(e,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>an(i,l))),a(t,["tuningJobs"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _m extends $e{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new wt(qe.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const n=await this.tuneMldevInternal(t);let o="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?o=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(o=n.name.split("/operations/")[0]),{name:o,state:Xt.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=um(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>an(this.apiClient,f))}else{const c=nm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>Yo(this.apiClient,f))}}async listInternal(e){var t,n,o,s;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=dm(this.apiClient,e);return u=D("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const m=Tm(this.apiClient,f),h=new Ii;return Object.assign(h,m),h})}else{const c=om(this.apiClient,e);return u=D("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>{const m=ym(this.apiClient,f),h=new Ii;return Object.assign(h,m),h})}}async tuneInternal(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=hm(this.apiClient,e);return s=D("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>an(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lm(this.apiClient,e);return s=D("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>vm(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class km{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Sm=1024*1024*8,Em=3,wm=1e3,Am=2,Dt="x-goog-upload-status";async function Mm(i,e,t){var n,o,s;let l=0,u=0,d=new Qt(new Response),c="upload";for(l=i.size;u<l;){const m=Math.min(Sm,l-u),h=i.slice(u,u+m);u+m>=l&&(c+=", finalize");let g=0,y=wm;for(;g<Em&&(d=await t.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((n=d?.headers)===null||n===void 0)&&n[Dt]));)g++,await Im(y),y=y*Am;if(u+=m,((o=d?.headers)===null||o===void 0?void 0:o[Dt])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await d?.json();if(((s=d?.headers)===null||s===void 0?void 0:s[Dt])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function bm(i){return{size:i.size,type:i.type}}function Im(i){return new Promise(e=>setTimeout(e,i))}class Nm{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mm(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bm(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rm{create(e,t,n){return new Pm(e,t,n)}}class Pm{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const no="x-goog-api-key";class Dm{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(no)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(no,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lm="gl-node/";class ke{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=$s(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const o=new Dm(this.apiKey);this.apiClient=new Xf({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Lm+"web",uploader:new Nm,downloader:new km}),this.models=new mp(this.apiClient),this.live=new up(this.apiClient,o,new Rm),this.chats=new fl(this.models,this.apiClient),this.caches=new ul(this.apiClient),this.files=new El(this.apiClient),this.operations=new Ep(this.apiClient),this.authTokens=new tm(this.apiClient),this.tunings=new _m(this.apiClient)}}const Vm=i=>new Promise(e=>setTimeout(e,i));async function ye(i,e=3,t=1e3){try{return await i()}catch(n){if((n?.message?.includes("429")||n?.status===429||n?.message?.includes("RESOURCE_EXHAUSTED"))&&e>0)return console.warn(`Rate limit reached (429). Retrying in ${t}ms... (${e} retries left)`),await Vm(t),ye(i,e-1,t*2);throw n}}async function Zo(i){const e=`abkhas_real_img_${i.replace(/\s+/g,"_").toLowerCase()}`,t=localStorage.getItem(e);if(t)return t;try{const n=new ke({apiKey:void 0}),s=(await ye(async()=>await n.models.generateContent({model:"gemini-3-flash-preview",contents:`Find the official, high-resolution direct image URL for the product: "${i}". 
        Look into official stores in Saudi Arabia like Jarir Bookstore, Noon, Amazon.sa, or the official brand website. 
        Return ONLY the direct URL of the image file (ending in .jpg, .png, or .webp). Do not include any text, just the link.`,config:{tools:[{googleSearch:{}}]}}))).text?.trim();return s&&s.startsWith("http")?(localStorage.setItem(e,s),s):await io(i)}catch(n){return console.error("Searching for real image failed after retries:",n),await io(i)}}async function io(i){const e=`abkhas_gen_img_${i.replace(/\s+/g,"_").toLowerCase()}`,t=localStorage.getItem(e);if(t)return t;try{const n=new ke({apiKey:void 0}),o=`Professional high-end studio product photography of ${i}, clean white background, commercial lighting, 8k resolution.`,s=await ye(async()=>await n.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:o}]},config:{imageConfig:{aspectRatio:"1:1"}}}));for(const l of s.candidates[0].content.parts)if(l.inlineData){const u=`data:image/png;base64,${l.inlineData.data}`;return localStorage.setItem(e,u),u}return null}catch(n){return console.error("Image generation failed after retries:",n),null}}async function Fm(i,e){try{const t=new ke({apiKey:void 0}),n=`أنت "أبخص" خبير السوق السعودي. التفضيلات: ميزانية ${e.budget_range.max}، استخدام ${e.use_case}. 
    لكل منتج من: ${i.map(s=>s.name).join(", ")}، قدم 5 أسباب تقنية عميقة ومقنعة لماذا يناسب هذا المستخدم، بالإضافة إلى "نصيحة أبخص" (pro_tip).
    النتيجة JSON: {"product_id": {"reasons": [".."], "pro_tip": ".."}}`,o=await ye(async()=>await t.models.generateContent({model:"gemini-3-flash-preview",contents:n,config:{responseMimeType:"application/json"}}));return JSON.parse(o.text||"{}")}catch(t){return console.error("Batch recommendations failed after retries:",t),{}}}async function Um(i,e){try{const t=new ke({apiKey:void 0}),n=`حلل ${i.name} لمستخدم سعودي بميزانية ${e.budget_range.max}. النتيجة JSON: {"summary": "..", "points": [".."], "thinking": "..", "score": 0.95, "pro_tip": "..", "groundingSources": [{"title": "..", "url": ".."}]}`,o=await ye(async()=>await t.models.generateContent({model:"gemini-3-flash-preview",contents:n,config:{responseMimeType:"application/json",tools:[{googleSearch:{}}]}})),s=JSON.parse(o.text||"{}"),u=(o.candidates?.[0]?.groundingMetadata?.groundingChunks||[]).map(d=>({title:d.web?.title||"رابط خارجي",url:d.web?.uri})).filter(d=>d.url);return{...s,groundingSources:u}}catch(t){return console.error("Smart analysis failed after retries:",t),{summary:"أبخص ينصح بهذا كخيار متوازن.",points:["متوافق مع ميزانيتك."],groundingSources:[]}}}async function ag(i,e){try{const t=new ke({apiKey:void 0});return(await ye(async()=>await t.models.generateContent({model:"gemini-3-flash-preview",contents:`أنت "أبخص". سؤال السائل: ${i}`,config:{tools:[{googleSearch:{}}]}}))).text||"أبخص مشغول حالياً."}catch(t){return console.error("Chat failed after retries:",t),"أبخص مشغول حالياً بسبب ضغط الطلبات."}}async function qm(i){try{const e=new ke({apiKey:void 0});return(await ye(async()=>await e.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{text:"ما هو موديل هذا الجهاز؟"},{inlineData:{mimeType:"image/jpeg",data:i}}]}}))).text?.trim()||null}catch(e){return console.error("Visual identification failed after retries:",e),null}}async function $m(i,e,t){try{const n=new ke({apiKey:void 0});return((await ye(async()=>await n.models.generateContent({model:"gemini-2.5-flash",contents:`Find physical stores in Saudi Arabia that sell ${i} near my coordinates.`,config:{tools:[{googleMaps:{}}],toolConfig:{retrievalConfig:{latLng:{latitude:e,longitude:t}}}}}))).candidates?.[0]?.groundingMetadata?.groundingChunks||[]).filter(l=>l.maps).map(l=>({name:l.maps.title,uri:l.maps.uri}))}catch(n){return console.error("Maps grounding error after retries:",n),[]}}const Ko=()=>({trigger:(e="light")=>{if(navigator.vibrate)switch(e){case"light":navigator.vibrate(10);break;case"medium":navigator.vibrate(20);break;case"heavy":navigator.vibrate(50);break;case"success":navigator.vibrate([20,30,20]);break;case"error":navigator.vibrate([50,50,50]);break}}}),Xo=()=>p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-gray-100 dark:border-slate-700 overflow-hidden animate-pulse",children:[p.jsx("div",{className:"pt-[100%] bg-gray-100 dark:bg-slate-700"}),p.jsxs("div",{className:"p-4 space-y-3",children:[p.jsx("div",{className:"h-2 w-1/4 bg-gray-200 dark:bg-slate-600 rounded"}),p.jsx("div",{className:"h-4 w-full bg-gray-200 dark:bg-slate-600 rounded"}),p.jsx("div",{className:"h-4 w-2/3 bg-gray-200 dark:bg-slate-600 rounded"}),p.jsxs("div",{className:"pt-4 flex items-baseline gap-2",children:[p.jsx("div",{className:"h-6 w-20 bg-gray-200 dark:bg-slate-600 rounded"}),p.jsx("div",{className:"h-3 w-8 bg-gray-200 dark:bg-slate-600 rounded"})]})]})]}),Bm=()=>p.jsxs("div",{className:"space-y-8 animate-pulse",children:[p.jsx("div",{className:"h-64 md:h-80 bg-gray-200 dark:bg-slate-700 rounded-3xl"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-slate-700 rounded-lg"}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(i=>p.jsx("div",{className:"h-16 bg-gray-200 dark:bg-slate-700 rounded-2xl"},i))})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"h-8 w-64 bg-gray-200 dark:bg-slate-700 rounded-lg"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(i=>p.jsxs("div",{className:"space-y-4",children:[p.jsx(Xo,{}),p.jsx("div",{className:"h-20 bg-gray-100 dark:bg-slate-700/50 rounded-xl"})]},i))})]})]}),Gm=()=>p.jsxs("div",{className:"space-y-8 animate-pulse",children:[p.jsx("div",{className:"h-8 w-32 bg-gray-200 dark:bg-slate-700 rounded"}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-slate-700 rounded-3xl"}),p.jsx("div",{className:"flex gap-4",children:[1,2,3].map(i=>p.jsx("div",{className:"w-20 h-20 bg-gray-200 dark:bg-slate-700 rounded-2xl"},i))}),p.jsx("div",{className:"h-64 bg-gray-200 dark:bg-slate-700 rounded-3xl mt-8"})]}),p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-slate-700 rounded"}),p.jsx("div",{className:"h-10 w-full bg-gray-200 dark:bg-slate-700 rounded"}),p.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-slate-700 rounded"})]}),p.jsx("div",{className:"h-32 bg-gray-100 dark:bg-slate-700 rounded-3xl"}),p.jsx("div",{className:"space-y-4",children:[1,2].map(i=>p.jsx("div",{className:"h-24 bg-gray-100 dark:bg-slate-700 rounded-2xl"},i))})]})]})]}),lg=({onNavigate:i,userPrefs:e,lang:t})=>{const{updatePrefs:n}=je(),[o,s]=N.useState({searchQuery:"",recommendations:[],isLoading:!0,isExplaining:!1,isVisualSearching:!1,feedbackSubmitted:!1,trainingProgress:82}),l=N.useRef(null),u=St[t],{trigger:d}=Ko(),c=C=>s(k=>({...k,searchQuery:C})),f=C=>s(k=>({...k,recommendations:C})),m=C=>s(k=>({...k,isLoading:C})),h=C=>s(k=>({...k,isExplaining:C})),g=C=>s(k=>({...k,isVisualSearching:C}));N.useEffect(()=>{(async()=>{const k=gn.map(A=>({...A,score:To(A,e)})).sort((A,P)=>(P.score||0)-(A.score||0)).slice(0,3),w=k.map(A=>({product:A,score:A.score||0,why_this:[t==="ar"?"جاري تحليل المواصفات...":"Analyzing specs..."],pro_tip:""}));f(w),m(!1),h(!0);try{const[A]=await Promise.all([Fm(k,e)]);f(P=>P.map(E=>({...E,why_this:A[E.product.product_id]?.reasons||[t==="ar"?"خيار ممتاز بناءً على الأداء والمراجعات.":"Excellent choice based on performance."],pro_tip:A[E.product.product_id]?.pro_tip||""})));for(const P of k)try{const E=await Zo(P.name);E&&f(R=>R.map(q=>q.product.product_id===P.product_id?{...q,product:{...q.product,thumbnail_url:E}}:q))}catch(E){console.error("🟥 CRITICAL_ERROR_BOUNDARY: Image fetch failed for",P.name,E)}}catch(A){console.error("🟥 CRITICAL_ERROR_BOUNDARY: AI Explanation background fetch failed",A)}finally{h(!1)}})()},[e.budget_range.max,e.use_case,e.priority,t]);const y=()=>l.current?.click(),v=async C=>{const k=C.target.files?.[0];if(k){g(!0),d("medium");try{const w=new FileReader;w.onloadend=async()=>{try{const A=w.result.split(",")[1],P=await qm(A);g(!1),P?i("search",{q:P}):alert(u.noResult)}catch(A){console.error("🟥 CRITICAL_ERROR_BOUNDARY: Image identification failed:",A),g(!1),alert(u.noResult)}},w.onerror=()=>{console.error("🟥 CRITICAL_ERROR_BOUNDARY: File read error"),g(!1),alert(u.noResult)},w.readAsDataURL(k)}catch(w){console.error("🟥 CRITICAL_ERROR_BOUNDARY: File handling error:",w),g(!1),alert(u.noResult)}}};if(isLoading)return p.jsx(Bm,{});const T=[{id:"phones",name:u.phones,icon:p.jsx(Xe,{size:20}),active:!0},{id:"laptops",name:u.laptops,icon:p.jsx(qr,{size:20})},{id:"tvs",name:u.tvs,icon:p.jsx(Qr,{size:20})},{id:"appliances",name:u.appliances,icon:p.jsx(Fr,{size:20})}];return p.jsxs("div",{className:"space-y-12 pb-12 transition-all animate-in fade-in duration-500",children:[p.jsxs("section",{className:"bg-gradient-to-br from-indigo-700 via-indigo-600 to-blue-600 rounded-[3rem] p-10 md:p-14 text-white relative overflow-hidden shadow-2xl shadow-indigo-200 dark:shadow-none",children:[p.jsxs("div",{className:"relative z-10 md:w-3/4 text-start",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-md px-4 py-2 rounded-full mb-8 border border-white/10",children:[p.jsx(Xr,{size:16,className:"text-blue-200"}),p.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:t==="ar"?"محرك أبخص 3.0: مفعّل":"Abkhas Engine 3.0: Active"})]}),p.jsx("h1",{className:"text-5xl md:text-7xl font-black mb-8 leading-tight tracking-tighter",children:u.heroTitle}),p.jsx("p",{className:"text-indigo-50 text-xl mb-12 max-w-2xl font-medium leading-relaxed opacity-90",children:u.heroSub}),p.jsxs("div",{className:"relative max-w-2xl group",children:[p.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-3xl blur opacity-25 group-hover:opacity-50 transition duration-1000"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"text",placeholder:u.searchPlaceholder,className:"w-full bg-white text-gray-900 rounded-[2rem] py-6 ps-16 pe-40 focus:outline-none focus:ring-4 focus:ring-indigo-400/50 shadow-2xl transition-all font-bold",value:searchQuery,onChange:C=>c(C.target.value),onKeyDown:C=>C.key==="Enter"&&i("search",{q:searchQuery})}),p.jsx(yo,{className:"absolute start-6 top-1/2 -translate-y-1/2 text-gray-400",size:24}),p.jsxs("div",{className:"absolute end-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[p.jsx("button",{onClick:y,className:"p-3 bg-gray-50 text-indigo-600 rounded-2xl hover:bg-indigo-50 transition-colors shadow-sm",title:u.visualSearch,children:isVisualSearching?p.jsx(hn,{size:24,className:"animate-spin"}):p.jsx(ho,{size:24})}),p.jsx("button",{onClick:()=>i("search",{q:searchQuery}),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-4 rounded-2xl transition-all font-black text-sm shadow-lg",children:u.searchBtn})]}),p.jsx("input",{type:"file",ref:l,onChange:v,accept:"image/*",className:"hidden"})]})]})]}),p.jsx("div",{className:"absolute -end-20 -bottom-20 opacity-10 rotate-12 pointer-events-none",children:p.jsx(Jr,{size:600})})]}),p.jsxs("section",{className:"px-2",children:[p.jsxs("div",{className:"flex justify-between items-end mb-6",children:[p.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:u.categoriesTitle}),p.jsxs("button",{className:"text-indigo-600 font-black text-sm hover:underline flex items-center gap-1 uppercase tracking-widest",children:[t==="ar"?"كل الفئات":"All Categories",t==="ar"?p.jsx(go,{size:16}):p.jsx(kt,{size:16})]})]}),p.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:T.map(C=>p.jsxs("div",{className:`group flex items-center p-5 rounded-[1.8rem] border transition-all cursor-pointer transform hover:-translate-y-1 hover:shadow-xl ${C.active?"bg-white dark:bg-slate-800 border-indigo-200 dark:border-indigo-800 ring-2 ring-indigo-50 dark:ring-indigo-900/10":"bg-white dark:bg-slate-800 border-gray-100 dark:border-slate-700 hover:border-indigo-200 shadow-sm"}`,children:[p.jsx("div",{className:`p-3.5 rounded-2xl ms-0 me-3 transition-all ${C.active?"bg-indigo-600 text-white shadow-lg":"bg-gray-50 dark:bg-slate-700 text-gray-400 group-hover:bg-indigo-50 group-hover:text-indigo-500"}`,children:C.icon}),p.jsx("span",{className:`font-black text-sm uppercase tracking-widest ${C.active?"text-indigo-700 dark:text-indigo-400":"text-gray-600 dark:text-slate-400"}`,children:C.name})]},C.id))})]}),p.jsxs("section",{className:"bg-gradient-to-br from-slate-900 to-indigo-950 rounded-[3rem] p-12 text-white shadow-2xl relative overflow-hidden border border-amber-500/20",children:[p.jsx("div",{className:"absolute top-0 end-0 p-8 opacity-10",children:p.jsx(Lr,{size:200,className:"text-amber-400"})}),p.jsx("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-10",children:p.jsxs("div",{className:"flex-1 text-start",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-500 text-white px-4 py-1.5 rounded-full mb-6 font-black text-[10px] uppercase tracking-widest shadow-lg shadow-amber-500/20",children:[p.jsx(pt,{size:14,className:"fill-current"})," ",u.proBadge]}),p.jsx("h3",{className:"text-3xl font-black mb-4 tracking-tight leading-tight",children:u.upgradePro}),p.jsx("p",{className:"text-slate-400 text-lg mb-8 max-w-lg font-medium italic",children:t==="ar"?"وفر أكثر مع ميزات الذكاء الاصطناعي المتقدمة وتنبيهات الأسعار اللحظية.":"Save more with advanced AI features and real-time price alerts."}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[p.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-4 rounded-2xl border border-white/5",children:[p.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg text-amber-500",children:p.jsx(Ar,{size:18})}),p.jsx("span",{className:"text-xs font-bold",children:u.proFeature1})]}),p.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-4 rounded-2xl border border-white/5",children:[p.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg text-amber-500",children:p.jsx(Kr,{size:18})}),p.jsx("span",{className:"text-xs font-bold",children:u.proFeature2})]})]}),p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsxs("button",{onClick:()=>n({subscription:"pro"}),className:"bg-amber-500 hover:bg-amber-600 text-white px-10 py-4 rounded-2xl font-black text-sm shadow-xl shadow-amber-500/10 transition-all active:scale-95 flex items-center gap-3",children:[p.jsx(Dr,{size:18})," ",t==="ar"?"اشترك الآن":"Subscribe Now"]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-2xl font-black text-amber-400",children:u.proPrice}),p.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-black tracking-widest",children:t==="ar"?"قابلة للإلغاء أي وقت":"Cancel anytime"})]})]})]})})]}),p.jsxs("section",{children:[p.jsx("div",{className:"flex items-center justify-between mb-8 px-2",children:p.jsxs("div",{className:"flex items-center gap-4 text-start",children:[p.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-500 p-3 rounded-2xl text-white shadow-lg",children:p.jsx(Yr,{size:24})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:u.aiRecTitle}),p.jsxs("p",{className:"text-xs font-bold text-gray-400 mt-1 uppercase tracking-widest",children:[t==="ar"?"تحليل لحظي لـ ":"Live analysis for "," ",u[e.use_case]]})]})]})}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:recommendations.map((C,k)=>p.jsx("div",{className:"animate-in zoom-in duration-500",style:{animationDelay:`${k*100}ms`},children:p.jsx(Co,{product:C.product,onClick:()=>i("product",{id:C.product.product_id}),lang:t,aiReasons:C.why_this,isExplaining})},C.product.product_id))})]})]})},ze=i=>i.toLowerCase().trim().replace(/[أإآ]/g,"ا").replace(/ة/g,"ه").replace(/ى/g,"ي").replace(/[\u064B-\u065F\u0670]/g,""),Hm=(i,e)=>{if(i.length===0)return e.length;if(e.length===0)return i.length;const t=[];for(let n=0;n<=e.length;n++)t[n]=[n];for(let n=0;n<=i.length;n++)t[0][n]=n;for(let n=1;n<=e.length;n++)for(let o=1;o<=i.length;o++)e.charAt(n-1)===i.charAt(o-1)?t[n][o]=t[n-1][o-1]:t[n][o]=Math.min(t[n-1][o-1]+1,t[n][o-1]+1,t[n-1][o]+1);return t[e.length][i.length]},Om=(i,e)=>{const n=ze(i).split(/\s+/);let o=0;const s=[{text:ze(e.name),weight:1},{text:ze(e.brand),weight:.6},{text:ze(e.category),weight:.4},...e.tags.map(l=>({text:ze(l),weight:.5}))];for(const l of n){if(l.length<2)continue;let u=0;for(const d of s)if(d.text.includes(l))u=Math.max(u,d.weight);else{const c=d.text.split(/\s+/);for(const f of c){const m=Hm(l,f),h=l.length<=4?1:2;if(m<=h){const g=1-m/Math.max(l.length,f.length);u=Math.max(u,g*d.weight*.8)}}}o+=u}return o/n.length},ug=({query:i,onNavigate:e,userPrefs:t,lang:n})=>{const[o,s]=N.useState([]),[l,u]=N.useState("score"),[d,c]=N.useState(!0),f=St[n];N.useEffect(()=>{(async()=>{try{c(!0),await new Promise(y=>setTimeout(y,400));const g=gn.map(y=>{const v=Om(i,y),T=To(y,t);return{...y,relevance:v,score:T,combinedScore:v*.7+T*.3}}).filter(y=>y.relevance>.15);l==="score"?g.sort((y,v)=>v.combinedScore-y.combinedScore):l==="price_asc"?g.sort((y,v)=>(y.offers?.[0]?.price||0)-(v.offers?.[0]?.price||0)):l==="rating"&&g.sort((y,v)=>(v.offers?.[0]?.rating_average||0)-(y.offers?.[0]?.rating_average||0)),s(g)}catch(g){console.error("🟥 CRITICAL_ERROR_BOUNDARY: Search failed:",g),s([])}finally{c(!1)}})()},[i,l,t]);const m=o.length>0&&o.every(h=>h.relevance<.9);return p.jsxs("div",{className:"flex flex-col md:flex-row gap-8 pb-12 animate-in fade-in duration-500",children:[p.jsx("aside",{className:"w-full md:w-64 space-y-6",children:p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-slate-700 transition-colors",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h3",{className:"font-bold text-gray-800 dark:text-white tracking-tight",children:f.filterTitle}),p.jsx(Wr,{size:18,className:"text-gray-400"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-black text-gray-400 block mb-2 uppercase tracking-wider",children:f.brand}),p.jsx("div",{className:"space-y-2",children:["Apple","Samsung","Google","Nothing"].map(h=>p.jsxs("label",{className:"flex items-center cursor-pointer group",children:[p.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded-lg border-gray-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500"}),p.jsx("span",{className:"mx-2 text-sm font-bold text-gray-600 dark:text-slate-400 group-hover:text-indigo-600 transition-colors",children:h})]},h))})]}),p.jsxs("div",{className:"pt-4 border-t border-gray-50 dark:border-slate-700",children:[p.jsx("label",{className:"text-xs font-black text-gray-400 block mb-2 uppercase tracking-wider",children:f.budget}),p.jsx("input",{type:"range",min:"1000",max:"6000",step:"100",className:"w-full h-2 bg-gray-100 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-indigo-600"}),p.jsxs("div",{className:"flex justify-between text-[10px] text-gray-400 mt-2 font-black",children:[p.jsx("span",{children:"1,000"}),p.jsx("span",{children:"6,000+"})]})]})]})]})}),p.jsxs("main",{className:"flex-1",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[p.jsxs("div",{className:"text-start",children:[p.jsxs("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:[n==="ar"?"نتائج البحث عن: ":"Search results for: ",p.jsxs("span",{className:"text-indigo-600 font-black italic",children:['"',i,'"']}),!d&&p.jsxs("span",{className:"text-gray-400 text-sm font-bold mx-3",children:["(",o.length,")"]})]}),m&&!d&&p.jsxs("p",{className:"text-[10px] font-bold text-indigo-500 flex items-center gap-1 mt-1 uppercase tracking-widest",children:[p.jsx(Ur,{size:12})," ",n==="ar"?"أبخص يتوقع أنك تقصد هذه النتائج رغم الخطأ الإملائي":"Abkhas matched these results despite potential typos"]})]}),p.jsxs("div",{className:"relative inline-block text-right",children:[p.jsxs("select",{className:"bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl ps-10 pe-12 py-2.5 text-xs font-black text-gray-700 dark:text-slate-300 appearance-none focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm",value:l,onChange:h=>u(h.target.value),children:[p.jsx("option",{value:"score",children:f.compatibility}),p.jsx("option",{value:"price_asc",children:f.cheapest}),p.jsx("option",{value:"rating",children:f.topRated})]}),p.jsx(Nr,{size:14,className:`absolute ${n==="ar"?"left-3":"right-3"} top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none`})]})]}),d?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(h=>p.jsx(Xo,{},h))}):o.length>0?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(h=>p.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500",children:p.jsx(Co,{product:h,lang:n,onClick:g=>e("product",{id:g})})},h.product_id))}):p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[3rem] p-16 text-center border border-dashed border-gray-200 dark:border-slate-700 shadow-sm",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gray-50 dark:bg-slate-700 rounded-[2rem] mb-6 shadow-inner",children:p.jsx(yo,{size:40,className:"text-gray-300"})}),p.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white mb-3",children:f.noResult}),p.jsx("p",{className:"text-gray-500 dark:text-slate-400 max-w-sm mx-auto font-medium",children:n==="ar"?"أبخص ما لقى شيء يطابق بحثك، جرب تبحث بكلمات أبسط أو عدل الميزانية.":"Abkhas couldn't find a match. Try simpler keywords or adjust your filters."})]})]})]})};var Lt,oo;function zm(){if(oo)return Lt;oo=1;var i=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",n=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function o(s,l){if(s===l)return!0;if(s&&l&&typeof s=="object"&&typeof l=="object"){if(s.constructor!==l.constructor)return!1;var u,d,c;if(Array.isArray(s)){if(u=s.length,u!=l.length)return!1;for(d=u;d--!==0;)if(!o(s[d],l[d]))return!1;return!0}var f;if(e&&s instanceof Map&&l instanceof Map){if(s.size!==l.size)return!1;for(f=s.entries();!(d=f.next()).done;)if(!l.has(d.value[0]))return!1;for(f=s.entries();!(d=f.next()).done;)if(!o(d.value[1],l.get(d.value[0])))return!1;return!0}if(t&&s instanceof Set&&l instanceof Set){if(s.size!==l.size)return!1;for(f=s.entries();!(d=f.next()).done;)if(!l.has(d.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(l)){if(u=s.length,u!=l.length)return!1;for(d=u;d--!==0;)if(s[d]!==l[d])return!1;return!0}if(s.constructor===RegExp)return s.source===l.source&&s.flags===l.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof l.valueOf=="function")return s.valueOf()===l.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof l.toString=="function")return s.toString()===l.toString();if(c=Object.keys(s),u=c.length,u!==Object.keys(l).length)return!1;for(d=u;d--!==0;)if(!Object.prototype.hasOwnProperty.call(l,c[d]))return!1;if(i&&s instanceof Element)return!1;for(d=u;d--!==0;)if(!((c[d]==="_owner"||c[d]==="__v"||c[d]==="__o")&&s.$$typeof)&&!o(s[c[d]],l[c[d]]))return!1;return!0}return s!==s&&l!==l}return Lt=function(l,u){try{return o(l,u)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},Lt}var Jm=zm();const Wm=fn(Jm);var Vt,ro;function Ym(){if(ro)return Vt;ro=1;var i=function(e,t,n,o,s,l,u,d){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,o,s,l,u,d],m=0;c=new Error(t.replace(/%s/g,function(){return f[m++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};return Vt=i,Vt}var Zm=Ym();const so=fn(Zm);var Ft,ao;function Km(){return ao||(ao=1,Ft=function(e,t,n,o){var s=n?n.call(o,e,t):void 0;if(s!==void 0)return!!s;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var l=Object.keys(e),u=Object.keys(t);if(l.length!==u.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(t),c=0;c<l.length;c++){var f=l[c];if(!d(f))return!1;var m=e[f],h=t[f];if(s=n?n.call(o,m,h,f):void 0,s===!1||s===void 0&&m!==h)return!1}return!0}),Ft}var Xm=Km();const Qm=fn(Xm);var Qo=(i=>(i.BASE="base",i.BODY="body",i.HEAD="head",i.HTML="html",i.LINK="link",i.META="meta",i.NOSCRIPT="noscript",i.SCRIPT="script",i.STYLE="style",i.TITLE="title",i.FRAGMENT="Symbol(react.fragment)",i))(Qo||{}),Ut={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},lo=Object.values(Qo),kn={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},jm=Object.entries(kn).reduce((i,[e,t])=>(i[t]=e,i),{}),te="data-rh",Re={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Pe=(i,e)=>{for(let t=i.length-1;t>=0;t-=1){const n=i[t];if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}return null},eh=i=>{let e=Pe(i,"title");const t=Pe(i,Re.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const n=Pe(i,Re.DEFAULT_TITLE);return e||n||void 0},th=i=>Pe(i,Re.ON_CHANGE_CLIENT_STATE)||(()=>{}),qt=(i,e)=>e.filter(t=>typeof t[i]<"u").map(t=>t[i]).reduce((t,n)=>({...t,...n}),{}),nh=(i,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,n)=>{if(!t.length){const o=Object.keys(n);for(let s=0;s<o.length;s+=1){const u=o[s].toLowerCase();if(i.indexOf(u)!==-1&&n[u])return t.concat(n)}}return t},[]),ih=i=>console&&typeof console.warn=="function"&&console.warn(i),Je=(i,e,t)=>{const n={};return t.filter(o=>Array.isArray(o[i])?!0:(typeof o[i]<"u"&&ih(`Helmet: ${i} should be of type "Array". Instead found type "${typeof o[i]}"`),!1)).map(o=>o[i]).reverse().reduce((o,s)=>{const l={};s.filter(d=>{let c;const f=Object.keys(d);for(let h=0;h<f.length;h+=1){const g=f[h],y=g.toLowerCase();e.indexOf(y)!==-1&&!(c==="rel"&&d[c].toLowerCase()==="canonical")&&!(y==="rel"&&d[y].toLowerCase()==="stylesheet")&&(c=y),e.indexOf(g)!==-1&&(g==="innerHTML"||g==="cssText"||g==="itemprop")&&(c=g)}if(!c||!d[c])return!1;const m=d[c].toLowerCase();return n[c]||(n[c]={}),l[c]||(l[c]={}),n[c][m]?!1:(l[c][m]=!0,!0)}).reverse().forEach(d=>o.push(d));const u=Object.keys(l);for(let d=0;d<u.length;d+=1){const c=u[d],f={...n[c],...l[c]};n[c]=f}return o},[]).reverse()},oh=(i,e)=>{if(Array.isArray(i)&&i.length){for(let t=0;t<i.length;t+=1)if(i[t][e])return!0}return!1},rh=i=>({baseTag:nh(["href"],i),bodyAttributes:qt("bodyAttributes",i),defer:Pe(i,Re.DEFER),encode:Pe(i,Re.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:qt("htmlAttributes",i),linkTags:Je("link",["rel","href"],i),metaTags:Je("meta",["name","charset","http-equiv","property","itemprop"],i),noscriptTags:Je("noscript",["innerHTML"],i),onChangeClientState:th(i),scriptTags:Je("script",["src","innerHTML"],i),styleTags:Je("style",["cssText"],i),title:eh(i),titleAttributes:qt("titleAttributes",i),prioritizeSeoTags:oh(i,Re.PRIORITIZE_SEO_TAGS)}),jo=i=>Array.isArray(i)?i.join(""):i,sh=(i,e)=>{const t=Object.keys(i);for(let n=0;n<t.length;n+=1)if(e[t[n]]&&e[t[n]].includes(i[t[n]]))return!0;return!1},$t=(i,e)=>Array.isArray(i)?i.reduce((t,n)=>(sh(n,e)?t.priority.push(n):t.default.push(n),t),{priority:[],default:[]}):{default:i,priority:[]},uo=(i,e)=>({...i,[e]:void 0}),ah=["noscript","script","style"],ln=(i,e=!0)=>e===!1?String(i):String(i).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),er=i=>Object.keys(i).reduce((e,t)=>{const n=typeof i[t]<"u"?`${t}="${i[t]}"`:`${t}`;return e?`${e} ${n}`:n},""),lh=(i,e,t,n)=>{const o=er(t),s=jo(e);return o?`<${i} ${te}="true" ${o}>${ln(s,n)}</${i}>`:`<${i} ${te}="true">${ln(s,n)}</${i}>`},uh=(i,e,t=!0)=>e.reduce((n,o)=>{const s=o,l=Object.keys(s).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,f)=>{const m=typeof s[f]>"u"?f:`${f}="${ln(s[f],t)}"`;return c?`${c} ${m}`:m},""),u=s.innerHTML||s.cssText||"",d=ah.indexOf(i)===-1;return`${n}<${i} ${te}="true" ${l}${d?"/>":`>${u}</${i}>`}`},""),tr=(i,e={})=>Object.keys(i).reduce((t,n)=>{const o=kn[n];return t[o||n]=i[n],t},e),ch=(i,e,t)=>{const n={key:e,[te]:!0},o=tr(t,n);return[fe.createElement("title",o,e)]},ct=(i,e)=>e.map((t,n)=>{const o={key:n,[te]:!0};return Object.keys(t).forEach(s=>{const u=kn[s]||s;if(u==="innerHTML"||u==="cssText"){const d=t.innerHTML||t.cssText;o.dangerouslySetInnerHTML={__html:d}}else o[u]=t[s]}),fe.createElement(i,o)}),Q=(i,e,t=!0)=>{switch(i){case"title":return{toComponent:()=>ch(i,e.title,e.titleAttributes),toString:()=>lh(i,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>tr(e),toString:()=>er(e)};default:return{toComponent:()=>ct(i,e),toString:()=>uh(i,e,t)}}},dh=({metaTags:i,linkTags:e,scriptTags:t,encode:n})=>{const o=$t(i,Ut.meta),s=$t(e,Ut.link),l=$t(t,Ut.script);return{priorityMethods:{toComponent:()=>[...ct("meta",o.priority),...ct("link",s.priority),...ct("script",l.priority)],toString:()=>`${Q("meta",o.priority,n)} ${Q("link",s.priority,n)} ${Q("script",l.priority,n)}`},metaTags:o.default,linkTags:s.default,scriptTags:l.default}},fh=i=>{const{baseTag:e,bodyAttributes:t,encode:n=!0,htmlAttributes:o,noscriptTags:s,styleTags:l,title:u="",titleAttributes:d,prioritizeSeoTags:c}=i;let{linkTags:f,metaTags:m,scriptTags:h}=i,g={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:g,linkTags:f,metaTags:m,scriptTags:h}=dh(i)),{priority:g,base:Q("base",e,n),bodyAttributes:Q("bodyAttributes",t,n),htmlAttributes:Q("htmlAttributes",o,n),link:Q("link",f,n),meta:Q("meta",m,n),noscript:Q("noscript",s,n),script:Q("script",h,n),style:Q("style",l,n),title:Q("title",{title:u,titleAttributes:d},n)}},un=fh,rt=[],nr=!!(typeof window<"u"&&window.document&&window.document.createElement),cn=class{constructor(i,e){ae(this,"instances",[]);ae(this,"canUseDOM",nr);ae(this,"context");ae(this,"value",{setHelmet:i=>{this.context.helmet=i},helmetInstances:{get:()=>this.canUseDOM?rt:this.instances,add:i=>{(this.canUseDOM?rt:this.instances).push(i)},remove:i=>{const e=(this.canUseDOM?rt:this.instances).indexOf(i);(this.canUseDOM?rt:this.instances).splice(e,1)}}});this.context=i,this.canUseDOM=e||!1,e||(i.helmet=un({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},ph={},ir=fe.createContext(ph),xe,mh=(xe=class extends N.Component{constructor(t){super(t);ae(this,"helmetData");this.helmetData=new cn(this.props.context||{},xe.canUseDOM)}render(){return fe.createElement(ir.Provider,{value:this.helmetData.value},this.props.children)}},ae(xe,"canUseDOM",nr),xe),Ae=(i,e)=>{const t=document.head||document.querySelector("head"),n=t.querySelectorAll(`${i}[${te}]`),o=[].slice.call(n),s=[];let l;return e&&e.length&&e.forEach(u=>{const d=document.createElement(i);for(const c in u)if(Object.prototype.hasOwnProperty.call(u,c))if(c==="innerHTML")d.innerHTML=u.innerHTML;else if(c==="cssText")d.styleSheet?d.styleSheet.cssText=u.cssText:d.appendChild(document.createTextNode(u.cssText));else{const f=c,m=typeof u[f]>"u"?"":u[f];d.setAttribute(c,m)}d.setAttribute(te,"true"),o.some((c,f)=>(l=f,d.isEqualNode(c)))?o.splice(l,1):s.push(d)}),o.forEach(u=>u.parentNode?.removeChild(u)),s.forEach(u=>t.appendChild(u)),{oldTags:o,newTags:s}},dn=(i,e)=>{const t=document.getElementsByTagName(i)[0];if(!t)return;const n=t.getAttribute(te),o=n?n.split(","):[],s=[...o],l=Object.keys(e);for(const u of l){const d=e[u]||"";t.getAttribute(u)!==d&&t.setAttribute(u,d),o.indexOf(u)===-1&&o.push(u);const c=s.indexOf(u);c!==-1&&s.splice(c,1)}for(let u=s.length-1;u>=0;u-=1)t.removeAttribute(s[u]);o.length===s.length?t.removeAttribute(te):t.getAttribute(te)!==l.join(",")&&t.setAttribute(te,l.join(","))},hh=(i,e)=>{typeof i<"u"&&document.title!==i&&(document.title=jo(i)),dn("title",e)},co=(i,e)=>{const{baseTag:t,bodyAttributes:n,htmlAttributes:o,linkTags:s,metaTags:l,noscriptTags:u,onChangeClientState:d,scriptTags:c,styleTags:f,title:m,titleAttributes:h}=i;dn("body",n),dn("html",o),hh(m,h);const g={baseTag:Ae("base",t),linkTags:Ae("link",s),metaTags:Ae("meta",l),noscriptTags:Ae("noscript",u),scriptTags:Ae("script",c),styleTags:Ae("style",f)},y={},v={};Object.keys(g).forEach(T=>{const{newTags:C,oldTags:k}=g[T];C.length&&(y[T]=C),k.length&&(v[T]=g[T].oldTags)}),e&&e(),d(i,y,v)},We=null,gh=i=>{We&&cancelAnimationFrame(We),i.defer?We=requestAnimationFrame(()=>{co(i,()=>{We=null})}):(co(i),We=null)},yh=gh,fo=class extends N.Component{constructor(){super(...arguments);ae(this,"rendered",!1)}shouldComponentUpdate(e){return!Qm(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let n=null;const o=rh(e.get().map(s=>{const l={...s.props};return delete l.context,l}));mh.canUseDOM?yh(o):un&&(n=un(o)),t(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Bt,vh=(Bt=class extends N.Component{shouldComponentUpdate(i){return!Wm(uo(this.props,"helmetData"),uo(i,"helmetData"))}mapNestedChildrenToProps(i,e){if(!e)return null;switch(i.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${i.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(i,e,t,n){return{...e,[i.type]:[...e[i.type]||[],{...t,...this.mapNestedChildrenToProps(i,n)}]}}mapObjectTypeChildren(i,e,t,n){switch(i.type){case"title":return{...e,[i.type]:n,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[i.type]:{...t}}}}mapArrayTypeChildrenToProps(i,e){let t={...e};return Object.keys(i).forEach(n=>{t={...t,[n]:i[n]}}),t}warnOnInvalidChildren(i,e){return so(lo.some(t=>i.type===t),typeof i.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${lo.join(", ")} are allowed. Helmet does not support rendering <${i.type}> elements. Refer to our API for more information.`),so(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${i.type}>. Did you forget to wrap your children in braces? ( <${i.type}>{\`\`}</${i.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(i,e){let t={};return fe.Children.forEach(i,n=>{if(!n||!n.props)return;const{children:o,...s}=n.props,l=Object.keys(s).reduce((d,c)=>(d[jm[c]||c]=s[c],d),{});let{type:u}=n;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(n,o),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(o,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(n,t,l,o);break;default:e=this.mapObjectTypeChildren(n,e,l,o);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:i,...e}=this.props;let t={...e},{helmetData:n}=e;if(i&&(t=this.mapChildrenToProps(i,t)),n&&!(n instanceof cn)){const o=n;n=new cn(o.context,!0),delete t.helmetData}return n?fe.createElement(fo,{...t,context:n.value}):fe.createElement(ir.Consumer,null,o=>fe.createElement(fo,{...t,context:o}))}},ae(Bt,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Bt);const st={jarir_id:"abkhas_jarir_2025",noon_id:"Z392",amazon_id:"abkhas07-21",extra_id:"ex_abkhas_99"},xh=(i,e)=>{switch(i.toLowerCase()){case"jarir":return`https://search.arabclicks.com/click-jrfk9k-12345678?url=${encodeURIComponent(e)}&subid=${st.jarir_id}`;case"noon":return`${e}?ref=${st.noon_id}`;case"amazon":return`${e}&tag=${st.amazon_id}`;case"extra":return`https://extra.com/affiliate?link=${encodeURIComponent(e)}&source=${st.extra_id}`;default:return e}},Ch=(i,e)=>{console.log(`[REVENUE_TRACK] User clicked on ${i} for store ${e}`)},cg=({productId:i})=>{const{lang:e,theme:t,navigate:n,toggleCompare:o,compareList:s,userPrefs:l,updatePrefs:u,addCoins:d,trackInteraction:c}=je(),{trigger:f}=Ko(),[m,h]=N.useState(void 0),[g,y]=N.useState(!0),[v,T]=N.useState(!1),[C,k]=N.useState(void 0),[w,A]=N.useState(null),[P,E]=N.useState([]),[R,q]=N.useState(!1),I=St[e],F=()=>f("success"),J=()=>f("medium"),Se=()=>f("light"),Ee=N.useMemo(()=>{if(!m||!m.offers||m.offers.length===0)return[];const Z=m.offers[0].price,X=new Date;return Array.from({length:7}).map((ue,Mt)=>{const Ge=new Date;Ge.setMonth(X.getMonth()-(6-Mt));const ce=l.calendar==="hijri"?e==="ar"?"ar-SA-u-ca-islamic":"en-US-u-ca-islamic":e==="ar"?"ar-SA":"en-US";return{name:new Intl.DateTimeFormat(ce,{month:"short"}).format(Ge),price:Z+Math.floor(Math.random()*500)-100,fullDate:Ge}})},[m,l.calendar,e]);N.useEffect(()=>{(async()=>{y(!0);try{const X=gn.find(ue=>ue.product_id===i);if(X){h(X),k(X.thumbnail_url),c(X,"view");const ue=await Zo(X.name);ue&&(h(ce=>ce&&{...ce,thumbnail_url:ue}),k(ue));const[Mt,Ge]=await Promise.all([Um(X,l),navigator.geolocation?new Promise(ce=>{navigator.geolocation.getCurrentPosition(bt=>ce($m(X.name,bt.coords.latitude,bt.coords.longitude)),()=>ce([]))}):Promise.resolve([])]);A(Mt),E(Ge)}}catch(X){console.error("🟥 CRITICAL_ERROR_BOUNDARY: Error in ProductDetails init:",X)}finally{y(!1)}})()},[i,l,e]);const K=(Z,X)=>{if(!m)return;F(),T(!0),c(m,"purchase"),Ch(i,Z);const ue=xh(Z,X);setTimeout(()=>{window.open(ue,"_blank"),T(!1)},1200)},O=()=>{m&&(J(),c(m,"wishlist"))},nt=()=>{m&&(F(),d(500),q(!0),setTimeout(()=>q(!1),4e3),navigator.share&&navigator.share({title:m.name,text:w?.summary||m.description,url:window.location.href}).catch(()=>{}))};if(g)return p.jsx(Gm,{});if(!m)return p.jsx("div",{className:"dark:text-white p-12 text-center",children:"Product not found."});const se=s.includes(m.product_id);return p.jsxs("div",{className:"pb-32 transition-all animate-in slide-in-from-bottom-5 duration-700 relative",children:[p.jsx(vh,{children:p.jsx("title",{children:`${m.name} | أبخص - مساعد الشراء الذكي`})}),v&&p.jsxs("div",{className:"fixed inset-0 z-[300] bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl flex flex-col items-center justify-center animate-in fade-in duration-300",children:[p.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-[2rem] flex items-center justify-center shadow-2xl mb-8 animate-bounce",children:p.jsx(wn,{size:40,className:"text-white"})}),p.jsx("h2",{className:"text-2xl font-black text-gray-800 dark:text-white mb-2",children:e==="ar"?"جاري تحويلك للمتجر...":"Redirecting to store..."})]}),R&&p.jsx("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-[200] animate-in slide-in-from-top-10 duration-500",children:p.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-amber-600 text-white px-8 py-4 rounded-[2rem] shadow-2xl flex items-center gap-4 border-4 border-white",children:[p.jsx("div",{className:"bg-white text-amber-600 p-2 rounded-full shadow-inner",children:p.jsx(Rr,{size:24,fill:"currentColor"})}),p.jsxs("div",{className:"text-start",children:[p.jsx("h4",{className:"font-black text-lg leading-none mb-1",children:I.recBonusTitle}),p.jsx("p",{className:"text-[10px] font-bold opacity-90",children:I.recBonusDesc})]})]})}),p.jsxs("div",{className:"flex justify-between items-center mb-12",children:[p.jsxs("button",{onClick:()=>n("home"),className:"flex items-center text-gray-500 dark:text-slate-400 hover:text-indigo-600 font-black transition-all group px-5 py-3 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-gray-100 dark:border-slate-700",children:[e==="ar"?p.jsx(Er,{size:18,className:"ms-0 me-3"}):p.jsx(Sr,{size:18,className:"me-3"}),I.back]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:nt,className:"p-3.5 bg-white dark:bg-slate-800 rounded-2xl border border-gray-100 dark:border-slate-700 text-indigo-600 hover:bg-indigo-50 transition-all shadow-sm active:scale-90",children:p.jsx(Or,{size:22})}),p.jsx("button",{onClick:O,className:"p-3.5 bg-white dark:bg-slate-800 rounded-2xl border border-gray-100 dark:border-slate-700 text-gray-400 hover:text-red-500 transition-all shadow-sm active:scale-90",children:p.jsx(Vr,{size:22})}),p.jsxs("button",{onClick:()=>{Se(),o(m.product_id)},className:`flex items-center gap-3 px-8 py-3.5 rounded-2xl border font-black text-sm transition-all shadow-sm active:scale-95 ${se?"bg-indigo-600 border-indigo-600 text-white":"bg-white dark:bg-slate-800 border-gray-100 dark:border-slate-700 text-gray-600 dark:text-slate-300"}`,children:[se?p.jsx(Ir,{size:20}):p.jsx(Br,{size:20}),se?e==="ar"?"إزالة من المقارنة":"Remove":e==="ar"?"إضافة للمقارنة":"Add to compare"]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[p.jsxs("div",{className:"space-y-10",children:[p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[3rem] p-4 border border-gray-100 dark:border-slate-700 shadow-2xl aspect-square flex items-center justify-center relative overflow-hidden group",children:[p.jsx(xo,{src:C,alt:m.name,className:"w-full h-full rounded-[2.5rem]"}),p.jsx("div",{className:"absolute top-8 start-8 bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl p-4 rounded-[1.5rem] border border-white/20 shadow-2xl",children:p.jsx(Hr,{size:28,className:"text-indigo-600"})})]}),p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[3rem] p-10 border border-gray-100 dark:border-slate-700 shadow-sm text-start",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("h3",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight flex items-center gap-3",children:[p.jsx(vo,{size:24,className:"text-indigo-600"})," ",I.priceHistory]}),p.jsxs("button",{onClick:()=>u({calendar:l.calendar==="hijri"?"gregorian":"hijri"}),className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-400 rounded-xl text-xs font-black transition-all hover:bg-indigo-100",children:[p.jsx(br,{size:14}),l.calendar==="hijri"?I.gregorian:I.hijri]})]}),p.jsx("div",{className:"h-64 w-full",children:p.jsx(sr,{width:"100%",height:"100%",children:p.jsxs(ar,{data:Ee,children:[p.jsx(lr,{strokeDasharray:"3 3",vertical:!1,stroke:t==="dark"?"#334155":"#f1f5f9"}),p.jsx(ur,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:900,fill:"#94a3b8"}}),p.jsx(cr,{hide:!0}),p.jsx(dr,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)",fontWeight:800},formatter:Z=>[`${Z.toLocaleString()} ${I.sar}`,I.price]}),p.jsx(fr,{type:"monotone",dataKey:"price",stroke:"#4f46e5",strokeWidth:4,dot:{r:6,fill:"#4f46e5",strokeWidth:0},activeDot:{r:8,strokeWidth:0}})]})})})]})]}),p.jsxs("div",{className:"space-y-12 text-start",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[p.jsx("span",{className:"px-4 py-1.5 bg-indigo-50 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-400 rounded-full text-xs font-black uppercase tracking-[0.2em]",children:m.brand}),p.jsxs("div",{className:"flex items-center gap-2 px-4 py-1.5 bg-green-50 text-green-700 rounded-full text-[10px] font-black uppercase tracking-widest border border-green-100",children:[p.jsx($r,{size:12})," ",e==="ar"?"رابط محقق":"Verified Link"]})]}),p.jsx("h1",{className:"text-5xl md:text-6xl font-black text-gray-900 dark:text-white leading-[1.1] mb-8 tracking-tighter",children:m.name})]}),p.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-indigo-950 rounded-[3rem] p-10 text-white shadow-2xl relative overflow-hidden group border border-indigo-500/30",children:p.jsxs("div",{className:"relative z-10",children:[p.jsx("div",{className:"flex items-center justify-between mb-10",children:p.jsxs("div",{className:"flex items-center gap-5",children:[p.jsx("div",{className:"bg-indigo-500/20 p-4 rounded-[1.5rem] backdrop-blur-2xl border border-indigo-500/30 shadow-inner",children:p.jsx(Mr,{size:32,className:"text-indigo-400"})}),p.jsx("h3",{className:"text-3xl font-black tracking-tight",children:I.whyRec})]})}),p.jsx("p",{className:"text-slate-300 mb-10 text-xl leading-relaxed font-medium italic border-s-4 border-indigo-500 ps-6",children:w?.summary||(e==="ar"?"تحليل أبخص الذكي يبحث الآن...":"Abkhas AI searching...")})]})}),p.jsxs("div",{className:"space-y-8",children:[p.jsx("h3",{className:"font-black text-3xl text-gray-900 dark:text-white tracking-tight",children:I.bestOffers}),m.offers?.map(Z=>p.jsxs("div",{className:"bg-white dark:bg-slate-800 border-2 border-gray-50 dark:border-slate-700 rounded-[2.5rem] p-10 hover:border-indigo-600 transition-all shadow-sm group/offer text-start",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-10",children:[p.jsxs("div",{className:"flex items-center gap-8",children:[p.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-slate-900 rounded-2xl flex items-center justify-center font-black text-indigo-600 text-2xl uppercase",children:Z.store_name.substring(0,2)}),p.jsx("h4",{className:"font-black text-2xl text-gray-900 dark:text-white",children:Z.store_name})]}),p.jsxs("div",{className:"text-4xl font-black text-indigo-700 dark:text-indigo-400",children:[Z.price.toLocaleString()," ",I.sar]})]}),p.jsx("div",{className:"flex items-center justify-between mt-10 pt-10 border-t border-gray-100 dark:border-slate-700",children:p.jsxs("button",{onClick:()=>K(Z.store_id,Z.affiliate_url),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-12 py-5 rounded-2xl font-black text-sm flex items-center gap-4 shadow-2xl transition-all",children:[I.buy," ",p.jsx(wn,{size:20})]})})]},Z.offer_id))]})]})]})]})},Th=({lang:i})=>{const{navigate:e}=je(),[t,n]=N.useState("email"),[o,s]=N.useState(""),[l,u]=N.useState(""),[d,c]=N.useState(""),[f,m]=N.useState(!1),[h,g]=N.useState(!1),[y,v]=N.useState(""),[T,C]=N.useState(!1),k=async w=>{w.preventDefault(),v(""),C(!1),g(!0);try{let A;if(t==="email"){if(!o||!d){v(i==="ar"?"يرجى ملء جميع الحقول":"Please fill all fields"),g(!1);return}A=await pr(o.trim(),d)}else{if(!l||!d){v(i==="ar"?"يرجى ملء جميع الحقول":"Please fill all fields"),g(!1);return}A=await mr(l.trim(),d)}A.success?(C(!0),s(""),u(""),c(""),setTimeout(()=>{e("home")},1500)):v(A.message||(i==="ar"?"فشل تسجيل الدخول":"Login failed"))}catch{v(i==="ar"?"حدث خطأ غير متوقع":"An unexpected error occurred")}finally{g(!1)}};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center p-4",children:p.jsxs("div",{className:"w-full max-w-md",children:[p.jsxs("div",{className:"text-center mb-10 animate-in fade-in slide-in-from-top-4 duration-500",children:[p.jsx("div",{className:"inline-block p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-3xl mb-6 group",children:p.jsx(dt,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform"})}),p.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-3 tracking-tight",children:i==="ar"?"تسجيل الدخول":"Login"}),p.jsx("p",{className:"text-gray-500 dark:text-slate-400",children:i==="ar"?"استمتع بتجربة التسوق الذكية":"Enjoy smart shopping"})]}),p.jsxs("div",{className:"flex gap-3 mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[p.jsx("button",{onClick:()=>{n("email"),v("")},className:`flex-1 py-4 px-4 rounded-2xl border-2 font-black text-sm transition-all ${t==="email"?"bg-indigo-600 border-indigo-600 text-white shadow-xl shadow-indigo-200/20 dark:shadow-indigo-900/30":"border-gray-200 dark:border-slate-700 text-gray-600 dark:text-slate-300 hover:border-indigo-300 dark:hover:border-indigo-700"}`,children:p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx(ft,{size:18}),p.jsx("span",{children:i==="ar"?"البريد":"Email"})]})}),p.jsx("button",{onClick:()=>{n("phone"),v("")},className:`flex-1 py-4 px-4 rounded-2xl border-2 font-black text-sm transition-all ${t==="phone"?"bg-indigo-600 border-indigo-600 text-white shadow-xl shadow-indigo-200/20 dark:shadow-indigo-900/30":"border-gray-200 dark:border-slate-700 text-gray-600 dark:text-slate-300 hover:border-indigo-300 dark:hover:border-indigo-700"}`,children:p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx(Xe,{size:18}),p.jsx("span",{children:i==="ar"?"الجوال":"Phone"})]})})]}),p.jsxs("form",{onSubmit:k,className:"space-y-5 animate-in fade-in slide-in-from-bottom-4 duration-500 stagger-in",children:[t==="email"&&p.jsxs("div",{className:"relative group",children:[p.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-slate-400 mb-2 uppercase tracking-[0.1em]",children:i==="ar"?"البريد الإلكتروني":"Email Address"}),p.jsxs("div",{className:"relative",children:[p.jsx(ft,{className:"absolute start-4 top-4 w-5 h-5 text-gray-400 dark:text-slate-500 pointer-events-none"}),p.jsx("input",{type:"email",value:o,onChange:w=>s(w.target.value),placeholder:i==="ar"?"أدخل بريدك الإلكتروني":"you@example.com",className:"w-full bg-white dark:bg-slate-800 border-2 border-gray-200 dark:border-slate-700 rounded-2xl ps-12 pe-4 py-4 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 focus:outline-none focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 dark:focus:ring-indigo-900/30 transition-all font-semibold"})]})]}),t==="phone"&&p.jsxs("div",{className:"relative group",children:[p.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-slate-400 mb-2 uppercase tracking-[0.1em]",children:i==="ar"?"رقم الجوال السعودي":"Saudi Phone Number"}),p.jsxs("div",{className:"relative",children:[p.jsx(Xe,{className:"absolute start-4 top-4 w-5 h-5 text-gray-400 dark:text-slate-500 pointer-events-none"}),p.jsx("input",{type:"tel",value:l,onChange:w=>u(w.target.value),placeholder:i==="ar"?"05XXXXXXXX أو 966XXXXXXXX":"05XXXXXXXX",className:"w-full bg-white dark:bg-slate-800 border-2 border-gray-200 dark:border-slate-700 rounded-2xl ps-12 pe-4 py-4 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 focus:outline-none focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 dark:focus:ring-indigo-900/30 transition-all font-semibold"})]}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-2",children:i==="ar"?"✓ صيغ مقبولة: 05XXXXXXXX, 0501234567, 966501234567":"✓ Accepted formats: 05XXXXXXXX, 0501234567, 966501234567"})]}),p.jsxs("div",{className:"relative group",children:[p.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-slate-400 mb-2 uppercase tracking-[0.1em]",children:i==="ar"?"كلمة المرور":"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(dt,{className:"absolute start-4 top-4 w-5 h-5 text-gray-400 dark:text-slate-500 pointer-events-none"}),p.jsx("input",{type:f?"text":"password",value:d,onChange:w=>c(w.target.value),placeholder:"••••••••",className:"w-full bg-white dark:bg-slate-800 border-2 border-gray-200 dark:border-slate-700 rounded-2xl ps-12 pe-12 py-4 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 focus:outline-none focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 dark:focus:ring-indigo-900/30 transition-all font-semibold"}),p.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute end-4 top-4 text-gray-400 dark:text-slate-500 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:f?p.jsx(Gt,{size:20}):p.jsx(Ht,{size:20})})]})]}),y&&p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 rounded-lg flex gap-3 animate-in fade-in slide-in-from-left-4 duration-300",children:[p.jsx(pn,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),p.jsx("p",{className:"text-red-700 dark:text-red-300 font-semibold text-sm",children:y})]}),T&&p.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4 rounded-lg flex gap-3 animate-in fade-in slide-in-from-left-4 duration-300",children:[p.jsx(mn,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0"}),p.jsx("p",{className:"text-green-700 dark:text-green-300 font-semibold text-sm",children:i==="ar"?"تم تسجيل الدخول بنجاح!":"Login successful!"})]}),p.jsx("button",{type:"submit",disabled:h||T,className:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 dark:bg-indigo-600 dark:hover:bg-indigo-500 text-white py-4 rounded-2xl font-black text-lg transition-all active:scale-95 shadow-lg shadow-indigo-200/30 dark:shadow-indigo-900/30 flex items-center justify-center gap-3 group",children:h?p.jsxs(p.Fragment,{children:[p.jsx(hn,{className:"w-5 h-5 animate-spin"}),p.jsx("span",{children:i==="ar"?"جاري التحقق...":"Verifying..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{children:i==="ar"?"دخول":"Login"}),p.jsx(kt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),p.jsxs("div",{className:"relative my-8",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200 dark:border-slate-700"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-4 bg-white dark:bg-slate-800 text-gray-500 dark:text-slate-400 font-semibold",children:i==="ar"?"أو":"or"})})]}),p.jsx("div",{className:"text-center",children:p.jsxs("p",{className:"text-gray-600 dark:text-slate-300 font-semibold",children:[i==="ar"?"ليس لديك حساب؟":"Don't have an account?",p.jsx("button",{onClick:()=>e("signup"),className:"text-indigo-600 dark:text-indigo-400 font-black ms-2 hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors",children:i==="ar"?"سجل الآن":"Sign up now"})]})}),p.jsx("button",{onClick:()=>e("home"),className:"w-full mt-6 text-gray-600 dark:text-slate-400 py-3 rounded-2xl hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors font-semibold",children:i==="ar"?"العودة للرئيسية":"Back to Home"})]})})},dg=Object.freeze(Object.defineProperty({__proto__:null,default:Th},Symbol.toStringTag,{value:"Module"})),_h=i=>{let e=0;i.length>=8&&(e+=1),i.length>=12&&(e+=1),/[a-z]/.test(i)&&/[A-Z]/.test(i)&&(e+=1),/[0-9]/.test(i)&&(e+=1),/[^a-zA-Z0-9]/.test(i)&&(e+=1);let t="weak";return e<=1?t="weak":e===2?t="fair":e===3?t="good":t="strong",{level:t,score:e}},kh=({lang:i})=>{const{navigate:e}=je(),[t,n]=N.useState("email"),[o,s]=N.useState(""),[l,u]=N.useState(""),[d,c]=N.useState(""),[f,m]=N.useState(""),[h,g]=N.useState(""),[y,v]=N.useState(!1),[T,C]=N.useState(!1),[k,w]=N.useState(!1),[A,P]=N.useState(!1),[E,R]=N.useState(""),[q,I]=N.useState(!1),F=_h(f),J=()=>{switch(F.level){case"weak":return"bg-red-500 dark:bg-red-600";case"fair":return"bg-orange-500 dark:bg-orange-600";case"good":return"bg-blue-500 dark:bg-blue-600";case"strong":return"bg-green-500 dark:bg-green-600"}},Se=()=>({weak:i==="ar"?"ضعيفة":"Weak",fair:i==="ar"?"معقولة":"Fair",good:i==="ar"?"جيدة":"Good",strong:i==="ar"?"قوية":"Strong"})[F.level],Ee=()=>{if(!o.trim())return i==="ar"?"يرجى إدخال اسمك":"Please enter your name";if(t==="email"){if(!l)return i==="ar"?"يرجى إدخال بريدك الإلكتروني":"Please enter your email";if(!yr(l))return i==="ar"?"صيغة البريد الإلكتروني غير صحيحة":"Invalid email format"}else{if(!d)return i==="ar"?"يرجى إدخال رقم جوالك":"Please enter your phone number";if(!vr(d))return i==="ar"?"رقم جوال سعودي غير صحيح":"Invalid Saudi phone number"}return f?f.length<8?i==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters":f!==h?i==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match":k?null:i==="ar"?"يجب قبول الشروط والأحكام":"You must accept the terms and conditions":i==="ar"?"يرجى إدخال كلمة مرور":"Please enter a password"},K=async O=>{O.preventDefault(),R(""),I(!1);const nt=Ee();if(nt){R(nt);return}P(!0);try{let se;t==="email"?se=await hr(l.trim(),f,o.trim()):se=await gr(d.trim(),f,o.trim()),se.success?(I(!0),s(""),u(""),c(""),m(""),g(""),w(!1),setTimeout(()=>{e("home")},1500)):R(se.message||(i==="ar"?"فشل التسجيل":"Signup failed"))}catch{R(i==="ar"?"حدث خطأ غير متوقع":"An unexpected error occurred")}finally{P(!1)}};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center p-4 py-12",children:p.jsxs("div",{className:"w-full max-w-md",children:[p.jsxs("div",{className:"text-center mb-10 animate-in fade-in slide-in-from-top-4 duration-500",children:[p.jsx("div",{className:"inline-block p-3 bg-green-100 dark:bg-green-900/30 rounded-3xl mb-6 group",children:p.jsx(pt,{className:"w-8 h-8 text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform"})}),p.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-3 tracking-tight",children:i==="ar"?"إنشاء حساب":"Sign Up"}),p.jsx("p",{className:"text-gray-500 dark:text-slate-400",children:i==="ar"?"انضم إلى ملايين المتسوقين الذكيين":"Join millions of smart shoppers"})]}),p.jsxs("div",{className:"flex gap-3 mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[p.jsx("button",{onClick:()=>{n("email"),R("")},className:`flex-1 py-4 px-4 rounded-2xl border-2 font-black text-sm transition-all ${t==="email"?"bg-green-600 border-green-600 text-white shadow-xl shadow-green-200/20 dark:shadow-green-900/30":"border-gray-200 dark:border-slate-700 text-gray-600 dark:text-slate-300 hover:border-green-300 dark:hover:border-green-700"}`,children:p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx(ft,{size:18}),p.jsx("span",{children:i==="ar"?"البريد":"Email"})]})}),p.jsx("button",{onClick:()=>{n("phone"),R("")},className:`flex-1 py-4 px-4 rounded-2xl border-2 font-black text-sm transition-all ${t==="phone"?"bg-green-600 border-green-600 text-white shadow-xl shadow-green-200/20 dark:shadow-green-900/30":"border-gray-200 dark:border-slate-700 text-gray-600 dark:text-slate-300 hover:border-green-300 dark:hover:border-green-700"}`,children:p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx(Xe,{size:18}),p.jsx("span",{children:i==="ar"?"الجوال":"Phone"})]})})]}),p.jsxs("form",{onSubmit:K,className:"space-y-5 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[p.jsxs("div",{className:"relative",children:[p.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-slate-400 mb-2 uppercase tracking-[0.1em]",children:i==="ar"?"الاسم":"Full Name"}),p.jsxs("div",{className:"relative",children:[p.jsx(jr,{className:"absolute start-4 top-4 w-5 h-5 text-gray-400 dark:text-slate-500 pointer-events-none"}),p.jsx("input",{type:"text",value:o,onChange:O=>s(O.target.value),placeholder:i==="ar"?"أدخل اسمك الكامل":"John Doe",className:"w-full bg-white dark:bg-slate-800 border-2 border-gray-200 dark:border-slate-700 rounded-2xl ps-12 pe-4 py-4 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 focus:ring-green-100 dark:focus:ring-green-900/30 transition-all font-semibold"})]})]}),t==="email"&&p.jsxs("div",{className:"relative",children:[p.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-slate-400 mb-2 uppercase tracking-[0.1em]",children:i==="ar"?"البريد الإلكتروني":"Email Address"}),p.jsxs("div",{className:"relative",children:[p.jsx(ft,{className:"absolute start-4 top-4 w-5 h-5 text-gray-400 dark:text-slate-500 pointer-events-none"}),p.jsx("input",{type:"email",value:l,onChange:O=>u(O.target.value),placeholder:"you@example.com",className:"w-full bg-white dark:bg-slate-800 border-2 border-gray-200 dark:border-slate-700 rounded-2xl ps-12 pe-4 py-4 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 focus:ring-green-100 dark:focus:ring-green-900/30 transition-all font-semibold"})]})]}),t==="phone"&&p.jsxs("div",{className:"relative",children:[p.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-slate-400 mb-2 uppercase tracking-[0.1em]",children:i==="ar"?"رقم الجوال السعودي":"Saudi Phone Number"}),p.jsxs("div",{className:"relative",children:[p.jsx(Xe,{className:"absolute start-4 top-4 w-5 h-5 text-gray-400 dark:text-slate-500 pointer-events-none"}),p.jsx("input",{type:"tel",value:d,onChange:O=>c(O.target.value),placeholder:i==="ar"?"05XXXXXXXX أو 966XXXXXXXX":"05XXXXXXXX",className:"w-full bg-white dark:bg-slate-800 border-2 border-gray-200 dark:border-slate-700 rounded-2xl ps-12 pe-4 py-4 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 focus:ring-green-100 dark:focus:ring-green-900/30 transition-all font-semibold"})]}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-2",children:i==="ar"?"✓ صيغ مقبولة: 05XXXXXXXX, 0501234567, 966501234567":"✓ Accepted formats: 05XXXXXXXX, 0501234567, 966501234567"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-slate-400 mb-2 uppercase tracking-[0.1em]",children:i==="ar"?"كلمة المرور":"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(dt,{className:"absolute start-4 top-4 w-5 h-5 text-gray-400 dark:text-slate-500 pointer-events-none"}),p.jsx("input",{type:y?"text":"password",value:f,onChange:O=>m(O.target.value),placeholder:"••••••••",className:"w-full bg-white dark:bg-slate-800 border-2 border-gray-200 dark:border-slate-700 rounded-2xl ps-12 pe-12 py-4 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 focus:ring-green-100 dark:focus:ring-green-900/30 transition-all font-semibold"}),p.jsx("button",{type:"button",onClick:()=>v(!y),className:"absolute end-4 top-4 text-gray-400 dark:text-slate-500 hover:text-green-600 dark:hover:text-green-400 transition-colors",children:y?p.jsx(Gt,{size:20}):p.jsx(Ht,{size:20})})]}),f&&p.jsxs("div",{className:"mt-3 space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:p.jsx("div",{className:`h-full ${J()} transition-all duration-300`,style:{width:`${F.score/5*100}%`}})}),p.jsx("span",{className:"text-xs font-black text-gray-600 dark:text-slate-300",children:Se()})]}),p.jsxs("ul",{className:"text-xs text-gray-500 dark:text-slate-400 space-y-1",children:[p.jsxs("li",{className:f.length>=8?"text-green-600 dark:text-green-400 font-semibold":"",children:["✓ ",i==="ar"?"8 أحرف على الأقل":"At least 8 characters"]}),p.jsxs("li",{className:/[A-Z]/.test(f)&&/[a-z]/.test(f)?"text-green-600 dark:text-green-400 font-semibold":"",children:["✓ ",i==="ar"?"أحرف كبيرة وصغيرة":"Uppercase and lowercase"]}),p.jsxs("li",{className:/[0-9]/.test(f)?"text-green-600 dark:text-green-400 font-semibold":"",children:["✓ ",i==="ar"?"أرقام":"Numbers"]}),p.jsx("li",{className:/[^a-zA-Z0-9]/.test(f)?"text-amber-600 dark:text-amber-400 font-semibold":"text-gray-400",children:i==="ar"?"(اختياري) رموز خاصة":"(Optional) Special characters"})]})]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-slate-400 mb-2 uppercase tracking-[0.1em]",children:i==="ar"?"تأكيد كلمة المرور":"Confirm Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(dt,{className:"absolute start-4 top-4 w-5 h-5 text-gray-400 dark:text-slate-500 pointer-events-none"}),p.jsx("input",{type:T?"text":"password",value:h,onChange:O=>g(O.target.value),placeholder:"••••••••",className:"w-full bg-white dark:bg-slate-800 border-2 border-gray-200 dark:border-slate-700 rounded-2xl ps-12 pe-12 py-4 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 focus:ring-green-100 dark:focus:ring-green-900/30 transition-all font-semibold"}),p.jsx("button",{type:"button",onClick:()=>C(!T),className:"absolute end-4 top-4 text-gray-400 dark:text-slate-500 hover:text-green-600 dark:hover:text-green-400 transition-colors",children:T?p.jsx(Gt,{size:20}):p.jsx(Ht,{size:20})})]}),h&&f!==h&&p.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:i==="ar"?"✗ كلمات المرور غير متطابقة":"✗ Passwords do not match"}),h&&f===h&&p.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:i==="ar"?"✓ كلمات المرور متطابقة":"✓ Passwords match"})]}),p.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-200 dark:border-blue-800",children:[p.jsx("input",{type:"checkbox",id:"terms",checked:k,onChange:O=>w(O.target.checked),className:"w-5 h-5 rounded-lg mt-0.5 cursor-pointer accent-green-600"}),p.jsx("label",{htmlFor:"terms",className:"text-sm text-gray-700 dark:text-slate-300 cursor-pointer leading-relaxed",children:i==="ar"?p.jsxs(p.Fragment,{children:["أوافق على ",p.jsx("span",{className:"font-black text-blue-600 dark:text-blue-400",children:"الشروط والأحكام"})," و",p.jsx("span",{className:"font-black text-blue-600 dark:text-blue-400",children:"سياسة الخصوصية"})]}):p.jsxs(p.Fragment,{children:["I agree to the ",p.jsx("span",{className:"font-black text-blue-600 dark:text-blue-400",children:"Terms & Conditions"})," and ",p.jsx("span",{className:"font-black text-blue-600 dark:text-blue-400",children:"Privacy Policy"})]})})]}),E&&p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 rounded-lg flex gap-3 animate-in fade-in slide-in-from-left-4 duration-300",children:[p.jsx(pn,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),p.jsx("p",{className:"text-red-700 dark:text-red-300 font-semibold text-sm",children:E})]}),q&&p.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4 rounded-lg flex gap-3 animate-in fade-in slide-in-from-left-4 duration-300",children:[p.jsx(mn,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0"}),p.jsx("p",{className:"text-green-700 dark:text-green-300 font-semibold text-sm",children:i==="ar"?"تم إنشاء الحساب بنجاح!":"Account created successfully!"})]}),p.jsx("button",{type:"submit",disabled:A||q,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 dark:bg-green-600 dark:hover:bg-green-500 text-white py-4 rounded-2xl font-black text-lg transition-all active:scale-95 shadow-lg shadow-green-200/30 dark:shadow-green-900/30 flex items-center justify-center gap-3 group",children:A?p.jsxs(p.Fragment,{children:[p.jsx(hn,{className:"w-5 h-5 animate-spin"}),p.jsx("span",{children:i==="ar"?"جاري الإنشاء...":"Creating..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{children:i==="ar"?"إنشاء حساب":"Sign Up"}),p.jsx(kt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),p.jsxs("div",{className:"relative my-8",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200 dark:border-slate-700"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-4 bg-white dark:bg-slate-800 text-gray-500 dark:text-slate-400 font-semibold",children:i==="ar"?"أو":"or"})})]}),p.jsx("div",{className:"text-center",children:p.jsxs("p",{className:"text-gray-600 dark:text-slate-300 font-semibold",children:[i==="ar"?"هل لديك حساب؟":"Already have an account?",p.jsx("button",{onClick:()=>e("login"),className:"text-green-600 dark:text-green-400 font-black ms-2 hover:text-green-700 dark:hover:text-green-300 transition-colors",children:i==="ar"?"دخول":"Login"})]})}),p.jsx("button",{onClick:()=>e("home"),className:"w-full mt-6 text-gray-600 dark:text-slate-400 py-3 rounded-2xl hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors font-semibold",children:i==="ar"?"العودة للرئيسية":"Back to Home"})]})})},fg=Object.freeze(Object.defineProperty({__proto__:null,default:kh},Symbol.toStringTag,{value:"Module"}));export{Nh as $,sg as A,wr as B,Rr as C,mn as D,Ht as E,Lh as F,Uh as G,Rh as H,qh as I,Zr as J,Fh as K,Bh as L,Yh as M,Ih as N,Or as O,Hr as P,Oh as Q,Zh as R,Qh as S,Kr as T,jr as U,Dh as V,Ph as W,Xh as X,rg as Y,pt as Z,Mr as _,ig as a,og as a0,hn as a1,Jh as a2,Wh as a3,ag as a4,bh as a5,eg as a6,Mh as a7,wn as a8,lg as a9,cg as aa,ug as ab,go as ac,kt as ad,mh as ae,dg as af,fg as ag,ft as b,Hh as c,Gh as d,Kh as e,zr as f,$h as g,Er as h,ng as i,p as j,pn as k,dt as l,zh as m,Ur as n,gn as o,jh as p,Xe as q,tg as r,ho as s,St as t,je as u,Pr as v,Lr as w,Vh as x,Ko as y,Yr as z};
